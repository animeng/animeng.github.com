<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.8.6">Jekyll</generator><link href="https://mengtnt.com/feed.xml" rel="self" type="application/atom+xml" /><link href="https://mengtnt.com/" rel="alternate" type="text/html" /><updated>2024-02-13T07:13:58+00:00</updated><id>https://mengtnt.com/feed.xml</id><title type="html">mengtntçš„Blog</title><subtitle>èµ°è‡ªå·±çš„è·¯ï¼Œè®©åˆ«äººè¯´å»å§</subtitle><author><name>mengtnt</name></author><entry><title type="html">è§†é¢‘å¸§å¤„ç†</title><link href="https://mengtnt.com/2023/06/17/video-process.html" rel="alternate" type="text/html" title="è§†é¢‘å¸§å¤„ç†" /><published>2023-06-17T03:01:06+00:00</published><updated>2023-06-17T03:01:06+00:00</updated><id>https://mengtnt.com/2023/06/17/video-process</id><content type="html" xml:base="https://mengtnt.com/2023/06/17/video-process.html">&lt;p&gt;å½“æˆ‘ä»¬åšç¾é¢œã€è™šæ‹ŸèƒŒæ™¯ã€è™šæ‹Ÿäººå¶ç­‰åŠŸèƒ½æ—¶ï¼Œä¸€èˆ¬éƒ½æ˜¯éœ€è¦å¯¹ iOS ç›¸æœºå¸§è¿›è¡Œå‰ç½®å¤„ç†ã€‚å¦‚æœåšè¿‡ iOS å¼€å‘çš„è¯ï¼Œå¾ˆå¿«å¯ä»¥å†™å‡ºæ¥ä¸‹é¢çš„å¤„ç†è¿‡ç¨‹ä»£ç ã€‚&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;captureOutput&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVCaptureOutput&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;captureOutput&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;didOutputSampleBuffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CMSampleBufferRef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sampleBuffer&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;fromConnection&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVCaptureConnection&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;connection&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;CVPixelBufferRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pixelBuffer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CMSampleBufferGetImageBuffer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sampleBuffer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;CVPixelBufferRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resultPixelBuffe&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pixelBuffer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;renderPixbuffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;resultPixelBuffe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;ä¸Šé¢çš„ä»£ç çœ‹èµ·æ¥æ²¡å•¥é—®é¢˜ï¼Œä¸å‡ºæ„å¤–åº”è¯¥ä¹Ÿå¯ä»¥é¡ºåˆ©çš„è¿è¡Œèµ·æ¥ã€‚ä¸‹é¢æˆ‘ä»¬å°±é€æ­¥æ¥çœ‹ä¼šé‡åˆ°ä»€ä¹ˆé—®é¢˜ã€‚&lt;/p&gt;

&lt;h2 id=&quot;è§†é¢‘å¡é¡¿é—®é¢˜&quot;&gt;è§†é¢‘å¡é¡¿é—®é¢˜&lt;/h2&gt;

&lt;p&gt;å½“ä½ å†™çš„ä»£ç è¿è¡Œçš„æ—¶é—´æ¯”è¾ƒä¹…æ—¶ï¼Œæ‰‹æœºå‘çƒ«æ€§èƒ½ä¸‹é™æ—¶ä¼šå‘ç°å»¶æ—¶æ„Ÿéå¸¸å¼ºçƒˆï¼Œçœ‹åˆ°çš„è‡ªå·±çš„ç”»é¢å¾ˆå¯èƒ½æ˜¯5ç§’ä¹‹å‰çš„ç”»é¢ã€‚ä¸»è¦çš„åŸå› å°±æ˜¯æ€§èƒ½ä¸‹é™æ—¶ï¼Œæ‰‹æœºçš„ç¡¬ä»¶å¤„ç†é€Ÿåº¦ä¸‹é™ï¼Œç›¸æœºçš„è§†é¢‘å¸§çš„é‡‡é›†é€Ÿåº¦å’Œå¤„ç†é€Ÿåº¦ä¸èƒ½åŒ¹é…ï¼Œé€ æˆäº†è§†é¢‘å¸§å †ç§¯å¼•èµ·çš„é—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/6e785b9273e874349d5d06bb8b9a66a4cb50ca10e3feebe3f25a0d27c676b718.png&quot; alt=&quot;å›¾ 1&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä¸Šå›¾å¾ˆå½¢è±¡çš„å±•ç¤ºäº†è¿™ä¸ªè¿‡ç¨‹ï¼Œç³»ç»Ÿç›¸æœºé‡‡é›†å¸§çš„çº¿ç¨‹é˜Ÿåˆ—ä¼˜å…ˆçº§å¾€å¾€æ¯”è¾ƒé«˜ï¼Œå½“é‡åˆ°æˆ‘ä»¬çš„å¸§å¤„ç†çº¿ç¨‹æ—¶ã€‚ç›¸å½“äºé«˜é€Ÿå…¬è·¯ä¸Šçš„æ±½è½¦çªç„¶æ¥åˆ°äº†çœé“ä¸Šï¼Œå¦‚æœç³»ç»Ÿæ€§èƒ½æ¯”è¾ƒå¥½æ—¶ï¼Œé«˜é€Ÿå…¬è·¯ä¸ç¹å¿™é‚£ä¹ˆè‡ªç„¶ä¸ä¼šæ‹¥å µï¼Œå½“ç³»ç»Ÿæ€§èƒ½ä¸‹é™æ—¶å¾ˆå®¹æ˜“é‡åˆ°ä¸Šå›¾ç¤ºä¾‹å±•ç¤ºçš„æ‹¥å µï¼Œè¿™æ—¶å€™ç”¨æˆ·çœ‹åˆ°çš„è§†é¢‘å¸§è‡ªç„¶å°±ä¼šå»¶æ—¶çš„å¾ˆå‰å®³ã€‚&lt;/p&gt;

&lt;h2 id=&quot;çº¿ç¨‹çš„ä¼˜åŒ–&quot;&gt;çº¿ç¨‹çš„ä¼˜åŒ–&lt;/h2&gt;

&lt;p&gt;æ—¢ç„¶é‡åˆ°äº†æ‹¥å µé—®é¢˜ï¼Œé‚£æˆ‘ä»¬æ€ä¹ˆä¼˜åŒ–å‘¢ï¼Ÿç¬¬ä¸€ä¸ªæƒ³åˆ°çš„æ˜¯ï¼Œä¸è¦å¡ä¸»ç³»ç»Ÿç›¸æœºé‡‡é›†çº¿ç¨‹çš„å›è°ƒï¼Œé€šè¿‡è®¾ç½®å¦ä¸€ä¸ªçº¿ç¨‹é˜Ÿåˆ—æ¥å¤„ç†æˆ‘ä»¬çš„è§†é¢‘å¸§ï¼Œè‡ªç„¶ä¼šå†™å‡ºä¸‹é¢çš„ä»£ç ã€‚&lt;/p&gt;
&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;n&quot;&gt;_frameQueue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_queue_create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;org.dingtalk.cameravideocapturer.video&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DISPATCH_QUEUE_SERIAL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// æå‡è§†é¢‘å¸§å¤„ç†çº¿ç¨‹é˜Ÿåˆ—çš„ä¼˜å…ˆçº§ï¼Œ&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;dispatch_set_target_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_frameQueue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_get_global_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DISPATCH_QUEUE_PRIORITY_HIGH&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;captureOutput&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVCaptureOutput&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;captureOutput&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;didOutputSampleBuffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CMSampleBufferRef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sampleBuffer&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;fromConnection&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVCaptureConnection&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;connection&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;CVPixelBufferRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pixelBuffer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CMSampleBufferGetImageBuffer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sampleBuffer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;CVBufferRetain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pixelBuffer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;dispatch_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;frameQueue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;n&quot;&gt;CVPixelBufferRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resultPixelBuffe&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pixelBuffer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
     &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;renderPixbuffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;resultPixelBuffe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
     &lt;span class=&quot;n&quot;&gt;CVBufferRelease&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pixelBuffer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
   &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;è¿™ç§æƒ³æ³•æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯ç°å®å¾ˆæ®‹é…·ï¼Œè™½ç„¶ä½ åˆ‡æ¢äº†å¤„ç†çº¿ç¨‹ï¼Œå¹¶ä¸”ä¹Ÿæå‡äº†çº¿ç¨‹çš„ä¼˜å…ˆçº§ï¼Œç›¸å½“äºååé‡å¢åŠ äº†ã€‚ä½†æ˜¯é‡åˆ°æ€§èƒ½ä¸‹é™æ—¶ï¼Œå°¤å…¶åƒç¾é¢œã€è™šæ‹ŸèƒŒæ™¯å¤„ç†è§†é¢‘å¸§èŠ±è´¹çš„æ—¶é—´ä¼šæ¯”è¾ƒé•¿ã€‚ä¼šé€ æˆçš„é—®é¢˜æ˜¯ï¼Œæœ‰å¤§é‡çš„è§†é¢‘å¸§å›¤ç§¯åˆ°å†…å­˜ä¸­ï¼Œç„¶åç­‰å¾…ä½ çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;frameQueue&lt;/code&gt; é˜Ÿåˆ—å»å¤„ç†ã€‚å¦‚æœè§‚å¯Ÿå†…å­˜çš„å˜åŒ–æƒ…å†µå°±å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/aec899a03a3f37fb837decdca95cfb498e79daf1114cd7e2c1a4909216f6447b.png&quot; alt=&quot;å›¾ 2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å¹¶ä¸”åœ¨æ‰‹æœºå‘çƒ«ï¼ŒCPU æ€§èƒ½ä¸‹é™æ—¶ï¼Œæ¯å¸§è§†é¢‘å¤„ç†æ—¶é•¿ä¼šè¶Šæ¥è¶Šé•¿ï¼Œå¯¼è‡´å†…å­˜ä¸æ–­å¢åŠ å½¢æˆæ¶æ€§å¾ªç¯ï¼Œæœ€ç»ˆçš„ç»“æœå°±æ˜¯ OOM ç¨‹åºå´©æºƒã€‚
ä¸ºä½•å†…å­˜ä¼šå›¤ç§¯åˆ°å†…å­˜ä¸­ï¼Œç­‰å¾… &lt;code class=&quot;highlighter-rouge&quot;&gt;frameQueue&lt;/code&gt; çº¿ç¨‹é˜Ÿåˆ—æ‰§è¡Œå‘¢ï¼Ÿè¿™å°±æ¶‰åŠåˆ°æˆ‘ä»¬ä½¿ç”¨çš„ä¸€ä¸ªæ“ä½œ &lt;code class=&quot;highlighter-rouge&quot;&gt;dispatch_async&lt;/code&gt;ã€‚ä¸‹é¢å±•ç¤ºä¸‹ &lt;code class=&quot;highlighter-rouge&quot;&gt;dispatch_async&lt;/code&gt; çš„æºç å®ç°ã€‚&lt;/p&gt;
&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; 
&lt;span class=&quot;nf&quot;&gt;dispatch_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dispatch_queue_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_block_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_continuation_s&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;contin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dispatch_continuation_init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;contin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;_dispatch_async_f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;contin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DISPATCH_INVOKE_ASYNC_BIT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;DISPATCH_NOINLINE&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;
&lt;span class=&quot;nf&quot;&gt;_dispatch_async_f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dispatch_queue_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_continuation_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ctxt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_function_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dc_func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;kt&quot;&gt;uint64_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dc_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;uint64_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dc_flags&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dq&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dq_items_tail&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;do_next&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dq&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dq_items_tail&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;slowpath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dq&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dq_width&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// å¦‚æœæ˜¯ä¸²è¡Œé˜Ÿåˆ—,ç›´æ¥æ‰§è¡Œä»»åŠ¡æˆ–å”¤é†’runloop&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;_dispatch_queue_push_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// å¦‚æœæ˜¯å¹¶å‘é˜Ÿåˆ—,ç›´æ¥å°†ä»»åŠ¡æ·»åŠ åˆ°é˜Ÿåˆ—å°¾éƒ¨&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;æˆ‘ä»¬æ€»ç»“ä¸‹ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;dispatch_async&lt;/code&gt; ä¸»è¦åšäº†ä¸‹é¢ä¸¤ä¸ªäº‹æƒ…ã€‚&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;å¦‚æœ dq æ˜¯ä¸²è¡Œé˜Ÿåˆ—,å®ƒä¼šç›´æ¥æ‰§è¡Œ dc ä¸­çš„ä»»åŠ¡æˆ–å”¤é†’ runloop æ¥æ‰§è¡Œä»»åŠ¡ã€‚&lt;/li&gt;
  &lt;li&gt;å¦‚æœ dq æ˜¯å¹¶å‘é˜Ÿåˆ—,å®ƒåªä¼šç®€å•åœ°å°† dc æ·»åŠ åˆ°é˜Ÿå°¾,ç­‰å¾…åç»­è¢«çº¿ç¨‹æŸ¥æ‰¾å¹¶æ‰§è¡Œã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å¯ä»¥çœ‹å‡º &lt;code class=&quot;highlighter-rouge&quot;&gt;dispatch_async&lt;/code&gt; çš„ä¸»è¦å·¥ä½œæ˜¯å°†ä»»åŠ¡åŠ å…¥é˜Ÿåˆ—,å¹¶æ ¹æ®é˜Ÿåˆ—ç±»å‹æ¥å†³å®šæ˜¯å¦ç›´æ¥æ‰§è¡Œä»»åŠ¡ã€‚æ‰€ä»¥å½“æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—æ—¶ã€‚æœ¬è´¨ä¸Šå°±æ˜¯ä¸åœçš„å¾€é˜Ÿåˆ—ä¸­æ”¾ç½®æ•°æ®ï¼Œå¦‚æœæ”¾ç½®çš„é˜Ÿåˆ—ä¸­æœ‰å¤§æ•°æ®ï¼Œè€Œæˆ‘ä»¬åˆæ²¡åšç›¸åº”çš„ä¸¢å¼ƒæ“ä½œï¼Œå°±å¾ˆå®¹æ˜“å¼•èµ·å†…å­˜å †ç§¯é—®é¢˜ã€‚&lt;/p&gt;

&lt;h2 id=&quot;ä¸¢å¸§ä¼˜åŒ–&quot;&gt;ä¸¢å¸§ä¼˜åŒ–&lt;/h2&gt;

&lt;p&gt;ä¸ºäº†é˜²æ­¢ä¸Šè¿°çš„ OOM çš„æƒ…å†µï¼Œæœ€å®¹æ˜“æƒ³åˆ°çš„å°±æ˜¯å¯¹å †ç§¯çš„é˜Ÿåˆ—åšä¸¢å¸§çš„å¤„ç†ã€‚å¯ä»¥é€šè¿‡è®¾ç½®ä¸¢å¸§çš„é—´éš”ï¼Œæ¯”å¦‚è®¾ç½®0.1ç§’é—´éš”ï¼Œå¦‚æœå¤„ç†ä¸å®Œå°±ä¸¢å¼ƒæ‰åé¢æ¥çš„è§†é¢‘å¸§ï¼Œå¯ä»¥å†™å¦‚ä¸‹çš„ä»£ç ã€‚&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;_processSemaphore&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_semaphore_create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;captureOutput&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVCaptureOutput&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;captureOutput&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;didOutputSampleBuffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CMSampleBufferRef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sampleBuffer&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;fromConnection&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVCaptureConnection&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;connection&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;CVPixelBufferRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pixelBuffer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CMSampleBufferGetImageBuffer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sampleBuffer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;CVBufferRetain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pixelBuffer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;patch_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;frameQueue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
       &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dispatch_semaphore_wait&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;processSemaphore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;dispatch_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DISPATCH_TIME_NOW&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int64_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSEC_PER_SEC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;CVBufferRelease&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pixelBuffer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
     &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
     &lt;span class=&quot;n&quot;&gt;CVPixelBufferRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resultPixelBuffe&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pixelBuffer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
     &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;renderPixbuffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;resultPixelBuffe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
     &lt;span class=&quot;n&quot;&gt;CVBufferRelease&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pixelBuffer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dispatch_semaphore_signal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;processSemaphore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
   &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;ä¸Šè¿°çš„ä»£ç ï¼Œå¯ä»¥ç”¨ä¸‹å›¾å½¢è±¡çš„å±•ç¤º:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/91f6edf8fe09d458fc666da1f47f648a0b62037ea043071c865ed4fbb901e5e2.png&quot; alt=&quot;å›¾ 9&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™é‡Œç›¸å½“äºç»™é«˜é€Ÿå…¬è·¯è®¾ç½®äº†ä¸€ä¸ªåˆ†æµç«™ï¼Œä¸åˆæ ¼çš„è½¦è¾†ç›´æ¥å½“åœºæ‰”æ‰(è¿™æ ·æœ‰ç‚¹æ®‹æš´ï¼Œå½“ç„¶è¿™é‡Œåªæ˜¯å‡è®¾)ã€‚ä¼¼ä¹ç”¨è¿™ç§æ–¹å¼å¯ä»¥è§£å†³å†…å­˜å †ç§¯é—®é¢˜ã€‚æˆ‘ä»¬çš„ç¨‹åºç”¨è¿™ç§æ–¹å¼ç»§ç»­è¿è¡Œï¼Œä¼šå¸¦æ¥å¦ä¸€ä¸ªé—®é¢˜ã€‚è™½ç„¶å†…å­˜ä¸ä¼šæŒç»­å¢åŠ äº†ï¼Œä½†æ˜¯å†…å­˜ä¼šå‡ºç°è¿‡å±±è½¦çš„æƒ…å†µå¿½ä¸Šå¿½ä¸‹ã€‚å¦‚æœç”¨ instument è§‚å¯Ÿå°±å¦‚ä¸‹é¢çš„ç°è±¡ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/7faaf3cc155c130962baf6fabf4dddaff71f92fcfb49012967fa4db6af1cb4ff.png&quot; alt=&quot;å›¾ 10&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™ç§æƒ…å†µè™½ç„¶ä¸è‡³äºè®©ç¨‹åºå¾ˆå¿«å´©æºƒï¼Œä½†æ˜¯ä¹Ÿæ˜¯åœ¨å±é™©çš„è¾¹ç¼˜ä¸åœçš„è¯•æ¢ï¼Œä¸€æ—¦ä¸€æ¬¡è§¦å‘åˆ°åº•çº¿è¿˜æ˜¯ä¼šå´©æºƒçš„ã€‚é‚£æˆ‘ä»¬å¦‚ä½•è§£å†³å‘¢ã€‚&lt;/p&gt;

&lt;h2 id=&quot;ç¼“å­˜é˜Ÿåˆ—&quot;&gt;ç¼“å­˜é˜Ÿåˆ—&lt;/h2&gt;

&lt;p&gt;ä»ä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹åˆ°ï¼Œä¹‹æ‰€ä»¥å½¢æˆäº†è¿‡å±±è½¦å†…å­˜çš„é—®é¢˜ï¼Œå¹¶ä¸æ˜¯é‡‡é›†é—®é¢˜å¼•èµ·çš„ã€‚å› ä¸ºé‡‡é›†çº¿ç¨‹å·²ç»åšäº†ä¸¢å¸§çš„æ“ä½œã€‚æˆ‘ä»¬æŠŠé—®é¢˜ç”¨ä¸‹å›¾æè¿°ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/3e4d1941c22bc72457c2f5ba4dc26d22b841ea55201020744a272a68e5b6ecb4.png&quot; alt=&quot;å›¾ 4&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å¯ä»¥çœ‹å‡ºä¸»è¦åŸå› æ˜¯å¤„ç†çº¿ç¨‹å®Œæˆåï¼Œåœ¨æ¸²æŸ“æ—¶ç”±äºé‡‡é›†å’Œæ¸²æŸ“åœ¨åŒä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;framequeue&lt;/code&gt; çº¿ç¨‹ä¸­ï¼Œä¼šé€ æˆæˆ‘ä»¬æœ€å¼€å§‹æè¿°çš„è§†é¢‘å¸§æ‹¥å µé—®é¢˜ã€‚é‚£æˆ‘ä»¬å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå’Œä¸Šé¢æè¿°çš„ä¼˜åŒ–é€»è¾‘ä¸€æ ·ï¼Œé¦–å…ˆè¦æŠŠé‡‡é›†çš„çº¿ç¨‹å’Œæ¸²æŸ“çº¿ç¨‹åˆ†ç¦»å¼€ï¼Œç„¶åå†åšä¸¢å¸§çš„æ“ä½œã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¢åŠ ä¸€ä¸ªç¼“å­˜é˜Ÿåˆ—æ¥åšï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;CVBufferRetain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pixelBuffer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;CVPixelBufferRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;willDropPixelBuffer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pixelBuffersLock&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pixelBuffers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kRTCMaxDropPixBufferFrame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;willDropPixelBuffer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CVPixelBufferRef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pixelBuffers&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objectAtIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pixelBuffers&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;removeObjectAtIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pixelBuffers&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pixelBuffer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pixelBuffersLock&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;unlock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;willDropPixelBuffer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;CVBufferRelease&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;willDropPixelBuffer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;é‚£ä¸ºä½•é‡‡é›†çš„æ—¶å€™é€šè¿‡è®¾ç½® 0.1 ç§’çš„æ—¶é—´é—´éš”æ¥ä¸¢å¸§ï¼Œè€Œæ¸²æŸ“è¦é€šè¿‡ç¼“å­˜é˜Ÿåˆ—æ¥ä¸¢å¸§å‘¢ï¼Ÿå…¶å®æœ¬è´¨ä¸Šä¸€æ ·çš„ï¼Œåªæ˜¯ä¸¢å¼ƒå¸§çš„é€»è¾‘ä¸å¤ªä¸€æ ·è€Œå·²ï¼Œå› ä¸ºç›¸æœºé‡‡é›†çš„å¸§å›è°ƒçš„æ•°æ®æ¯”è¾ƒå¤šï¼Œé€šè¿‡æ—¶é—´é—´éš”ä¸¢å¸§å¯ä»¥æ›´å¥½çš„æ§åˆ¶å¸§ç‡ï¼Œé˜²æ­¢ç”»é¢æŠ–åŠ¨å¤ªå‰å®³ã€‚è€Œæ¸²æŸ“æ—¶å°±æ²¡å¿…è¦è¿™ä¹ˆç²¾å‡†çš„æ§åˆ¶ï¼Œé€šè¿‡ä¸¢å¼ƒè¿‡è€çš„å¸§æ¥é˜²æ­¢å†…å­˜æŠ–åŠ¨é—®é¢˜å°±å¯ä»¥äº†ã€‚ç„¶åæˆ‘ä»¬ä¼˜åŒ–åè§†é¢‘å¸§çš„æ•´ä¸ªå¤„ç†è¿‡ç¨‹å°±å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/44a65e2f89e402ecce91a8cd8cd2c96063ee8500c963913751863b813e08e7a8.png&quot; alt=&quot;å›¾ 5&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬æ€»ç»“ä¸‹ï¼Œè§£å†³è§†é¢‘å¸§å¤„ç†é‡åˆ°çš„é—®é¢˜ï¼Œä¸»è¦é€šè¿‡ä¸‹é¢ä¸¤ä¸ªæ‰‹æ®µæ¥é˜²æ­¢ï¼š&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;åˆ†ç¦»ç›¸æœºå¸§é‡‡é›†çš„çº¿ç¨‹é˜Ÿåˆ—å’Œæ¸²æŸ“çš„é˜Ÿåˆ— (frameQueueã€renderQueue)ï¼Œé˜²æ­¢é‡‡é›†çº¿ç¨‹å¤„ç†æ…¢æ—¶é€ æˆæ¸²æŸ“çº¿ç¨‹è¢«å¡ä½ã€‚&lt;/li&gt;
  &lt;li&gt;åœ¨ä¸¤ä¸ªçº¿ç¨‹é˜Ÿåˆ—åˆ‡æ¢æ—¶ï¼Œå¢åŠ æ•°æ®ä¸¢å¸§é€»è¾‘é˜²æ­¢å†…å­˜ OOMã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æœ€ç»ˆæ”¹é€ åçš„æµç¨‹å›¾å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/eae0c47b0d89e435451f0c552d09e58af5c4d60ef00aa1dd8d43f45067ed6ad6.png&quot; alt=&quot;å›¾ 6&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æ”¹é€ ä¹‹å‰å’Œæ”¹é€ ä¹‹åï¼Œç”¨ Instument è§‚å¯Ÿå†…å­˜çš„æŠ–åŠ¨æƒ…å†µï¼Œå¯ä»¥æ˜æ˜¾çš„çœ‹åˆ°åŒºåˆ«ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/76808d7ec2dff7a1bddc268542f2511c8406b7dae9e02766c0591553bf3ed3d2.png&quot; alt=&quot;å›¾ 7&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h2&gt;

&lt;p&gt;ä¸Šè¿°è™½ç„¶æè¿°çš„æ˜¯è§†é¢‘å¸§çš„å¤„ç†ä¼˜åŒ–è¿‡ç¨‹ã€‚å…¶å®æ‰€æœ‰å¤§çš„å†…å­˜æ•°æ®ç®¡é“åŒ–å¤„ç†æ—¶ï¼Œéƒ½åº”è¯¥éµå¾ªä¸‹é¢çš„åŸºæœ¬åŸåˆ™ï¼š&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;å„ä¸ªåŠŸèƒ½æ¨¡å—åˆ†åˆ«ç”¨ä¸åŒçš„çº¿ç¨‹æ¥å¤„ç†ï¼Œè¿™æ ·å½¼æ­¤äº’ç›¸ç‹¬ç«‹ä¸ä¼šç›¸äº’å½±å“æ•°æ®çš„å¤„ç†è¿‡ç¨‹ï¼Œé¿å…æ‹¥å¡å¡é¡¿é—®é¢˜ã€‚&lt;/li&gt;
  &lt;li&gt;åœ¨åŠŸèƒ½çº¿ç¨‹åˆ‡æ¢æ—¶ä¼ é€’çš„å†…å­˜å¤§æ•°æ®ï¼Œé€šè¿‡è®¾ç½®ç¼“å­˜ Buffer é¿å…å¼•èµ·å†…å­˜é—®é¢˜ï¼Œé˜²æ­¢å†…å­˜è¿‡å¤šé€ æˆ OOMã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ä¸‹é¢æˆ‘ä»¬çœ‹ä¸‹ä¸šç•Œæ¯”è¾ƒä¼˜ç§€çš„ WebRTC éŸ³è§†é¢‘æ•°æ®çš„å¤„ç†è¿‡ç¨‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/3ef26960fa812d2a4444c1c773e4b65a31cffaefd84bbed0ff2f39ba830b566e.png&quot; alt=&quot;å›¾ 8&quot; /&gt;&lt;/p&gt;

&lt;p&gt;WebRTC çš„è§†é¢‘é‡‡é›†ã€æ··åˆã€ç¼–ç ã€å‘é€çš„è¿‡ç¨‹ï¼Œéƒ½æ˜¯åˆ†åˆ«ä½¿ç”¨ä¸åŒçº¿ç¨‹ï¼Œå¹¶ä¸”éƒ½æœ‰ç›¸åº”çš„ Buffer åšç¼“å­˜æ“ä½œï¼Œéå¸¸ç¬¦åˆä¸Šé¢æˆ‘ä»¬è§†é¢‘å¸§ä¼˜åŒ–çš„æ•´ä¸ªè¿‡ç¨‹ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨åšè¿™ç§å¤§å†…å­˜æ•°æ®å¤„ç†æ—¶å°¤å…¶è¦é“­è®°ä¸Šé¢æåˆ°çš„ä¸¤ä¸ªåŸåˆ™ã€‚&lt;/p&gt;</content><author><name>mengtnt</name></author><summary type="html">å½“æˆ‘ä»¬åšç¾é¢œã€è™šæ‹ŸèƒŒæ™¯ã€è™šæ‹Ÿäººå¶ç­‰åŠŸèƒ½æ—¶ï¼Œä¸€èˆ¬éƒ½æ˜¯éœ€è¦å¯¹ iOS ç›¸æœºå¸§è¿›è¡Œå‰ç½®å¤„ç†ã€‚å¦‚æœåšè¿‡ iOS å¼€å‘çš„è¯ï¼Œå¾ˆå¿«å¯ä»¥å†™å‡ºæ¥ä¸‹é¢çš„å¤„ç†è¿‡ç¨‹ä»£ç ã€‚</summary></entry><entry><title type="html">é‡æ„</title><link href="https://mengtnt.com/2023/03/20/refactor.html" rel="alternate" type="text/html" title="é‡æ„" /><published>2023-03-20T06:18:02+00:00</published><updated>2023-03-20T06:18:02+00:00</updated><id>https://mengtnt.com/2023/03/20/refactor</id><content type="html" xml:base="https://mengtnt.com/2023/03/20/refactor.html">&lt;p&gt;é‡æ„æ˜¯ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„é—®é¢˜ï¼Œå¹¶ä¸”ä¹Ÿæœ‰å¤§é‡çš„ä¹¦ç±ä»‹ç»é‡æ„çš„æ–¹æ³•ã€‚é‚£å¦‚ä½•é‡æ„ä»£ç ï¼Ÿå¦‚ä½•ä¿è¯é‡æ„çš„ä»£ç ä¸å‡ºé—®é¢˜ï¼Ÿé‡æ„åçš„ä»£ç å¦‚ä½•é˜²æ­¢è…åŒ–ï¼Ÿæˆ‘å…ˆè´´å‡ºæ¥ ChatGPT å¦‚ä½•å›ç­”çš„ï¼Œæ¥æ„Ÿå—ä¸‹å¥¹çš„å¼ºå¤§ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;å¦‚ä½•é‡æ„ä»£ç &lt;/p&gt;
  &lt;ol&gt;
    &lt;li&gt;æå–æ–¹æ³•ï¼šå¦‚æœä½ æœ‰ä¸€æ®µè¿‡é•¿æˆ–è¿‡äºå¤æ‚çš„ä»£ç ï¼Œå¯ä»¥å°†å…¶æå–ä¸ºç‹¬ç«‹çš„æ–¹æ³•ï¼Œä½¿å…¶æ›´æ˜“è¯»ä¸”å¯é‡å¤ä½¿ç”¨ã€‚&lt;/li&gt;
    &lt;li&gt;é‡å‘½åå˜é‡å’Œæ–¹æ³•ï¼šä½¿ç”¨æè¿°æ€§çš„åç§°å‘½åå˜é‡å’Œæ–¹æ³•ï¼Œä½¿ä»£ç æ›´å®¹æ˜“ç†è§£ã€‚&lt;/li&gt;
    &lt;li&gt;ç§»é™¤é‡å¤ä»£ç ï¼šæŸ¥æ‰¾é‡å¤çš„ä»£ç å—ï¼Œå¹¶å°†å…¶æå–ä¸ºå¯é‡å¤ä½¿ç”¨çš„æ–¹æ³•ã€‚&lt;/li&gt;
    &lt;li&gt;ç®€åŒ–æ¡ä»¶è¯­å¥ï¼šå¦‚æœæ¡ä»¶è¯­å¥è¿‡äºå¤æ‚ï¼Œå°†å…¶åˆ†è§£ä¸ºæ›´å°ã€æ›´æ˜“å¤„ç†çš„éƒ¨åˆ†ã€‚&lt;/li&gt;
    &lt;li&gt;ä½¿ç”¨æ›´å¥½çš„æ•°æ®ç»“æ„ï¼šå¦‚æœä½¿ç”¨çš„æ•°æ®ç»“æ„æ•ˆç‡ä½ä¸‹æˆ–ä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œè€ƒè™‘ä½¿ç”¨æ›´å¥½çš„æ•°æ®ç»“æ„ã€‚&lt;/li&gt;
    &lt;li&gt;å°†ä»£ç åˆ†è§£æˆæ¨¡å—ï¼šå°†ä»£ç åˆ†è§£æˆå…·æœ‰ç‰¹å®šèŒè´£çš„è¾ƒå°æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—éƒ½æœ‰è‡ªå·±çš„ä¸€ç»„æµ‹è¯•ã€‚&lt;/li&gt;
    &lt;li&gt;ç§»é™¤æ— ç”¨ä»£ç ï¼šæŸ¥æ‰¾ä¸å†ä½¿ç”¨çš„ä»£ç ï¼Œå¹¶å°†å…¶åˆ é™¤ä»¥ç®€åŒ–ä»£ç åº“å¹¶ä½¿å…¶æ›´æ˜“ç»´æŠ¤ã€‚
è¿™äº›åªæ˜¯é‡æ„ä»£ç çš„å‡ ä¸ªç¤ºä¾‹ã€‚å…³é”®åœ¨äºä¸æ–­å¯»æ‰¾æ”¹è¿›ä»£ç çš„æ–¹æ³•ï¼Œä½¿å…¶éšç€æ—¶é—´æ¨ç§»æ›´æ˜“ç»´æŠ¤ã€‚&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;p&gt;ChatGPT ä¸Šçš„å›ç­”å’Œå¾ˆå¤šä¹¦ç±å’Œæ•™ç¨‹ä¸­è®²çš„å¤§åŒå°å¼‚ï¼Œå…¶å®æœ‰æ—¶å€™æè¿°æ–‡å­—ä¼šå¾ˆæŠ½è±¡ã€‚è¿™é‡Œæˆ‘æ‹¿è‡ªå·±ç»å†çš„ä¸€ä¸ªä¾‹å­è¯´æ˜ã€‚å½“ç„¶ä¸æ˜¯ ChatGPT ç»™çš„ä¾‹å­ğŸ˜‚ã€‚&lt;/p&gt;

&lt;h2 id=&quot;ç®€å•åŠŸèƒ½çš„å¼€å‘&quot;&gt;ç®€å•åŠŸèƒ½çš„å¼€å‘&lt;/h2&gt;

&lt;p&gt;è¿™æ˜¯å¾ˆå¸¸è§çš„æˆå‘˜åˆ—è¡¨é¡µé¢å±•ç¤ºåŠŸèƒ½ã€‚æˆ‘ä»¬å…ˆçœ‹ç¬¬ä¸€ä¸ªç‰ˆæœ¬çš„å†™æ³•ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-mermaid&quot;&gt;
classDiagram
class MemberListViewController {
  -MemberListView view
  -loadView()
}

class MemberListView{ 
  -renderView(List&amp;lt;MemberData&amp;gt; data)
}

class MemberData {
  -String name
  -Int status
}

MemberListViewController *-- MemberListView: 1..1

MemberListView ..&amp;gt; MemberData: 1..*

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸‹é¢ç”¨ä¼ªä»£ç çš„æ–¹å¼å±•ç¤ºä¸‹ï¼Œè°ƒç”¨çš„æµç¨‹ã€‚&lt;/p&gt;

&lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;MemberListViewController&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loadView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;RequestData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;in&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MemberData&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dataList&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MemberData&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dataList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;MemberListViewController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MemberListViewController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;vc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loadView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å…¶å®è¿™ç§ UI å¼€å‘çš„é€»è¾‘å†ç®€å•ä¸è¿‡äº†ï¼Œè·å–æ•°æ®ç„¶åæŠŠæ•°æ®æ¸²æŸ“åˆ°ç›¸åº”çš„ UI ç»„ä»¶ä¸Šã€‚æˆ‘ä»¬ä¸‹é¢æ¥çœ‹ä¸‹åŠŸèƒ½çš„å‘å±•è¿‡ç¨‹ã€‚&lt;/p&gt;

&lt;h2 id=&quot;è‡ƒè‚¿ç±»çš„å½¢æˆ&quot;&gt;è‡ƒè‚¿ç±»çš„å½¢æˆ&lt;/h2&gt;

&lt;p&gt;éšç€æ­¤åŠŸèƒ½è®¾è®¡äº†ä¸åŒçš„åº”ç”¨åœºæ™¯ï¼Œä¾‹å¦‚ä»åœºæ™¯Aè¿›å»åº”è¯¥è·å–æœåŠ¡Açš„æ•°æ®ç„¶åå±•ç°ï¼Œä»åœºæ™¯Bè¿›å»è·å–æœåŠ¡Bçš„æ•°æ®â€¦
å…ˆæ¥çœ‹å¦‚æœæŒ‰ç…§åŸæ¥çš„é€»è¾‘ï¼Œéœ€è¦å†™ç±»ä¼¼ä¸‹é¢çš„å¤§é‡ä»£ç ã€‚&lt;/p&gt;

&lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;k&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;condition&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;RequestAData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;in&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MemberData&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dataList&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MemberData&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dataList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;RequestBData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;in&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MemberData&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dataList&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MemberData&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dataList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™æ—¶å€™ä½ å°±ä¼šå‘ç° &lt;code class=&quot;highlighter-rouge&quot;&gt;Switch Case&lt;/code&gt; ä¸­è¶Šæ¥è¶Šå¤šçš„æ•°æ®è¯·æ±‚å’Œæ¸²æŸ“ä»£ç ã€‚éšç€åº”ç”¨çš„åœºæ™¯è¶Šæ¥è¶Šå¤šï¼Œä¼šå‘ç° &lt;code class=&quot;highlighter-rouge&quot;&gt;MemberListViewController&lt;/code&gt; ç±»å˜çš„è¶Šæ¥è¶Šå¤§ã€‚è¿™æ—¶å€™å¦‚ä½•é‡æ„?&lt;/p&gt;

&lt;p&gt;è¿™é‡Œå°±è¦ç”¨åˆ°é‡æ„çš„ä¸€ä¸ªé‡è¦åŸåˆ™ï¼šèŒè´£å•ä¸€ã€‚ä¼˜åŒ–ä»£ç å°±æ˜¯æŠŠ &lt;code class=&quot;highlighter-rouge&quot;&gt;MemberListViewController&lt;/code&gt; å¤§çš„ç±»æ‹†åˆ†ï¼Œæ­¤ç±»è´Ÿè´£æ¸²æŸ“è§†å›¾ï¼Œä¸è¦å†è´Ÿè´£æ•°æ®è¯·æ±‚äº†ï¼Œç½‘ç»œè¯·æ±‚ç›¸ä¼¼çš„åŠŸèƒ½å†…èšåˆ°å¦å¤–ä¸€ä¸ªç±»ä¸­&lt;code class=&quot;highlighter-rouge&quot;&gt;MemberListDataInteractor&lt;/code&gt; ï¼Œä¸“é—¨å¤„ç†æ•°æ®è·å–ï¼Œè¿™æ ·å¯ä»¥å‡å°‘å•ä¸ªç±»çš„å¤§å°ï¼Œæ–¹ä¾¿é˜…è¯»ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-mermaid&quot;&gt;classDiagram

class MemberData {
  -String name
  -Int status
}

class MemberListDataInteractor { 
  - List&amp;lt;MemberData&amp;gt; dataList 
  - requestData(callback(List&amp;lt;MemberData&amp;gt; list))
}

class MemberListViewController {
  -MemberListView View
  -MemberListDataInteractor interactor
  -loadView()
}

class MemberListView{ 
  -View listView 
  -renderView(List&amp;lt;MemberData&amp;gt; data)
}

MemberListViewController *-- MemberListView: 1..1

MemberListViewController *-- MemberListDataInteractor: 1..1

MemberListDataInteractor *-- MemberData: 1..*

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™ä¸ªæ—¶å€™çš„è°ƒç”¨è¿‡ç¨‹å¯èƒ½æ˜¯è¿™æ ·çš„ã€‚å¦‚ä¸‹çš„ä¼ªä»£ç ï¼š&lt;/p&gt;

&lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;MemberListViewController&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loadView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;interactor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;requestData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MemberData&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;in&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;MemberListView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;renderView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;MemberListViewController&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loadView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;interactor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;requestData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MemberData&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;in&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;MemberListView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;renderView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;MemberListViewController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MemberListViewController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;vc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loadView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™ä¸ªå…¶å®å°±æ˜¯å…¸å‹çš„ MVC çš„ç»“æ„ï¼Œè§†å›¾æ¸²æŸ“ã€æ•°æ®æ¨¡å‹ã€æ¨¡å‹ç»„è£…åˆ†å¼€ï¼Œæ ¸å¿ƒå°±æ˜¯å†…èšä¸åŒçš„åŠŸèƒ½ã€‚æœ‰æ—¶å€™æƒ³ä¸€æƒ³é˜…è¯»ä»£ç å°±è·Ÿæˆ‘ä»¬çœ‹æ–‡ç« ä¸€æ ·ï¼Œå¦‚æœä¸åˆ†æ®µè½ï¼Œç›´æ¥ä¸€ä¸ª1000å­—çš„æ®µè½ï¼Œç›¸ä¿¡å¾ˆå¤šäººéƒ½ä¸æ„¿æ„çœ‹ã€‚èŒè´£å•ä¸€åŸåˆ™çš„ç›®æ ‡å°±æ˜¯è®©äººæ›´æ„¿æ„é˜…è¯»ä½ çš„ä»£ç ï¼Œç¬¬ä¸€çœ¼ä¸è‡³äºè¢«å“åˆ°ã€‚&lt;/p&gt;

&lt;h2 id=&quot;é‡å¤ä»£ç çš„ä¼˜åŒ–&quot;&gt;é‡å¤ä»£ç çš„ä¼˜åŒ–&lt;/h2&gt;

&lt;p&gt;éšç€åŠŸèƒ½çš„æ¼”åŒ–ï¼Œç”¨æˆ·çš„ç•Œé¢è¶Šæ¥è¶Šå¤æ‚ï¼Œéœ€è¦å¤§é‡çš„æ•°æ®é¢‘ç¹çš„æ¸²æŸ“åˆ°è§†å›¾ä¸Šã€‚å°±ä¼šå‘ç°æœ‰å¤§é‡è§†å›¾æ¸²æŸ“ç»„è£…çš„ä»£ç ã€‚è¿™ç±»ä»£ç çš„ç‰¹ç‚¹æ˜¯ç›¸ä¼¼åº¦å¾ˆé«˜ï¼Œåªæ˜¯æ¸²æŸ“åˆ°ä¸åŒçš„è§†å›¾ä¸Šè€Œå·²ã€‚è¿™æ—¶å€™é‡æ„çš„å¦ä¸€ä¸ªé‡è¦åŸåˆ™DRYï¼Œä¸è¦å†™é‡å¤çš„ä»£ç ï¼Œå°±å‘æŒ¥ä½œç”¨äº†ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠé‡å¤çš„ä»£ç å†æŠ½è±¡å‡ºä¸€å±‚ï¼Œå°±å¯ä»¥å‡å°‘å¤§é‡ç›¸ä¼¼çš„ä»£ç ã€‚
è¿™ä¸ªç±»å¯ä»¥å«åš &lt;code class=&quot;highlighter-rouge&quot;&gt;MemberListDataPresentor&lt;/code&gt;,ä¸“é—¨ç”¨æ¥ç»„è£…è§†å›¾ã€‚åªè¦ç®€å•çš„å¢åŠ  &lt;code class=&quot;highlighter-rouge&quot;&gt;MemberViewModel&lt;/code&gt; è¿™ç§æ•°æ®ç»“æ„æ˜ å°„åˆ° &lt;code class=&quot;highlighter-rouge&quot;&gt;MemberListView&lt;/code&gt; è¿™ç§è§†å›¾ä¸Šï¼Œç„¶å &lt;code class=&quot;highlighter-rouge&quot;&gt;MemberListDataPresentor&lt;/code&gt; å°±è´Ÿè´£æ•°æ®ç»„è£…ã€‚æˆ‘ä»¬æ¥çœ‹ä¸‹è¿™ç§ç»“æ„ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-mermaid&quot;&gt;classDiagram

class MemberData {
  -String name
  -Int status
}

class MemberViewModel {
  -List&amp;lt;MemberData&amp;gt; dataList
}

class MemberListDataPresentor { 
  -MemberListDataInteractor interactor 
  - bind(MemberViewModel model,MemberListView view)
}

class MemberListViewController {
  -MemberListView View
  -MemberListDataPresentor presentor
  - loadView()
}

class MemberListView{ 
  -View listView 
  -renderView(MemberViewModel data)
}

MemberListDataPresentor *-- MemberViewModel : 1..1

MemberViewModel *-- MemberData: 1..*

MemberListView *-- MemberViewModel: 1..1

MemberListViewController *-- MemberListDataPresentor: 1..1


&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™æ ·ä½¿ç”¨çš„æ—¶å€™åªè¦ &lt;code class=&quot;highlighter-rouge&quot;&gt;MemberListDataPresentor&lt;/code&gt; ç»„è£…å¥½æ•°æ®ï¼Œå°±ä¸å¿…å†è°ƒç”¨æ¸²æŸ“äº†ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ &lt;code class=&quot;highlighter-rouge&quot;&gt;MemberViewModel&lt;/code&gt; æ˜ å°„åˆ° &lt;code class=&quot;highlighter-rouge&quot;&gt;MemberListView&lt;/code&gt; ä¸Šäº†ã€‚å¯ä»¥çœ‹åˆ°ä¸‹é¢ä¼ªä»£ç çš„è°ƒç”¨è¿‡ç¨‹ã€‚&lt;/p&gt;

&lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;n&quot;&gt;interactor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loadAllUserData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MemberData&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;in&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;presentor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bindData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;listView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™å…¶å®å°±æ˜¯ MVVM çš„æ¶æ„è¿›åŒ–çš„è¿‡ç¨‹ã€‚DRY åŸåˆ™å°±æ˜¯ä¸è¦å†™é‡å¤çš„ä»£ç ï¼Œå°±åƒå†™æ–‡ç« ä¸€æ ·ï¼Œåƒç¯‡ä¸€å¾‹çš„æ–‡å­—æ²¡äººæ„¿æ„çœ‹ä¸€ä¸ªé“ç†ã€‚æˆ‘ä»¬ç»§ç»­æ¥çœ‹è¿™ä¸ªåŠŸèƒ½å‘å±•çš„æƒ…å†µã€‚&lt;/p&gt;

&lt;h2 id=&quot;å¤§é‡çš„è€¦åˆ&quot;&gt;å¤§é‡çš„è€¦åˆ&lt;/h2&gt;

&lt;p&gt;éšç€åŠŸèƒ½è¶Šæ¥è¶Šå¤æ‚ï¼Œä¼šå‘ç° &lt;code class=&quot;highlighter-rouge&quot;&gt;MemberListDataPresentor&lt;/code&gt; è¿™ä¸ªç±»è°ƒç”¨çš„æ¥å£ä¼šè¶Šæ¥è¶Šå¤šï¼Œæ—¢éœ€è¦è°ƒç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;MemberListDataInteractor&lt;/code&gt; å¤§é‡çš„è¯·æ±‚æ¥å£æ¥è·å–æ•°æ®ï¼ŒåŒæ—¶ä¹Ÿéœ€è¦ç»„è£…å„ç§ Model çš„æ•°æ®ï¼ŒåŠ¿å¿…ä¼šé€ æˆå¤§é‡æ¥å£æš´éœ²ã€‚è¿™ç§å„ç§å¤æ‚å…³ç³»çš„è°ƒç”¨ï¼Œä½¿é˜…è¯»èµ·è¶Šæ¥è¶Šéš¾ã€‚è¿™æ—¶å€™è½¯ä»¶å·¥ç¨‹çš„ä¸€ä¸ªæœ€å¥½æœ‰çš„åŸåˆ™ï¼šä»»ä½•å·¥ç¨‹é—®é¢˜ï¼Œéƒ½å¯ä»¥é€šè¿‡å¢åŠ ä¸€ä¸ªä¸­é—´å±‚æ¥è§£å†³ã€‚æˆ‘ä»¬è¿™é‡Œå°±éœ€è¦å¢åŠ å·¥å…·ç±»è§£è€¦ï¼Œè§£è€¦çš„æœ¬è´¨é€šè¿‡å·¥å…·ç±»æ‹†åˆ†ã€‚ä½¿å¾—ä¾èµ–å…³ç³»å˜ä¸ºå¦‚ä¸‹ç»“æ„ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-mermaid&quot;&gt;classDiagram

MemberListDataPresentor ..&amp;gt; ColdObserval

MemberListDataInteractor ..&amp;gt; ColdObserval

MemberListViewController ..&amp;gt; ColdObserval

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æœ‰å¤§é‡æ¥å£ä¾èµ–çš„ç±»ï¼Œäº’ç›¸ç›´æ¥è°ƒç”¨å°±å¯ä»¥ç”¨ç±»ä¼¼çš„æ–¹å¼ã€‚&lt;/p&gt;

&lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;presentor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;addObserval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;in&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// bind data&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;interactor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;postMessage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å…¶å®è¿™å°±æ˜¯ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼æ¥æ‹†åˆ†ã€‚è§‚å¯Ÿè€…æ¨¡å¼çš„å¥½å¤„å°±æ˜¯è§£è€¦ï¼Œå‡å°‘æ¥å£ä¾èµ–ï¼Œè¿™æ ·æˆ‘ä»¬æƒ³è¦å®šä¹‰ä¸åŒçš„ presentor ç±»æ—¶ï¼Œä¹Ÿä¸å¿…ä¾èµ–å„ç§å…·ä½“çš„ interactorï¼Œåªéœ€è¦ç›‘å¬æ¶ˆæ¯å³å¯ã€‚ä¾‹å¦‚ WebRTC ä¸­é‡è¦çš„çº¿ç¨‹å·¥å…·ç±» TaskQueue ï¼Œå°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£è€¦çš„æ‹†åˆ†çš„å·¥å…·ã€‚æŠŠç¼–è§£ç ï¼Œé‡‡é›†ï¼Œä¼ è¾“å¾ˆå¥½çš„è§£è€¦åˆ†ç¦»å¼€ã€‚æœ‰äº†è¿™ä¸ªé“ºå«ï¼Œæˆ‘ä»¬æœ€åæ¥çœ‹ä¸‹å¦‚ä½•æ‰©å±•åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;h2 id=&quot;æ‰©å±•æ–°åŠŸèƒ½&quot;&gt;æ‰©å±•æ–°åŠŸèƒ½&lt;/h2&gt;

&lt;p&gt;è¯•æƒ³ä¸‹æˆ‘ä»¬éœ€è¦åœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;MemberListViewController&lt;/code&gt; è§†å›¾ä¸Šå¢åŠ æ–°åŠŸèƒ½ï¼Œä¸ä»…ä»…æ˜¯æ˜¾ç¤º &lt;code class=&quot;highlighter-rouge&quot;&gt;MemberListView&lt;/code&gt; è¿™ä¸€ç§è§†å›¾ï¼Œè¿˜èƒ½æ’å…¥å„ç§å…¶ä»–ä¸šåŠ¡è§†å›¾ã€‚&lt;/p&gt;

&lt;p&gt;æ­£æ˜¯å› ä¸ºæœ‰äº†å·¥å…·ç±»çš„æ‹†åˆ†ï¼Œè¿™æ ·æ‰€æœ‰çš„ç±»éƒ½æ²¡æœ‰ä»»ä½•çš„ä¾èµ–ï¼Œä¸ç”¨æš´éœ²æ–°æ¥å£ï¼Œæ‰©å±•å°±å¾ˆå®¹æ˜“äº†ã€‚å…·ä½“å¯ä»¥é€šè¿‡ä»£ç†æ¨¡å¼æ¥æ¨ªå‘æ‹†åˆ†ã€‚å®šä¹‰è¦æ‰©å±•çš„ä»£ç†ç±» Pluginï¼Œæˆ‘ä»¬æ–°åŠŸèƒ½åªè¦å®ç° Plugin å®šä¹‰çš„æ¥å£å‡½æ•°ï¼Œå°±å¯ä»¥æ¨ªå‘æ‰©å±•æ‰€æœ‰çš„åŠŸèƒ½ã€‚æˆ‘ä»¬çœ‹ä¸‹ç±»ç»“æ„ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-mermaid&quot;&gt;classDiagram

class MemberListViewPlugin { 
  -View subView 
  -loadView()
}

class MemberListDataInteractorPlugin { 
  -List&amp;lt;MemberData&amp;gt; dataList 
  -requestData()
}

class MemberListDataPresentorPlugin { 
  -List&amp;lt;MemberData&amp;gt; dataList 
  -bindData()
}

MemberListDataPresentor *-- MemberListDataPresentorPlugin : 1..*

MemberListDataInteractor *-- MemberListDataInteractorPlugin : 1..*

MemberListView *-- MemberListViewPlugin : 1..*

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶åæˆ‘ä»¬çš„æ’ä»¶è°ƒç”¨è¿‡ç¨‹å°±å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;MemberListDataPresentorPlugin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;presentorPlugin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MemberListDataPresentorPlugin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;presentor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;registPlugin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;presentorPlugin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;MemberListDataInteractorPlugin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;interactorPlugin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MemberListDataInteractorPlugin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;interactor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;registPlugin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;interactorPlugin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™æ ·æ¯æ¬¡å¢åŠ æ–°åŠŸèƒ½æ—¶ï¼Œä¸éœ€è¦æ›´æ”¹åŸæ¥çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;MemberListDataPresentor&lt;/code&gt;ã€ &lt;code class=&quot;highlighter-rouge&quot;&gt;MemberListDataInteractor&lt;/code&gt; ä»»ä½•ä»£ç ï¼Œåªéœ€è¦æ·»åŠ æ’ä»¶çš„å®ç°å°±å¯ä»¥äº†ã€‚è¿™å…¶å®å°±æ˜¯å¾ˆå¤šè½¯ä»¶æ’ä»¶çš„æ¶æ„æ¨¡å¼ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬ä»ä¸Šé¢è¿™ä¸ªä¾‹å­é‡Œå¯ä»¥çœ‹åˆ°ä»£ç çš„æ¼”å˜ï¼Œå¦‚ä½•ä» MVC åˆ° MVVM å†åˆ°æœ€åæ’ä»¶åŒ–ï¼Œè¿™äº›è¿‡ç¨‹è®©ä»£ç ç»“æ„æ›´åŠ æ¸…æ™°å®¹æ˜“é˜…è¯»ï¼Œé˜²æ­¢ä»£ç è…åŒ–ã€‚&lt;/p&gt;

&lt;h2 id=&quot;é‡æ„çš„å›é¡¾&quot;&gt;é‡æ„çš„å›é¡¾&lt;/h2&gt;

&lt;p&gt;æˆ‘ä»¬æ€»ç»“ä¸‹ä¸Šè¿°çš„é‡æ„è¿‡ç¨‹ä¸­å‡ ä¸ªå…³é”®çš„èŠ‚ç‚¹ã€‚&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;å½“ä½ å‘ç°ä¸€ä¸ªç±»è¶Šæ¥è¶Šå¤§ã€‚
    &lt;blockquote&gt;
      &lt;p&gt;è¶…è¿‡äº†1000è¡Œä»£ç äº†ï¼Œä¸€å®šæ˜¯éœ€è¦æ‹†åˆ†åŠŸèƒ½äº†ã€‚&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
  &lt;li&gt;å½“ä½ å¼€å‘åŠŸèƒ½æ—¶ï¼Œå‘ç°éœ€è¦åŸæ¥çš„ç±»å¤§é‡æ›´æ”¹æ¥å£æ‰èƒ½å®ç°ï¼Œæˆ‘ä»¬å°±éœ€è¦ç”¨å·¥å…·ç±»æ¥è§£è€¦ã€‚&lt;/li&gt;
  &lt;li&gt;å½“æ·»åŠ æ–°åŠŸèƒ½æ—¶ï¼Œéœ€è¦é¢‘ç¹æ›´æ”¹ä¸€ä¸ªç±»æ—¶ã€‚
    &lt;blockquote&gt;
      &lt;p&gt;è¿™æ—¶å€™å°±éœ€è¦ç”¨ä»£ç†æ¨¡å¼çš„æ’ä»¶æ¥æ‰©å±•ä½ çš„ç±»ï¼Œè¿™æ ·å°±å¯ä»¥é¿å…å¤§é‡çš„ä¿®æ”¹é€»è¾‘ï¼Œä¿è¯ä»£ç ç¨³å®šæ€§ã€‚ä¾‹å¦‚æˆ‘ä»¬ç»å¸¸çœ‹åˆ°çš„ä¸€äº›å¯æ’æ‹”çš„æ’ä»¶ç³»ç»Ÿï¼Œéƒ½æ˜¯é€šè¿‡è¿™ç§æ–¹å¼å®ç°çš„ã€‚&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
  &lt;li&gt;æ€§èƒ½ä¼˜åŒ–çš„ä»£ç å¤ªå¤šæ—¶å°¤å…¶æ³¨æ„ï¼Œå°½é‡ä¸è¦æš´éœ²å‡ºæ¥ï¼Œå› ä¸ºæ€§èƒ½ä¼˜åŒ–çš„ä»£ç å¾€å¾€å¯è¯»æ€§æ¯”è¾ƒå·®ã€‚
    &lt;blockquote&gt;
      &lt;p&gt;å¯¹äºä¼˜åŒ–æ€§èƒ½çš„ä»£ç ï¼Œé‡æ„çš„æ—¶å€™æˆ‘è¿™é‡Œï¼Œå°½é‡å°è£…æˆå†…éƒ¨çš„å‡½æ•°ï¼Œè€Œä¸è¦æš´éœ²ç»™å¤–éƒ¨ä½¿ç”¨ã€‚æ¯”å¦‚å®šä¹‰äº†ä¸€ä¸ª Cache èµ„æºçš„ç±»ï¼Œä¸ºäº†ä¼˜åŒ–å†…å­˜ï¼Œè¿™ç§æœ€å¥½ä¸è¦æŠŠAPIæš´éœ²åœ¨å¤–é¢ï¼Œåœ¨å†…éƒ¨æ¶ˆåŒ–æœ€å¥½ã€‚&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
  &lt;li&gt;å‘ç°æ— ç”¨çš„åŠŸèƒ½ä»£ç åŠæ—¶çš„åˆ é™¤ï¼Œé˜²æ­¢è¿›ä¸€æ­¥é˜²æ­¢è…åŒ–
    &lt;blockquote&gt;
      &lt;p&gt;ä¸åŠæ—¶åˆ é™¤çš„åæœï¼Œä¼šå‘ç°æ–°åŠŸèƒ½è°ƒç”¨ä»¥å‰ç§»é™¤çš„åŠŸèƒ½ç±»çš„æ–¹æ³•ï¼Œè¿™æ—¶å€™ä½ æƒ³åˆ é™¤è€åŠŸèƒ½ä»£ç æ—¶ï¼Œä½ ä¼šå‘ç°æ¬²å“­æ— æ³ªã€‚&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å¯¹æ¯” ChatGPT é‡æ„çš„æ€»ç»“ï¼Œæ€»ä½“åŸåˆ™ä¸€æ ·ï¼Œä½†æ˜¯ä¼šæ›´åŠ å…·ä½“ä¸€ç‚¹ã€‚æœ€åæˆ‘æƒ³è®²ä¸‹å…³äºé‡æ„ä»£ç æ—¶ï¼Œå¦‚ä½•ä¿è¯ç¨³å®šæ€§çš„ä¸€äº›åŸåˆ™ã€‚æˆ‘æ€»ç»“èµ·æ¥å°±æ˜¯å°æ­¥å¿«èµ°ï¼Œä¿è¯ç¨³å®šã€‚åœ¨é‡æ„çš„è¿‡ç¨‹ä¸­å…è®¸ä¸€å®šçš„å†—ä½™ä»£ç ï¼Œå¢åŠ ç°åº¦èƒ½åŠ›ï¼Œå½“å‘ç°é—®é¢˜æ—¶å¯ä»¥åŠæ—¶å›æ»šï¼Œç­‰å¾…é‡æ„çš„ä»£ç æµ‹è¯•æ²¡é—®é¢˜äº†å†åˆ é™¤ã€‚&lt;/p&gt;

&lt;p&gt;å¾ˆå¤šä¼˜ç§€çš„å¼€æºé¡¹ç›®çš„ä»£ç ä¸ä»…å¯¹ä»£ç çš„æ€§èƒ½ï¼Œä¹Ÿå¯¹ä»£ç çš„è´¨é‡å’Œå¯ç»´æŠ¤æ€§è¦æ±‚å¾ˆé«˜ï¼Œé˜…è¯»èµ·æ¥å°±åƒæ¬£èµä¼˜ç¾çš„è¯—ç¯‡ã€‚å±å±±ä¸€æ ·çš„ä»£ç ä»æ¥ä¸ä¼šæœ‰ä¼Ÿå¤§çš„ä½œå“ã€‚æˆ‘ç›¸ä¿¡æ¯ä¸ªä¼˜ç§€çš„ç¨‹åºå‘˜ï¼Œéƒ½ä¸æ„¿æ„æŠŠè‡ªå·±çš„ä»£ç å˜æˆå±å±±ï¼Œä½†æ˜¯ç½—é©¬ä¹Ÿä¸æ˜¯ä¸€å¤©èƒ½å»ºæˆçš„ï¼Œå­¦ä¼šé‡æ„æ˜¯å¿…å¤‡çš„æŠ€èƒ½ã€‚&lt;/p&gt;</content><author><name>mengtnt</name></author><summary type="html">é‡æ„æ˜¯ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„é—®é¢˜ï¼Œå¹¶ä¸”ä¹Ÿæœ‰å¤§é‡çš„ä¹¦ç±ä»‹ç»é‡æ„çš„æ–¹æ³•ã€‚é‚£å¦‚ä½•é‡æ„ä»£ç ï¼Ÿå¦‚ä½•ä¿è¯é‡æ„çš„ä»£ç ä¸å‡ºé—®é¢˜ï¼Ÿé‡æ„åçš„ä»£ç å¦‚ä½•é˜²æ­¢è…åŒ–ï¼Ÿæˆ‘å…ˆè´´å‡ºæ¥ ChatGPT å¦‚ä½•å›ç­”çš„ï¼Œæ¥æ„Ÿå—ä¸‹å¥¹çš„å¼ºå¤§ã€‚</summary></entry><entry><title type="html">èŒè´£å•ä¸€çš„é‡è¦æ€§</title><link href="https://mengtnt.com/2022/09/18/architeche.html" rel="alternate" type="text/html" title="èŒè´£å•ä¸€çš„é‡è¦æ€§" /><published>2022-09-18T06:55:02+00:00</published><updated>2022-09-18T06:55:02+00:00</updated><id>https://mengtnt.com/2022/09/18/architeche</id><content type="html" xml:base="https://mengtnt.com/2022/09/18/architeche.html">&lt;p&gt;æœ€è¿‘åœ¨åš iPad æ”¹ç‰ˆåŠŸèƒ½ï¼Œç”±äº iPad çš„åŠŸèƒ½å’Œ iPhone åŠŸèƒ½ä¸ŠåŸºæœ¬ä¿æŒä¸€è‡´ï¼Œé™¤äº† UI è¦é€‚é…ä¸‹ iPad çš„å±å¹•ä»¥åŠåˆ†å±çš„æƒ…å†µå¤–ã€‚åœ¨è¿™ä¸ªå¼€å‘è¿‡ç¨‹ä¸­ï¼Œå’ŒåŒäº‹è®¨è®ºäº†ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„åŠŸèƒ½æ‰©å±•çš„é—®é¢˜ã€‚è™½ç„¶ç®€å•ä½†æ˜¯æ„Ÿè§‰å¾ˆæœ‰å¿…è¦è®°å½•ä¸‹æ¥ï¼Œå¯¹äºåœ¨è½¯ä»¶å¼€å‘ä¸­è®¾è®¡ä¸šåŠ¡é€»è¾‘æ—¶å¾ˆæœ‰å¯å‘ã€‚&lt;/p&gt;

&lt;h2 id=&quot;æ•…äº‹çš„å¼€å§‹&quot;&gt;æ•…äº‹çš„å¼€å§‹&lt;/h2&gt;

&lt;p&gt;iPad çš„UIé€‚é…çš„ä»£ç å†™åœ¨ XXXiPadViewController ä¸­ï¼Œä¸»è¦ç›®çš„æ˜¯ä¸æ”¹å˜åŸæœ‰ä»£ç çš„é€»è¾‘ï¼Œåªéœ€è¦æ·»åŠ é€‚é…ä»£ç å³å¯ã€‚å…¶å®ä¹Ÿæ˜¯è½¯ä»¶è®¾è®¡ä¸­ç»å¸¸ç”¨çš„ä¸€ä¸ªç‰¹ç‚¹å¼€é—­åŸåˆ™ã€‚&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯é‡åˆ°çš„é—®é¢˜æ˜¯ï¼ŒåŸæ¥çš„XXXComponentçš„ä»£ç ï¼Œä½†æ˜¯ä¸šåŠ¡ä»£ç éƒ½æ˜¯ç»§æ‰¿åœ¨ViewControllerä¸­çš„ï¼Œäº†è§£iOSå¼€å‘çš„éƒ½æ¸…æ¥šï¼ŒViewControllerä¸»è¦è´Ÿè´£é¡µé¢UIçš„æ·»åŠ å’Œå¸ƒå±€ã€‚ç”±äºé€‚é… iPad çš„è§†å›¾ï¼Œå°¤å…¶æ˜¯åˆ†å±çš„é€»è¾‘ï¼Œä¸€å®šéœ€è¦æ›´æ”¹å¸ƒå±€ï¼Œå¦‚æœæƒ³ä½¿ç”¨åŸæ¥çš„ XXXComponent çš„ä»£ç é€»è¾‘ï¼Œä½†æ˜¯ä¸æƒ³æ”¹åŠ¨ä»£ç çš„å¸ƒå±€ï¼Œä¼¼ä¹ä¸å¤ªå¯èƒ½ã€‚&lt;/p&gt;

&lt;h2 id=&quot;è§£å†³æ–¹æ³•&quot;&gt;è§£å†³æ–¹æ³•&lt;/h2&gt;

&lt;p&gt;å¦‚æœç†Ÿæ‚‰è½¯ä»¶è®¾è®¡çš„è£…é¥°å™¨æ¨¡å¼çš„è¯ï¼Œè¿™å…¶å®æœ‰ç‚¹åƒè£…é¥°å™¨ã€‚ä¸æ”¹å˜åŸæœ‰å¯¹è±¡çš„æƒ…å†µä¸‹åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ‰©å±•åŠŸèƒ½ï¼Œå³æ’å³ç”¨ã€‚XXXiPadComponentï¼Œå°±æ˜¯è£…é¥°å™¨ï¼Œç”¨æ¥è£…é¥°XXXComponentï¼Œè®©ä»–å…·å¤‡iPadçš„å¸ƒå±€èƒ½åŠ›ï¼Œä½†æ˜¯è¦æŠŠåˆ†å±å¸ƒå±€éƒ½æ”¾åˆ°è£…é¥°å™¨ä¸­ï¼Œå°±éœ€è¦çˆ¶è§†å›¾å¸ƒå±€çš„èƒ½åŠ›æš´éœ²ç»™ XXXiPadComponentã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹é¢å°±æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯ï¼Œé€šè¿‡å†™ä¸€ä¸ª iPad çš„é€‚é…å™¨ï¼Œé€šè¿‡æŠŠ XXXiPadViewController çš„å¸ƒå±€èƒ½åŠ›æš´éœ²ç»™ XXXiPadViewControllerï¼Œè¾¾åˆ°ä¸æ”¹åŠ¨åŸæ¥ XXXViewController çš„ä»£ç é€»è¾‘ï¼ŒåŒæ—¶å¢åŠ äº† iPad å¸ƒå±€çš„èƒ½åŠ›ã€‚è¦è¾¾åˆ°ä¸Šé¢çš„ç›®çš„ ï¼Œåœ¨ OC é‡Œå¯ä»¥é€šè¿‡ä»£ç†æ–¹æ³•ï¼ŒæŠŠå¸ƒå±€çš„åŠ¨ä½œäº¤ç»™ XXXiPadComponentï¼Œå°±ä½¿ç”¨äº†å¦‚ä¸‹çš„è®¾è®¡ï¼Œä¸‹é¢ç”¨ä¼ªä»£ç æ¼”ç¤ºä¸‹ã€‚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
// å¸ƒå±€çš„å›è°ƒæ–¹æ³•
@protocol layoutDelegate

- layoutViewInContainer(View *)

// Component å¢åŠ å¦‚ä¸‹èƒ½åŠ›
- addPlugin(Component)

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç„¶åè°ƒç”¨è€…ä½¿ç”¨çš„æ–¹å¼å°±å¾ˆç®€å•å¦‚ä¸‹&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-oc&quot;&gt;
let iPadComponet = XXXiPadComponent()
XXXComponent.addPlugin(iPadComponet)

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€šè¿‡è¿™ç§æ–¹å¼å°±æ˜¯æŠŠå¸ƒå±€ä»£ç†ç»™äº† XXXiPadComponentï¼Œç”±äº XXXiPadComponent åŸºäºäºUIViewControllerï¼Œè‡ªç„¶å°±æƒ³èµ·æ¥ç»™UIViewController åŠ ä¸Šèƒ½åŠ›æ‰©å±•å°±è¡Œäº†ã€‚æœ€ç»ˆç‰ˆæœ¬å¦‚ä¸‹ã€‚è¿™æ ·çˆ¶è§†å›¾å°±ä¸ç”¨å…³ç³»childViewControllerçš„å¸ƒå±€äº†ï¼Œåªè¦ä¸€è¡Œ ` addPlugin `è°ƒç”¨å°±å¯ä»¥äº†ï¼Œä»£ç ä¹Ÿå¯ä»¥èŠ‚çœå¾ˆå¤šã€‚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;- (void)addPlugin:(DTKViewController&amp;lt;ADTViewControllerPlugin&amp;gt;*)pluginVc {
    pluginVc.overrideInterfaceOrientation = self.overrideInterfaceOrientation;
    [self addChildViewController:pluginVc];
    [self.view addSubview:[pluginVc pluginView]];
    
    if ([pluginVc respondsToSelector:@selector(layoutPluginInContainer:)]) {
        [pluginVc layoutPluginInContainer:self.view];
    }
    
    [pluginVc didMoveToParentViewController:self];
}

- (void)removePlugin:(DTKViewController&amp;lt;ADTViewControllerPlugin&amp;gt;*)pluginVc {
    [pluginVc removeFromParentViewController];
    [[pluginVc pluginView] removeFromSuperview];
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;é—®é¢˜çš„å‡ºç°&quot;&gt;é—®é¢˜çš„å‡ºç°&lt;/h2&gt;

&lt;p&gt;ä»ä¸Šé¢çš„è¿‡ç¨‹æ¥çœ‹ï¼Œè£…é¥°å™¨æ¨¡å¼ä»£ç ç»“æ„æ¸…æ™°ï¼Œä½†æ˜¯å¸¦æ¥çš„é—®é¢˜æ˜¯ä¼šå¢åŠ ç¨‹åºå¤æ‚æ€§ï¼Œä¸‹é¢å°±è¯´å‡ºç°çš„é—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹äºiPadé€‚é…ï¼Œè¿™ç§æ–¹å¼ä¼¼ä¹æŒºå¥½åŸºæœ¬ä¸ç”¨æ”¹å˜åŸæ¥çš„ä»£ç ï¼Œåªéœ€è¦é€‚é… iPadViewController çš„ä»£ç å°±å¯ä»¥ã€‚ä½†æ˜¯æœ‰åŒäº‹å¼€å§‹è´¨ç–‘è¿™ç§æ–¹å¼ã€‚&lt;/p&gt;

&lt;p&gt;æœ€å¤§çš„è´¨ç–‘å°±æ˜¯ä¸ºä»€ä¹ˆä¸ç”¨addChildViewControllerï¼Œä¸å°±æ˜¯childViewControllerä¹ˆï¼Ÿ
è‡ªå·±ä»”ç»†æƒ³æƒ³ç¡®å®æ˜¯ï¼Œä¸ºå•¥å½“æ—¶ä¸ç”¨å“ªï¼Ÿå¾ˆé‡è¦çš„ä¸€ç‚¹å°±æ˜¯ addChildViewController çš„å¸ƒå±€æ˜¯éœ€è¦çˆ¶è§†å›¾æ¥å†™é€»è¾‘ä»£ç çš„ï¼Œè¿™æ ·å°±å’Œè‡ªå·±æƒ³è¦æŠŠiPadå¸ƒå±€çš„é€‚é…ä»£ç éƒ½å†™åœ¨XXXiPadComponentä¸­çŸ›ç›¾äº†ã€‚&lt;/p&gt;

&lt;p&gt;å°¤å…¶åŒäº‹è¯´çš„è¿™å¥è¯è®©æˆ‘è®°å¿†çŠ¹æ–°ï¼Œä¸ºä»€ä¹ˆä½ æƒ³è¦æŠŠSubViewControllerçš„å¸ƒå±€äº¤ç»™æœ¬èº«é‚£ï¼ŸSubViewController å°±åº”è¯¥æ˜¯çˆ¶è§†å›¾æ¥å¸ƒå±€ï¼Œè¿™æ ·æ‰ç¬¦åˆUIViewControlleré€»è¾‘ï¼Œåˆ«äººçœ‹ä»£ç æ‰çœ‹çš„æ‡‚ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœä»UIKitæ¡†æ¶æ¥çœ‹ï¼Œç¡®å®è¿™æ ·å†™æ‰æ˜¯å®¹æ˜“ç†è§£çš„ä»£ç ã€‚ä½†æ˜¯å‡å¦‚è¯´ä¸€ä¸ªä»æ¥æ²¡å­¦ä¹ è¿‡è‹¹æœUIKitå¸ƒå±€çš„ç¨‹åºå‘˜ï¼Œæƒ³è®¾è®¡ä¸€ä¸ªç»„ä»¶ï¼Œç„¶åçˆ¶ç»„ä»¶æ·»åŠ å­ç»„ä»¶ä»–ä¼šæ€ä¹ˆå†™å“ªï¼Ÿæœ€ä¾¿æ·çš„æ–¹æ³•å°±æ˜¯ç›´æ¥é€šè¿‡ addPlugin å®Œæˆå°±è¡Œï¼Œç„¶åå­ç»„ä»¶å¸ƒå±€çš„ä»£ç ä¹Ÿå¾ˆå¯èƒ½å†™åœ¨ç»„ä»¶ä¸­ï¼Œå› ä¸ºè¿™æ ·å°è£…æ€§æ›´å¥½ï¼Œå…¶å®å¾ˆå¤šVUEçš„ç»„ä»¶å¾ˆå¤šéƒ½æ˜¯ä¸€è¡Œä»£ç ï¼Œä¸ç”¨å…³å¿ƒå¸ƒå±€ï¼Œä¸€è¡Œä»£ç å°±å¯ä»¥åŠ è½½æ’ä»¶ï¼Œé™¤éè°ƒç”¨è€…éœ€è¦åŠ¨æ€æ”¹å˜å¸ƒå±€ï¼Œå¦åˆ™é»˜è®¤å°±ä¸å†æš´éœ²å‡ºæ¥ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥çŸ›ç›¾å°±å‡ºç°äº† è‹¹æœ UIKit æ¡†æ¶è®¾è®¡å°±æ˜¯ç»™äº†UIViewControllerå¤ªå¤šçš„æƒåˆ©ï¼Œæ—¢å¯ä»¥æ·»åŠ å„ç§è§†å›¾ï¼Œåˆè¦è´Ÿè´£å„ç§è§†å›¾çš„å¸ƒå±€ã€‚å½“ç„¶å’Œåˆšæ‰è¯´çš„ç»„ä»¶æ€æƒ³æœ‰å¾ˆå¤§çš„å·®åˆ«ï¼Œæ‰€ä»¥è‡ªå·±å¦‚æœç»™ UIViewController æ·»åŠ pluginå°±ä¼šè®©å…¶ä»–å¼€å‘è€…æ„Ÿåˆ°å›°æƒ‘ã€‚&lt;/p&gt;

&lt;h2 id=&quot;è§£å†³æ–¹å¼&quot;&gt;è§£å†³æ–¹å¼&lt;/h2&gt;

&lt;p&gt;æ—¢ç„¶UIKi æ¡†æ¶çš„è®¾è®¡ç†å¿µå’Œä¸šåŠ¡æ’ä»¶çš„ç†å¿µæœ‰å†²çªï¼Œæ€ä¹ˆè§£å†³ï¼Ÿå…¶å®æœ¬è´¨ä¸Šå°±æ˜¯æˆ‘ä»¬å®šä¹‰çš„Pluginæš´éœ²å‡ºäº†UIViewControllerï¼Œè®©è¿™ä¸ªpluginå…·å¤‡äº†è¿‡å¤šçš„æ— ç”¨çš„èƒ½åŠ›ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„pluginå®Œå…¨å¯ä»¥ç”¨ä¸‹é¢çš„æ–¹å¼ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-oc&quot;&gt;
id&amp;lt;ADTPluginProtocol&amp;gt;

- registerPlugin:(id&amp;lt;ADTPluginProtocol&amp;gt;)plugin

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;pluginå®šä¹‰çš„åè®®æ¥å£ä¸è¦å’ŒUIViewControllerå…³è”ï¼Œè‡ªç„¶è°ƒç”¨è€…å°±ä¸ä¼šæƒ³åˆ°è¿™ä¸ªæ˜¯UIViewControllerã€‚æ‰€ä»¥æˆ‘ä»¬è®¾è®¡æŸäº›åŠŸèƒ½æ—¶ï¼Œå‘ç°å’Œç³»ç»Ÿæ¡†æ¶çš„ç†å¿µä¸å¤ªä¸€æ ·çš„è¯ï¼Œå°½é‡è¿˜æ˜¯è¦åŒºåˆ†å¼€è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘çš„åŠŸèƒ½ã€‚è¯´ç™½äº†å°±æ˜¯è¦èŒè´£å•ä¸€ï¼Œä¸è¦æŠŠå„ç§èŒè´£éƒ½ç»™ä¸ä¸€ä¸ªç±»ï¼Œè¿™æ ·å°±ä¼šå˜æˆçœ‹ä¼¼åŠŸèƒ½å¼ºå¤§ï¼Œä½†æ˜¯ä»£ç æ— æ¯”è‡ƒè‚¿ã€‚&lt;/p&gt;

&lt;h2 id=&quot;æ€è€ƒæ€»ç»“&quot;&gt;æ€è€ƒæ€»ç»“&lt;/h2&gt;

&lt;p&gt;è½¯ä»¶è®¾è®¡ä¸­å…¶å®æ¯”è¾ƒå¿Œè®³çš„æ˜¯é±¼ä¸ç†ŠæŒå…¼å¾—ï¼Œæ—¢æƒ³è¦ä»£ç å¯å¤ç”¨æ€§å¼ºï¼Œåˆæƒ³è¦ä»£ç åŠŸèƒ½å¤šæ‰©å±•å¼ºï¼Œå°±å¾ˆå®¹æ˜“é™·å…¥åˆ°ä¸Šé¢è¯´çš„å›°å¢ƒä¸­ã€‚å…¶å®ä¸Šé¢pluginçš„è®¾è®¡å®Œå…¨æ²¡æœ‰å¿…è¦åŸºäº UIViewControllerï¼Œçœ‹èµ·æ¥è¿™ä¸ªpluginåŠŸèƒ½å¾ˆå¼ºå¤§ï¼Œæ—¢æœ‰UIViewControllerå¸ƒå±€å­è§†å›¾çš„èƒ½åŠ›ï¼Œåˆå…·å¤‡äº†å­è§†å›¾å¯ä»¥åœ¨çˆ¶è§†å›¾ä¸Šå¸ƒå±€çš„èƒ½ï¼Œè¿™æ ·æ”¹å˜äº†UIKitæ¡†æ¶åŸæœ¬å®šä¹‰çš„UIViewControllerèƒ½åŠ›ï¼Œä¼šè®©ä½¿ç”¨å¼€å‘è€…éå¸¸å›°æƒ‘ã€‚
è§£å†³æ–¹æ¡ˆå°±æ˜¯å¯ä»¥è‡ªå·±å®šä¹‰ä¸€ä¸ªPluginçš„å¯¹è±¡ï¼Œè¿™æ ·åœ¨ä½¿ç”¨pluginæ—¶ï¼Œå¼€å‘è€…å°±ä¸ä¼šè”æƒ³åˆ°è¿™ä¸ªå°±æ˜¯ViewControllerï¼Œè€Œåªä¼šçŸ¥é“Pluginå¯ä»¥è®©è‡ªå·±è·å¾—å¸ƒå±€åˆ°çˆ¶è§†å›¾çš„èƒ½åŠ›ã€‚
è¿™ä¹Ÿæé†’äº†å¹³å°æ¡†æ¶å±‚å’Œä¸šåŠ¡é€»è¾‘çš„èƒ½åŠ›å°½é‡åˆ†ç¦»æ¸…æ™°ï¼Œä¸è¦æ··åˆåœ¨ä¸€èµ·ï¼Œå¦åˆ™å¼€å‘è€…ç†è§£èµ·æ¥ä¹Ÿå¾ˆå®¹æ˜“æ­§ä¹‰ã€‚è¯´ç™½äº†è¿˜æ˜¯è½¯ä»¶è®¾è®¡çš„é‡è¦åŸåˆ™èŒè´£å•ä¸€ï¼Œä¸è¦ç»™è®¾è®¡çš„åŠŸèƒ½åˆ†é…å¤ªå¤šæ²¡ç”¨çš„æƒåˆ©ï¼Œä»…ä»…ç»™éœ€è¦å®Œæˆçš„æƒåˆ©å°±å¯ä»¥ã€‚&lt;/p&gt;</content><author><name>mengtnt</name></author><summary type="html">æœ€è¿‘åœ¨åš iPad æ”¹ç‰ˆåŠŸèƒ½ï¼Œç”±äº iPad çš„åŠŸèƒ½å’Œ iPhone åŠŸèƒ½ä¸ŠåŸºæœ¬ä¿æŒä¸€è‡´ï¼Œé™¤äº† UI è¦é€‚é…ä¸‹ iPad çš„å±å¹•ä»¥åŠåˆ†å±çš„æƒ…å†µå¤–ã€‚åœ¨è¿™ä¸ªå¼€å‘è¿‡ç¨‹ä¸­ï¼Œå’ŒåŒäº‹è®¨è®ºäº†ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„åŠŸèƒ½æ‰©å±•çš„é—®é¢˜ã€‚è™½ç„¶ç®€å•ä½†æ˜¯æ„Ÿè§‰å¾ˆæœ‰å¿…è¦è®°å½•ä¸‹æ¥ï¼Œå¯¹äºåœ¨è½¯ä»¶å¼€å‘ä¸­è®¾è®¡ä¸šåŠ¡é€»è¾‘æ—¶å¾ˆæœ‰å¯å‘ã€‚</summary></entry><entry><title type="html">Swiftæ¦‚è¿°</title><link href="https://mengtnt.com/2022/05/04/swift-roadmap.html" rel="alternate" type="text/html" title="Swiftæ¦‚è¿°" /><published>2022-05-04T07:04:48+00:00</published><updated>2022-05-04T07:04:48+00:00</updated><id>https://mengtnt.com/2022/05/04/swift-roadmap</id><content type="html" xml:base="https://mengtnt.com/2022/05/04/swift-roadmap.html">&lt;p&gt;éšç€è¶Šæ¥è¶Šå¤šçš„åº”ç”¨åœ¨ä½¿ç”¨ Swift è¯­è¨€å¼€å‘iOSï¼Œå­¦ä¹  Swift è¯­è¨€ä¹Ÿå¾ˆæœ‰å¿…è¦ã€‚è¿™ä¸ªåšå®¢ä¸æ˜¯è¯¦ç»†çš„ Swift çš„æ•™ç¨‹ï¼Œä¸»è¦æ˜¯ä¸ºäº† Swift åˆå­¦è€…ï¼Œå°¤å…¶ä¹‹å‰ä½¿ç”¨ OC å¼€å‘ iOS åº”ç”¨çš„äººå‘˜ï¼Œåœ¨è½¬å…¥ Swift è¿™é—¨è¯­è¨€æ—¶ï¼Œåº”è¯¥äº†è§£çš„ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼Œä¸ºæ–¹ä¾¿è¿›ä¸€æ­¥çš„å­¦ä¹ åšä¸€äº›é“ºå«ã€‚&lt;/p&gt;

&lt;h2 id=&quot;1-swiftè¯­è¨€çš„å‘å±•&quot;&gt;1 Swiftè¯­è¨€çš„å‘å±•&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/images/revolution-1.jpg&quot; alt=&quot;Swift revolution&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Swift2.2 æ—¶æ¨å‡ºçš„ Playground å¯ä»¥è®©åˆå­¦è€…æ–¹ä¾¿çš„ç»ƒä¹ è¯­æ³•ï¼Œå¹¶ä¸” Playground çš„æ³¨é‡Šæ”¯æŒ Markdown è¯­æ³•ï¼Œå†™æ³¨é‡Šéå¸¸æ–¹ä¾¿ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ABI ç¨³å®šæ˜¯å¾ˆå¤šå¤§å‚é€‰æ‹©ä½¿ç”¨Swiftè¯­è¨€å¼€å‘é¡¹ç›®çš„ä¸»è¦åŸå› ã€‚å› ä¸ºä¹‹å‰ Swift ç‰ˆæœ¬ä¸å…¼å®¹ï¼ŒSwift3.0 ç¼–è¯‘çš„Framework åœ¨ Swift4.0 ä¸­éƒ½æ²¡æ³•ä½¿ç”¨ï¼Œå¿…é¡»ä¿®æ”¹ Framework çš„æºç ï¼Œé‡æ–°æ‰“åŒ…ï¼Œå¯¹äºæœ‰å¾ˆå¤šFrameworkä¾èµ–çš„å¤§å‹Appæ¥è®²è¿™å°±æ˜¯ç¾éš¾ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Swift5.5 æ”¯æŒå¼‚æ­¥è¯­æ³• &lt;code class=&quot;highlighter-rouge&quot;&gt;async/await/actor&lt;/code&gt; åœ¨ç¼–å†™å¼‚æ­¥çš„ä»£ç æ—¶ï¼Œä¼šæ›´åŠ çš„ä¼˜é›…ï¼Œé¿å…å›è°ƒåœ°ç‹±ã€‚&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;2-swiftå·¥ç¨‹åŒ–&quot;&gt;2 Swiftå·¥ç¨‹åŒ–&lt;/h2&gt;

&lt;p&gt;å¦‚æœæ˜¯é‡æ–°å¼€å‘çš„æ–°çš„ App ä½¿ç”¨ Swiftçš„è¯ï¼Œæ²¡æœ‰ä»€ä¹ˆæŠ€æœ¯å€ºï¼Œå·¥ç¨‹åŒ–æ¯”è¾ƒç®€å•ï¼Œç”šè‡³å¯ä»¥ç”¨ Swift Package Manager å®˜æ–¹çš„åŒ…ç®¡ç†å·¥å…·ã€‚ä½†æ˜¯å¦‚æœåœ¨ä¹‹å‰ç”¨ OC å¼€å‘çš„åº”ç”¨åŸºç¡€ä¸Šä½¿ç”¨ Swift çš„è¯å·¥ç¨‹åŒ–è¦åšçš„ä¸œè¥¿è¿˜æ˜¯æŒºå¤šã€‚&lt;/p&gt;

&lt;h3 id=&quot;21-moduleå·¥ç¨‹åŒ–&quot;&gt;2.1 Moduleå·¥ç¨‹åŒ–&lt;/h3&gt;

&lt;p&gt;ä»€ä¹ˆæ˜¯ModuleåŒ–ï¼Œè¯´ç™½äº†å°±æ˜¯ç¼–è¯‘å™¨çš„ä¸€ç§å¼•ç”¨æ–¹å¼ï¼Œå¾ˆå¤šè¯­è¨€ JavaScript python ç­‰ç­‰éƒ½æ˜¯æ”¯æŒ ModuleåŒ–çš„ã€‚OC è¯­è¨€æ˜¯ç»§æ‰¿äº† C çš„å¤´æ–‡ä»¶å¼•ç”¨æ–¹å¼ï¼Œåœ¨å¼•ç”¨ä¸€ä¸ª xxx.h æ–‡ä»¶æ—¶ï¼Œç¼–è¯‘å™¨ä¼šé‡æ–°ç¼–è¯‘ xxx.h æ–‡ä»¶çš„æ‰€æœ‰è¯­æ³•ã€‚è¿™æ ·æ–¹å¼ç›¸å½“äºæŠŠè¯­æ³•çš„å¤æ‚æ€§æš´éœ²ç»™äº†å¼€å‘è€…ã€‚ä¸‹é¢åˆ—ä¸¾ä¸‹ä½¿ç”¨å¤´æ–‡ä»¶å¼•ç”¨çš„å¼Šç«¯ã€‚&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;ç¼–è¯‘æ—¶é—´ä¼šå¤§å¤§å¢åŠ ï¼Œå› ä¸ºæ¯ä¸ª xxx.h æ–‡ä»¶éƒ½è¦é‡æ–°ç¼–è¯‘ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;å¤´æ–‡ä»¶ï¼Œåœ¨ç¼–è¯‘æ—¶ï¼Œå¯èƒ½ä¼šé€ æˆå¤§é‡çš„ç¬¦å·å†²çªï¼Œæ‰€ä»¥ä¸å¾—ä¸ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;#ifDef&lt;/code&gt; å®è¯­æ³•æ¥é¿å…ï¼Œå¯è¯»æ€§å¾ˆå·®ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;å¤´æ–‡ä»¶å¼•ç”¨æŠŠå„ç§è¯­è¨€çš„è¯­æ³•æš´éœ²å‡ºæ¥ï¼Œæ¯”å¦‚ C++ å¼•ç”¨ C è¯­è¨€çš„æ—¶å€™ï¼Œä¸å¾—å†™å„ç§å…¼å®¹è¯­æ³• &lt;code class=&quot;highlighter-rouge&quot;&gt;extern C&lt;/code&gt;ã€‚å¦‚æœèƒ½ä½¿ç”¨ Module çš„æ–¹å¼ï¼Œç»Ÿä¸€å¼•ç”¨çš„æ¥å£ï¼Œå°±å¯ä»¥é¿å…è¿™ç§é—®é¢˜ã€‚&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æ‰€ä»¥è‹¹æœåœ¨2012 å¹´çš„æ—¶å€™åœ¨LLVMç¼–è¯‘å™¨è§„èŒƒä¸­æå‡ºäº†ModuleåŒ–çš„å¼•ç”¨æ–¹å¼ã€‚&lt;a href=&quot;https://clang.llvm.org/docs/Modules.html&quot;&gt;Clang Module&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;OC è¯­è¨€å·²ç»æ”¯æŒäº† Clang Module çš„å¼•ç”¨æ–¹å¼ï¼Œä½†æ˜¯éœ€è¦å¼€å‘è€…åœ¨ç¼–è¯‘é¡¹ç›®çš„æ—¶å€™é€‰æ‹©æ”¯æŒ Module åŒ–ã€‚ï¼ˆ2020å¹´çš„C++20ç‰ˆæœ¬ä¹Ÿæ”¯æŒäº†Clang Moduleï¼‰&lt;/p&gt;

&lt;p&gt;ç”±äº Swift å·¥ç¨‹ Framework æ¨¡å—çš„å¼•ç”¨å¼ºåˆ¶ä½¿ç”¨ Module åŒ–ï¼Œæ‰€ä»¥æ‰€æœ‰çš„ OC çš„ Framework å¿…é¡»éƒ½è¦æ”¯æŒã€‚&lt;/p&gt;

&lt;h3 id=&quot;22-moduleåŒ–çš„é—®é¢˜&quot;&gt;2.2 ModuleåŒ–çš„é—®é¢˜&lt;/h3&gt;

&lt;p&gt;è‹¹æœåœ¨ Module åŒ–æ—¶ï¼Œä¹Ÿæè¿‡Moduleçš„ç¼ºç‚¹ã€‚&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;æ²¡æœ‰å¾ˆå¥½çš„ç‰ˆæœ¬æ§åˆ¶ï¼Œå¾ˆå¤šè¯­è¨€åŸºæœ¬éƒ½æœ‰ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼Œä½†æ˜¯å¯¹äº Cã€C++ ä¸€ç›´æ²¡æœ‰å¾ˆå¥½çš„ç‰ˆæœ¬æ§åˆ¶å·¥å…·ã€‚Swift ç‰ˆæœ¬æ§åˆ¶ä¸€ç›´åšçš„ä¸å¥½ï¼Œç›´åˆ° 5.1 ABIç¨³å®šåï¼Œç®—æ˜¯è§£å†³äº†ç‰ˆæœ¬æ§åˆ¶çš„é—®é¢˜ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;æ²¡æœ‰ namespace çš„æ¦‚å¿µï¼Œä¾‹å¦‚ç›¸åŒçš„ class æˆ–è€… structï¼Œåœ¨ä¸åŒçš„ Moduleä¸‹ä¼šæœ‰ç¬¦å·å†²çªã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ Swift çš„å‘½åç©ºé—´åŸºäº Module è€Œä¸æ˜¯æ˜¾å¼æŒ‡æ˜ namespaceï¼Œæ¯ä¸ª Module ä»£è¡¨äº† Swift ä¸­çš„ä¸€ä¸ªå‘½åç©ºé—´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸åŒçš„ Framework é‡Œçš„ struct å’Œ class æ˜¯å¯ä»¥ä¸€æ ·çš„ã€‚&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;23-å¼•ç”¨cå’Œcçš„é—®é¢˜&quot;&gt;2.3 å¼•ç”¨Cå’ŒC++çš„é—®é¢˜&lt;/h3&gt;

&lt;p&gt;ç”±äº Swift è¯­è¨€å®Œå…¨ç‹¬ç«‹çš„è¯­æ³•ï¼Œä¸åƒ OC æ˜¯åŸºäºCè¯­è¨€çš„åŸºç¡€ä¸Šå¼€å‘çš„ã€‚æ‰€ä»¥ Swift åœ¨å¼•ç”¨ Cå’ŒC++æ—¶ï¼Œéœ€è¦èµ° OC æ¡¥æ¥æ‰è¡Œï¼Œç±»ä¼¼äº Java è°ƒç”¨ C++ ä»£ç éœ€è¦èµ° JNI ä¸€æ ·ã€‚&lt;/p&gt;

&lt;h2 id=&quot;3-swift-è¯­æ³•&quot;&gt;3 Swift è¯­æ³•&lt;/h2&gt;

&lt;p&gt;Swift ç”±äºæ˜¯å¼€æºçš„ï¼Œæ¯ä¸ªè¯­æ³•çš„ç”±æ¥ä¹Ÿéƒ½æ˜¯æœ‰æ–‡æ¡£å¯æŸ¥çš„ã€‚æœ‰å…´è¶£çš„å¯ä»¥çœ‹ä¸‹ Swift æ‰€æœ‰åŸºç¡€ç±»å‹çš„Metaå®šä¹‰ &lt;a href=&quot;https://github.com/apple/swift/blob/main/docs/ABI/TypeMetadata.rst&quot;&gt;TypeMetaData&lt;/a&gt;å’Œ &lt;a href=&quot;https://docs.swift.org/swift-book/ReferenceManual/AboutTheLanguageReference.html&quot;&gt;Swift è¯­æ³•è®¾è®¡æ‰‹å†Œ&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹é¢ä¸»è¦ä»‹ç»ä¸‹ Swift è¯­è¨€çš„ä¸€äº›é‡è¦æ–°ç‰¹ç‚¹ã€‚ä»¥åŠå’Œ OC è¯­æ³•çš„ä¸åŒä¹‹å¤„ã€‚å¹³æ—¶å¼€å‘ä¸­å¯èƒ½ä¼šç»å¸¸é‡åˆ°ã€‚å¦‚æœè¦è¿›ä¸€æ­¥å­¦ä¹ ï¼Œå¯ä»¥çœ‹ &lt;a href=&quot;https://docs.swift.org/swift-book/&quot;&gt;Swift è¯­æ³•å®˜æ–¹æ•™ç¨‹&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;31-optional-è¯­æ³•&quot;&gt;3.1 Optional è¯­æ³•&lt;/h3&gt;

&lt;p&gt;åŒ…è£…ç±»å‹ï¼Œæ‰€æœ‰çš„ç±»å‹(åŒ…å«åŸºç¡€ç±»å‹ Intã€Float ç­‰ç­‰)æˆ‘ä»¬å…ˆçœ‹è‹¹æœçš„å®šä¹‰ã€‚&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kd&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Optional&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Wrapped&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;none&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;some&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Wrapped&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åœ¨ OC ä¸­æˆ‘ä»¬å¾€å¾€è®¤ä¸º int float è¿™ç§åŸºç¡€ç±»å‹ä¸åƒNSStringä¸€æ ·åº”è¯¥æ²¡æœ‰ nil çš„æ¦‚å¿µã€‚ä½†æ˜¯åœ¨ swift é‡Œé¢æ‰€æœ‰çš„ç±»å‹éƒ½æœ‰nilçš„æ¦‚å¿µã€‚çœ‹ä¸‹è¿™ä¸ªå†™æ³• &lt;code class=&quot;highlighter-rouge&quot;&gt;var int test = 0&lt;/code&gt; å’Œ ` var int test? = nil&lt;code class=&quot;highlighter-rouge&quot;&gt; æ˜¯å®Œå…¨ä¸åŒçš„ã€‚å…¶ä¸­æœ‰ &lt;/code&gt;?&lt;code class=&quot;highlighter-rouge&quot;&gt; ç»“å°¾çš„è¡¨ç¤ºçš„å˜é‡  &lt;/code&gt;test`æ˜¯ Optionalç±»å‹ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥åšè§£åŒ…(unWrapped)çš„æ“ä½œ,å¦‚ä½•æ‹†åŒ…å‘¢ï¼Ÿå¦‚ä¸‹é¢çš„å†™æ³•ï¼š&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸ºäº†éªŒè¯Optionalç±»å‹çš„å˜é‡å’Œnon-optionalçš„åŒºåˆ«ï¼Œæˆ‘ä»¬å¯ä»¥è¿™äº›å°è¯•ä¸‹ã€‚&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç¼–è¯‘å™¨å°±ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ã€‚ &lt;code class=&quot;highlighter-rouge&quot;&gt;error: initializer for conditional binding must have Optional type, not 'Int'
if let result = test {&lt;/code&gt; ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªè¯­æ³•å¯¹swiftçš„å®‰å…¨æ€§å°¤å…¶é‡è¦ï¼ŒOC ä¸­ç»å¸¸éœ€è¦æ·»åŠ ä¸€äº›å®‰å…¨çš„æ°”å«ç±»å¯¹nilåšæ£€æµ‹ï¼Œswift åªè¦å®šä¹‰ä¸€ä¸ªå˜é‡ä¸º Optionalçš„è¯ï¼Œä½ å°±çŸ¥é“è¿™ä¸ªå˜é‡æ˜¯å¦å¯èƒ½ä¸ºç©ºï¼Œè®¿é—®æ—¶éœ€è¦å¦‚ä¸Šé¢çš„å†™æ³•å°±å¯ä»¥äº†ã€‚å½“ç„¶è§£åŒ…ä¹Ÿæœ‰ä¸€äº›ä¾¿æ·çš„è¯­æ³•ç³–å¦‚ä¸‹å†™æ³•ï¼š&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;??&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æ‰€ä»¥å˜é‡å®šä¹‰ä¸ºOptionalçš„æ—¶å€™ï¼Œåœ¨ä½¿ç”¨æ—¶å·²ç»è¦è§£åŒ…ä½¿ç”¨ï¼Œè¿™æ ·å°±é¿å…äº†ç©ºæŒ‡é’ˆçš„é—®é¢˜ã€‚Swift ä¸ºäº†å…¼å®¹ä¸€äº›ä¾¿æ·çš„è¯­æ³•ï¼Œå®šä¹‰äº†ä¸€ç§å¼ºåˆ¶è§£åŒ…çš„æ“ä½œ &lt;code class=&quot;highlighter-rouge&quot;&gt;!&lt;/code&gt;ï¼Œè¡¨ç¤ºè§£åŒ…çš„å˜é‡ä¸€å®šä¸ä¸ºnilï¼Œä¸Šé¢çš„ä¾‹å­ä¹Ÿå¯ä»¥è¿™æ ·å†™:&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;!&lt;/code&gt; è¯­æ³•å°¤å…¶å°å¿ƒï¼Œå½“&lt;code class=&quot;highlighter-rouge&quot;&gt;test=0&lt;/code&gt; è¿™è¡Œä»£ç è¢«æ³¨é‡Šæ—¶ï¼Œå°±ä¼šå´©æºƒã€‚&lt;/p&gt;

&lt;h3 id=&quot;32-structçš„ä½¿ç”¨&quot;&gt;3.2 structçš„ä½¿ç”¨&lt;/h3&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kd&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;mutating&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;changeName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šé¢å°±æ˜¯ä¸€ä¸ªç®€å•çš„ struct å®šä¹‰ï¼Œstruct æ‰€æœ‰çš„èµ‹å€¼éƒ½æ˜¯copyçš„ã€‚&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; 
 &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;joe&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;joe&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

 &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;joeCopy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;joe&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¹¶ä¸”ä¸€æ—¦å®šä¹‰ struct ä¸­çš„å˜é‡ä¸ºå¸¸é‡ï¼Œå°±æ— æ³•æ”¹å˜å˜é‡çš„å€¼ï¼Œå¦‚æœéœ€è¦æ”¹å˜å°±è¦ç”¨ä¸‹é¢çš„å†™æ³•ã€‚&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
 &lt;span class=&quot;kd&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;mutating&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;changeName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;joe&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;joe&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;joe&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;changeName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;allen&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Swift ä¸­å¸¸è§çš„åŸºæœ¬çš„ç±»å‹ Int Float ç­‰ç­‰éƒ½æ˜¯structçš„ã€‚structè®¾è®¡ä¸»è¦æ˜¯å­˜å‚¨æ•°æ®ä½¿ç”¨ï¼Œæ•°æ®ä¸€æ—¦è¢«åˆ›å»ºä¹‹åï¼Œå°±å¾ˆå°‘è¢«ä¿®æ”¹ï¼Œæˆ‘ä»¬åªæ˜¯éœ€è¦ä½¿ç”¨è¿™äº›å¯¹è±¡çš„å€¼å°±è¡Œã€‚è€Œ class ä¸€èˆ¬è¡¨ç¤ºçš„åœ¨ä¸€å®šçš„ç”Ÿå‘½å‘¨æœŸå†…ï¼Œæ•°æ®çŠ¶æ€ä¸åœçš„æ”¹å˜ã€‚è¿™ç‚¹å°±æ˜¯é€‰æ‹©structå’Œclassçš„åŸºæœ¬åŸåˆ™ã€‚&lt;/p&gt;

&lt;h3 id=&quot;33-æšä¸¾çš„ä½¿ç”¨&quot;&gt;3.3 æšä¸¾çš„ä½¿ç”¨&lt;/h3&gt;

&lt;p&gt;Swift æšä¸¾éå¸¸å¼ºå¤§ï¼ŒåŠŸèƒ½å ªæ¯”ç±»çš„åŠŸèƒ½ã€‚ä¸‹é¢ä»‹ç»ä¸‹æšä¸¾çš„å†™æ³•ã€‚&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kd&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Direct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;up&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;up&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;down&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;down&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;left&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;left&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;right&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;right&quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æšä¸¾åœ¨ Swift ä¸­æœ¬è´¨ä¸Šæ˜¯å’Œstructã€class é½å¹³çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå®šä¹‰æšä¸¾å¦‚ä¸‹:&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kd&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Equatable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;ExpressibleByStringLiteral&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;level&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;
    
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;lhs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;rhs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Bool&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lhs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rhs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lhs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;level&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rhs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;level&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stringLiteral&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;components&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;components&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;separatedBy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;,&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;components&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;components&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;level&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;components&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;??&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;primary&quot;&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;level&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unicodeScalarLiteral&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;stringLiteral&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;extendedGraphemeClusterLiteral&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;stringLiteral&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Engineer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;primary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;primary,0&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;junior&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;junior,1&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;senior&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;senior,2&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;professor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;professor,3&quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;joe&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Engineer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;junior&lt;/span&gt;

&lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;joe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è®²åˆ°æšä¸¾ç±»å‹ï¼Œå°±ä¸å¾—ä¸è¯´ Swift çš„æ¨¡å¼åŒ¹é…è¿™ä¸ªç‰¹ç‚¹ï¼Œä»€ä¹ˆæ˜¯æ¨¡å¼åŒ¹é…ï¼Œå°±æ˜¯ä½¿ç”¨ä¸€ç§é€šç”¨çš„æ¨¡å¼ï¼Œæ¥è§£æ„æ•°æ®ä¸­ç›¸åº”ç±»å‹çš„å…·ä½“å€¼ã€‚å¬èµ·æ¥æœ‰ç‚¹æŠ½è±¡ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œå°±æ˜¯æ¨¡å¼åŒ¹é…çš„ä¸€ç§ï¼Œä»–æ˜¯åŒ¹é…å®šä¹‰å¥½çš„å­—ç¬¦ä¸²çš„æ¨¡å¼ï¼Œè§£æ„å‡ºå­—ç¬¦ä¸²ä¸­ç¬¦åˆæ¨¡å¼çš„å€¼ï¼Œå¦‚æœæ— æ³•åŒ¹é…å°±ä»£è¡¨è§£æ„å¤±è´¥ã€‚æ ¹æ®&lt;a href=&quot;https://docs.swift.org/swift-book/ReferenceManual/Patterns.html&quot;&gt;Swiftçš„æ¨¡å¼åŒ¹é…çš„æ–‡æ¡£&lt;/a&gt;ä¸­çš„è®²è§£ï¼Œæ¨¡å¼åŒ¹é…åŒ…å«ä¸‹é¢å‡ ç§ã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;é€šé…ç¬¦æ¨¡å¼&lt;/li&gt;
  &lt;li&gt;æ ‡è¯†ç¬¦æ¨¡å¼&lt;/li&gt;
  &lt;li&gt;å€¼ç»‘å®šæ¨¡å¼&lt;/li&gt;
  &lt;li&gt;å…ƒç»„æ¨¡å¼&lt;/li&gt;
  &lt;li&gt;æšä¸¾åŒ¹é…æ¨¡å¼&lt;/li&gt;
  &lt;li&gt;å¯é€‰æ¨¡å¼&lt;/li&gt;
  &lt;li&gt;ç±»å‹è½¬æ¢æ¨¡å¼&lt;/li&gt;
  &lt;li&gt;è¡¨è¾¾å¼æ¨¡å¼&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;è¿™å‡ ç§æ¨¡å¼åŒ¹é…ä¸­ï¼Œæˆ‘ä»¬è¿™é‡Œé‡ç‚¹æ‹¿æšä¸¾åŒ¹é…æ¨¡å¼ä»‹ç»ï¼Œå…¶ä»–çš„æœ¬è´¨ä¸ŠåŸç†æ˜¯ä¸€æ ·çš„ã€‚æšä¸¾åŒ¹é…æ˜¯å½“ç¼–è¯‘å™¨è¯†åˆ« case å…³é”®å­—æ—¶ï¼Œä¼šè§£æ„ case åé¢çš„å˜é‡å’Œè¡¨è¾¾å¼ï¼Œæ¥åŒ¹é…å˜é‡çš„å…·ä½“å€¼ï¼Œå¦‚æœæˆåŠŸå°±è¿”å›YESï¼Œå¦åˆ™å°±è¿”å›NOã€‚æ‰€ä»¥æ¨¡å¼åŒ¹é…å¯ä»¥è¡¨ç¤ºå¦‚ä¸‹ã€‚&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;~=&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;pattern&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Bool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Bool&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;pattern&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;é‚£æ¨¡å¼åŒ¹é…çš„ç›®çš„æ˜¯ä¸ºäº†å¹²ä»€ä¹ˆçš„ï¼Œå‡å°‘ç¨‹åºå‘˜çš„ä»£ç é‡ã€‚åœ¨ OC å½“æˆ‘ä»¬é‡åˆ°ä¸çŸ¥é“çš„ç±»å‹æ—¶ï¼Œéœ€è¦è¿™æ ·å†™ã€‚&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;LiLei&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isKindOf&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSNumber&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;%@&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;swift æœ‰äº†æ¨¡å¼åŒ¹é…å¯ä»¥è¿™æ ·å†™ã€‚&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Any&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šé¢çš„ä¾‹å­ä¸­ case è¯­å¥åé¢çš„è¡¨è¾¾å¼çš„æ„æ€æ˜¯éœ€è¦ç¬¦åˆ Int ç±»å‹çš„æ¨¡å¼ï¼Œè¿™æ ·ç¼–è¯‘å™¨å°±ä¼šè‡ªåŠ¨åˆ¤æ–­ä»listå–å¾—çš„æ¯ä¸ªæ•°æ®ï¼Œæ˜¯å¦æ˜¯Intç±»å‹å¦‚æœæ˜¯å°±èµ‹å€¼ç»™resultã€‚ç”šè‡³è¿˜å¯ä»¥å¢åŠ ä¸€ä¸ª where çš„åŒ¹é…æ¨¡å¼å¦‚ä¸‹&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;where&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æ‰€ä»¥æœ‰äº†åŒ¹é…æ¨¡å¼åï¼Œä»£ç ä¼šå˜çš„éå¸¸çš„ç®€æ´ã€‚&lt;/p&gt;

&lt;h3 id=&quot;34-protocolçš„ä½¿ç”¨&quot;&gt;3.4 Protocolçš„ä½¿ç”¨&lt;/h3&gt;

&lt;p&gt;Swift æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„è®¾è®¡ç†å¿µå°±æ˜¯é¢å‘åè®®ç¼–ç¨‹ã€‚ä¹‹å‰å†™è¿‡ä¸€éåšå®¢åˆ†æè¿‡&lt;a href=&quot;https://mengtnt.com/2020/09/14/coredata-swift.html&quot;&gt;é¢å‘åè®®ç¼–ç¨‹&lt;/a&gt;ã€‚é¢å‘åè®®æœ¬è´¨ä¸Šå°±æ˜¯è®©å¤§å®¶å°‘ç”¨ç»§æ‰¿ï¼Œå¤šç”¨ç»„åˆçš„æ–¹å¼æ¥å®ç°ä¸€äº›å¤æ‚çš„åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚ä½•å®ç°ä¸Šé¢è¯´çš„ç†å¿µï¼Œæœ¬è´¨ä¸Šå°±æ˜¯æŠŠå…±æœ‰çš„æ–¹æ¡ˆæŠ½ç¦»å‡ºæ¥å®šä¹‰æˆåè®®ï¼Œç„¶åå†é€šè¿‡extensionçš„è¯­æ³•å®ç°è¿™ä¸ªåè®®ã€‚&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kd&quot;&gt;protocol&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;FatherProtocol&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;myChildName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;extension&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;FatherProtocol&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;myChildName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;xxx&quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;35-é”™è¯¯å¤„ç†&quot;&gt;3.5 é”™è¯¯å¤„ç†&lt;/h3&gt;

&lt;p&gt;Swift è¯­è¨€ç»ˆäºæœ‰äº†ï¼Œdo-catchè¯­å¥å¤„ç†é”™è¯¯çš„å½¢å¼ã€‚&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expression&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;statements&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pattern&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;statements&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pattern&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;where&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;condition&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;statements&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;statements&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™ä¸ªå¼‚å¸¸å¤„ç†å’Œå…¶ä»–è¯­è¨€æ²¡æœ‰å¤ªå¤§çš„åŒºåˆ«ï¼Œä»è¯­æ³•çš„å®šä¹‰ä¸Šï¼Œå¯ä»¥çœ‹å‡ºæ¥é”™è¯¯å¤„ç†ï¼Œä¹Ÿæ˜¯æœ‰æ¨¡å¼åŒ¹é…çš„ç‰¹ç‚¹çš„ã€‚ä¸¾ä¸ªç½‘ç»œå¤„ç†çš„ç®€å•ä¾‹å­å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kd&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;NetError&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Error&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;NetBroken&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;ServerError&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;ClientError&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;sucess&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sucess&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;content&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;NetError&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;NetBroken&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;xxxx&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;er&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;er&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// è¿™ä¸ªæ˜¯ä¾¿æ·çš„å†™æ³•&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;xxxx&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™é‡Œä»‹ç»ä¸‹é”™è¯¯å¤„ç†ä¸­ï¼Œå¸¸ç”¨çš„deferå…³é”®å­—ï¼Œå¯ä»¥åœ¨å½“å‰èŒƒå›´é€€å‡ºæ—¶ï¼Œå»¶è¿Ÿæ‰§è¡ŒæŒ‡å®šçš„æ¸…ç†æ“ä½œã€‚å¾€å¾€æ˜¯åœ¨é”™è¯¯å¤„ç†åˆ†æ”¯æ¯”è¾ƒå¤šæ—¶ï¼Œä½¿ç”¨è¿™ä¸ªèƒ½åŠ›ï¼Œå¯ä»¥èŠ‚çœå¾ˆå¤šä»£ç ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;processFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;defer&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;clean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;xxxx&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;er&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;er&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;


&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;36-é«˜é˜¶å‡½æ•°&quot;&gt;3.6 é«˜é˜¶å‡½æ•°&lt;/h3&gt;

&lt;p&gt;Swift æ˜¯éå¸¸é‡è§†å‡½æ•°å¼ç¼–ç¨‹çš„ï¼Œæ‰€ä»¥é«˜é˜¶å‡½æ•°åœ¨ Swift ç»å¸¸ä½¿ç”¨ï¼Œä¾‹å¦‚ map flatMap è¿™ç§æ•°ç»„æ“ä½œçš„å‡½æ•°ï¼Œæ˜¯å®˜æ–¹æ¨èçš„æ›¿ä»£ for å¾ªç¯æ–¹å¼ã€‚å¹³æ—¶æˆ‘ä»¬é«˜é˜¶å‡½æ•°åº”ç”¨æœ€å¤šçš„åº”è¯¥å°±æ˜¯ é—­åŒ…(Closure)äº†ã€‚å¦‚æœäº†è§£ OC çš„ blockï¼Œç›¸ä¿¡å¾ˆå®¹æ˜“æ‡‚ã€‚ä¸‹é¢å°±æ˜¯ä¸€ä¸ªç®€å•çš„ Swift Closure å®šä¹‰:&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;block&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;0&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™é‡Œæ˜¯ Closure ä»‹ç»çš„&lt;a href=&quot;https://docs.swift.org/swift-book/LanguageGuide/Closures.html&quot;&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;ã€‚å…³äº Closure ä½¿ç”¨çš„ä¸€äº›é«˜çº§ç”¨æ³•ï¼Œå¯ä»¥å‚çœ‹ Swift æ–‡æ¡£ä¸­ &lt;a href=&quot;https://docs.swift.org/swift-book/ReferenceManual/Expressions.html&quot;&gt;Expressions&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;æ–‡æ¡£ä¸Š Closure çš„å°¾éšé—­åŒ…ï¼Œå‚æ•°çœç•¥ç­‰ç­‰å„ç§ç”¨æ³•éƒ½å¾ˆè¯¦ç»†ï¼Œè¿™é‡Œä¸å†ä»‹ç»ã€‚æƒ³é‡ç‚¹è¯´ä¸‹ Swift é«˜é˜¶å‡½æ•°ä¸­å¸¸ç”¨çš„æ•è·åˆ—è¡¨ã€‚å› ä¸º Swift çš„å†…å­˜ç®¡ç†ä¾æ—§æ˜¯ç”¨å¼•ç”¨è®¡æ•°ï¼Œä¸åƒ java çš„æ ‡è®°åˆ†ä»£æ¸…ç†çš„æ–¹æ³•ã€‚æ‰€ä»¥ Swift ä¾æ—§æœ‰å¤§é‡çš„å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚ä¸¾ä¸ªä¾‹å­:&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Human&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;lanuage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Objc&quot;&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)?&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;deinit&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;deinit&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;recycle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;code&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lanuage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;code&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;code&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;human&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Human&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Human&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;human&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lanuage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Swift&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;human&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;recycle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;human&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;nil&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç„¶è€Œä½ ä¼šå‘ç°æ§åˆ¶å°é‡Œé¢å¹¶æ²¡æœ‰è¾“å‡º deinitï¼Œhuman è¿™ä¸ªå®ä¾‹è¢«å¾ªç¯å¼•ç”¨äº†ã€‚Swift åœ¨ç±»é‡Œé¢é»˜è®¤ä¼šæŠŠselfå˜é‡æ”¾åˆ°æ•è·åˆ—è¡¨é‡Œé¢ï¼Œä¸Šé¢çš„é—­åŒ…çš„å†™æ³•å’Œä¸‹é¢æœ¬è´¨ä¸Šæ˜¯ç­‰åŒçš„ã€‚&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;code&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lanuage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æ‰€ä»¥è¦åœ¨æ•è·åˆ—è¡¨ä¸­ï¼Œå¯¹ self å˜é‡åšå¼±å¼•ç”¨å£°æ˜ï¼Œå› ä¸ºæ˜¯å¼±å¼•ç”¨ï¼Œé—­åŒ…åœ¨ä½¿ç”¨è¿™ä¸ªå˜é‡æ—¶å°±è¦å®šä¹‰ä¸º optionalï¼Œå› ä¸ºæœ‰å¯èƒ½è¿™ä¸ªå˜é‡ä¸ºç©ºï¼Œæ‰€ä»¥æˆ‘ä»¬æ›´æ”¹ä¸Šé¢çš„ä»£ç å¦‚ä¸‹:&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;code&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;weak&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lanuage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å†è¿è¡Œå°±å¯ä»¥çœ‹åˆ°æ§åˆ¶å°è¾“å‡º deinitï¼Œå¦å¤–åœ¨æ§åˆ¶ self å¼•ç”¨çš„æ—¶å€™è¿˜æœ‰ä¸ªå…³é”®å­— unownedï¼Œè¿™ä¸ªå…³é”®å­—å’Œ weak çš„åŒºåˆ«æ˜¯ï¼šunowned åŒæ ·ä¸ä¼šå¼ºå¼•ç”¨å˜é‡ selfï¼Œä½†æ˜¯å®ƒä¸ä¼šæ”¹å˜å˜é‡çš„ç±»å‹ä¸º optionalï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœå˜é‡selfè¢«é‡Šæ”¾åï¼Œé—­åŒ…ä¸­ä»ç„¶ä½¿ç”¨çš„è¯ä¼šå´©æºƒã€‚æ‰€ä»¥åœ¨ç”¨ unowned å…³é”®å­—çš„æ—¶å€™ï¼Œè¦ä¿è¯é—­åŒ…åœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œselfä¸ä¼šè¢«é‡Šæ”¾ã€‚&lt;/p&gt;

&lt;h3 id=&quot;37-æ¨¡æ¿ç¼–ç¨‹&quot;&gt;3.7 æ¨¡æ¿ç¼–ç¨‹&lt;/h3&gt;

&lt;p&gt;æ¨¡æ¿ç¼–ç¨‹ä¹Ÿæ˜¯ Swift ä¸€å¤§ç‰¹ç‚¹ï¼Œå¯¹äºä»£ç é‡ç”¨æ¥è®²éå¸¸æœ‰ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;Swift çš„æ¨¡æ¿ç¼–ç¨‹å€Ÿé‰´äº† C++ å¾ˆå¤šç‰¹æ€§ï¼Œåœ¨å­¦ä¹  Swift æ¨¡æ¿ä¸­ï¼Œå¯ä»¥äº†è§£ Swift æ¨¡æ¿ç¼–ç¨‹ä¸­ç±»å‹æ¨æ–­çš„æ–¹å¼ï¼Œåœ¨å†™å‡ºæ¥ä¸€äº›æ¨¡å—ï¼Œç±»å‹æ¨æ–­å‡ºç° Confuse æŠ¥é”™çš„æ—¶å€™ï¼Œå¯ä»¥æ›´å¥½çš„ä¿®æ”¹ã€‚å¦‚æœæ„Ÿå…´è¶£å¯ä»¥çœ‹ä¸‹ Swift ç±»å‹æ¨æ–­çš„ç®—æ³• &lt;a href=&quot;https://wikichi.icu/wiki/Hindley%E2%80%93Milner_type_system&quot;&gt;Hindley-Milner&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æ¨¡æ¿ç¼–ç¨‹åœ¨åšä¸€äº›åŸºç¡€åº“æ—¶ï¼Œéå¸¸åˆç”¨ã€‚ç›®å‰æˆ‘ä»¬ä½¿ç”¨ Swift ä¸»è¦æ˜¯ä¸ºäº†åšä¸Šå±‚çš„ä¸šåŠ¡ï¼Œè¿˜ä¸éœ€è¦å¾ˆæ·±å…¥çš„äº†è§£æ¨¡æ¿ç¼–ç¨‹ã€‚è¿™é‡Œå°±ä¸è¯¦ç»†ä»‹ç»ï¼Œæ„Ÿå…´è¶£å¯ä»¥çœ‹ä¸‹å®˜æ–¹æ•™ç¨‹ &lt;a href=&quot;https://docs.swift.org/swift-book/LanguageGuide/Generics.html&quot;&gt;Swift æ¨¡æ¿ç¼–ç¨‹&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;38-å¹¶å‘ç¼–ç¨‹&quot;&gt;3.8 å¹¶å‘ç¼–ç¨‹&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;async/awaitç”¨æ³•&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å’Œå¾ˆå¤šè¯­è¨€çš„async/awaitçš„è¯­æ³•ï¼Œå‡ ä¹ä¸€æ ·ã€‚å¯ä»¥è§£å†³å›è°ƒåœ°ç‹±åœ°ç‹±é—®é¢˜ï¼Œä½¿ä»£ç çš„å¯è¯»æ€§æ›´å¼ºã€‚è¿™é‡Œå¼•ç”¨ä¸‹å®˜æ–¹æ–‡æ¡£çš„ä¾‹å­å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;nf&quot;&gt;listPhotos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;inGallery&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Summer Vacation&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;photoNames&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;sortedNames&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;photoNames&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;sorted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sortedNames&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;downloadPhoto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;named&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;photo&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;photo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä½¿ç”¨async/awaitè¯­æ³•åï¼Œä»£ç ä¼šæ›´ç®€æ´ã€‚&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;listPhotos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;inGallery&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// ... some asynchronous networking code ...&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;photoNames&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;listPhotos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;inGallery&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Summer Vacation&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;sortedNames&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;photoNames&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;sorted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sortedNames&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;photo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;downloadPhoto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;named&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nf&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;photo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™é‡Œæ˜¯&lt;a href=&quot;https://docs.swift.org/swift-book/LanguageGuide/Concurrency.html&quot;&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;æœ‰æ›´è¯¦ç»†çš„ä»‹ç»ã€‚&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;actorç”¨æ³•&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;actor æœ¬è´¨ä¸Šä¸ºäº†è§£å†³å¤šçº¿ç¨‹åŒæ­¥çš„é—®é¢˜ï¼Œå®šä¹‰ä¸º actor çš„ç±»ï¼Œæ‰€æœ‰çš„å±æ€§å’Œæ“ä½œæœ¬è´¨ä¸Šéƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œé»˜è®¤éƒ½æ˜¯åŠ é”çš„ã€‚actor å¹¶å‘æ¨¡å‹ï¼Œæ˜¯å¾ˆå¤šå‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ï¼Œå¤šçº¿ç¨‹å¤„ç†çš„æ–¹å¼ï¼Œå¯ä»¥åœ¨ç¼–ç¨‹è¯­è¨€çš„å±‚é¢ä¸Šé¿å…äº†å¤šçº¿ç¨‹é”ä½¿ç”¨çš„é—®é¢˜ã€‚actoræ¨¡å¼çš„ç”±æ¥å¯ä»¥çœ‹&lt;a href=&quot;https://zh.wikipedia.org/zh-cn/%E6%BC%94%E5%91%98%E6%A8%A1%E5%9E%8B&quot;&gt;actoræ¨¡å¼&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;n&quot;&gt;actor&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;TemperatureLogger&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;measurements&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;private(set)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;

    &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;measurement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;label&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;label&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;measurements&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;measurement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;measurement&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç”±äºä¸€ä¸ª actor æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œå¯¹ actor çš„æ“ä½œï¼Œå°±ç›¸å½“äºæ¶ˆæ¯äº‹ä»¶çš„å¤„ç†ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ä½¿ç”¨ actor å¯¹è±¡æ—¶ï¼Œéœ€è¦é…åˆ aync/await è¯­æ³•ä½¿ç”¨ï¼Œé€šè¿‡awaitæ¥ç­‰å¾…æ¶ˆæ¯å¤„ç†çš„ç»“æœã€‚&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;logger&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;TemperatureLogger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Outdoors&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;measurement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// Prints &quot;25&quot;&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;39-swift-lint&quot;&gt;3.9 swift lint&lt;/h3&gt;

&lt;p&gt;Swift è¯­æ³•æ£€æµ‹å¯ä»¥ç”¨&lt;a href=&quot;https://github.com/realm/SwiftLint&quot;&gt;Realmè¯­æ³•è§„èŒƒ&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;4-swiftä¸åŒè¯­è¨€çš„æ¡¥æ¥&quot;&gt;4 Swiftä¸åŒè¯­è¨€çš„æ¡¥æ¥&lt;/h2&gt;

&lt;p&gt;Swift è¯­è¨€æ¡¥æ¥Cå’ŒC++å¿…é¡»é€šè¿‡OCæ¥åšï¼ŒSwift å®šä¹‰çš„å‡½æ•°å¦‚æœéœ€è¦ OC å¼•ç”¨çš„è¯ï¼Œå¿…é¡»åŠ ä¸Š @obj çš„è¯­æ³•æ ‡æ³¨ï¼ŒSwiftæ‰€æœ‰@å¼€å¤´çš„ä»£è¡¨çš„æ˜¯è¯­æ³•æ ‡æ³¨ï¼Œæœ‰ç‚¹åƒ java ä¸­çš„è¯­æ³•æ ‡æ³¨ï¼Œæ˜¯åœ¨ç¼–è¯‘æœŸé—´ï¼Œå¯ä»¥æ”¹å˜ASTè¯­æ³•ä¸€äº›ç»“æ„ã€‚@objå°±ä»£è¡¨ï¼Œåœ¨ç¼–è¯‘çš„ AST ä¸­ï¼Œæ’å…¥ OC çš„å‡½æ•°å®šä¹‰ï¼Œä¾¿äº OC çš„å®šä¹‰ã€‚å…¶å®æ ‡è®°è¯­æ³•åœ¨ SwiftUI ä¸­å¤§é‡ä½¿ç”¨ï¼Œå…·ä½“å¯ä»¥äº†è§£ @Stateè¯­æ³•çš„ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œå†è¯´ä¸‹ Swift å¼•ç”¨ OC å˜é‡æ—¶ï¼Œéœ€è¦æ³¨æ„ &lt;code class=&quot;highlighter-rouge&quot;&gt;nonnull&lt;/code&gt; è¿™ä¸¤ç§å½¢å¼åœ¨Swiftä¸­ä¼šè¢«è¯†åˆ«ä¸ºéOptionalç±»å‹ï¼Œå¦‚æœå¼ºåˆ¶è§£åŒ…å°±ä¼šå´©æºƒã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-oc&quot;&gt;@property (nonatomic, strong,) NSString *name;
@property (nonatomic, strong, nonnull) NSString *name;

@property (nonatomic, strong, nullable) NSString *name;

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¹¶ä¸” Swift ä¸­çš„ struct å’Œ enum ç±»å‹ï¼ŒOCæ˜¯æ— æ³•å¼•ç”¨çš„ã€‚æ‰€ä»¥Swiftçš„åº“ï¼Œå¦‚æœæƒ³æš´éœ²å‡ºOCçš„æ¥å£ï¼Œå…¼å®¹æ€§è¿˜æ˜¯å¾ˆå·®çš„ã€‚&lt;/p&gt;

&lt;h3 id=&quot;41-swiftçš„patchèƒ½åŠ›&quot;&gt;4.1 Swiftçš„patchèƒ½åŠ›&lt;/h3&gt;

&lt;p&gt;ç›®å‰Swift patchèƒ½åŠ›è¿˜æ˜¯æ¯”è¾ƒå¼±çš„ï¼Œä¸€ç§æ–¹å¼é€šè¿‡æŠŠSwiftå‡½æ•°ï¼Œé€šè¿‡æ¡¥æ¥æˆobjçš„æ–¹æ³•ï¼Œç„¶åå†é€šè¿‡objcçš„runtimeæ–¹å¼è¿›è¡Œpatchï¼Œè¿™ä¸ªæœ¬è´¨ä¸Šå°±ä¸§å¤±äº†swiftçš„ä¾¿æ·æ€§ã€‚&lt;/p&gt;

&lt;p&gt;å¦å¤–ä¸€ç§æ–¹å¼å°±åƒhook C çš„æ–¹å¼ã€‚é€šè¿‡åŠ¨æ€åº“åŠ è½½è¿‡ç¨‹ä¸­ï¼Œå‡½æ•°ç¬¦å·ç»‘å®šæ—¶ï¼Œæ‰¾å‡ºæ¥swiftæ–¹æ³•çš„å…·ä½“å†…å­˜åœ°å€ï¼Œç„¶åè¿›è¡Œæ›¿æ¢ã€‚è¿™ä¸ªå¯ä»¥å‚è€ƒ&lt;a href=&quot;https://github.com/facebook/fishhook&quot;&gt;fish hook&lt;/a&gt;ã€‚è¿™ç§æ–¹æ³•å¿…é¡»è¦æŠŠéœ€è¦hookçš„ä»£ç ï¼Œéƒ½åšæˆdylibåŠ¨æ€åº“è¿›è¡ŒåŠ è½½ï¼Œæ‰èƒ½å®Œæˆã€‚å¹¶ä¸”å¯»æ‰¾Swiftçš„å‡½æ•°ç¬¦å·åœ°å€å¯èƒ½ä¹Ÿä¸æ˜¯ä¸€ä¸ªå®¹æ˜“çš„äº‹æƒ…ã€‚&lt;/p&gt;

&lt;h2 id=&quot;5-swiftè¯­è¨€çš„å­¦ä¹ è®¡åˆ’&quot;&gt;5 Swiftè¯­è¨€çš„å­¦ä¹ è®¡åˆ’&lt;/h2&gt;

&lt;p&gt;ä¸‹é¢æ˜¯è‹¹æœå®˜æ–¹å…³äº Swift è¯­è¨€å­¦ä¹ å’Œå‘å±•çš„è®¡åˆ’ã€‚&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;https://github.com/apple/swift-evolution&quot;&gt;Swiftå¼€å‘è®¡åˆ’&lt;/a&gt;
&lt;a href=&quot;https://github.com/apple/swift&quot;&gt;Swiftå¼€æºé¡¹ç›®&lt;/a&gt;
&lt;a href=&quot;https://docs.swift.org/swift-book/&quot;&gt;Swiftå®˜ç½‘å­¦ä¹ èµ„æ–™&lt;/a&gt;
å¦‚æœå¯¹Swiftè¯­æ³•è®¾è®¡æ„Ÿå…´è¶£çš„ï¼Œå¯ä»¥çœ‹ä¸‹è‹¹æœå¼€æºçš„æ–‡æ¡£&lt;a href=&quot;https://docs.swift.org/swift-book/ReferenceManual/AboutTheLanguageReference.html&quot;&gt;Swiftè¯­æ³•è®¾è®¡&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;è‹¹æœæ¯æ¬¡æ›´æ–°è¯­æ³•æ—¶ï¼Œéƒ½ä¼šç»™å‡ºç¤ºä¾‹ã€‚ä¾‹å¦‚ &lt;a href=&quot;https://github.com/twostraws/whats-new-in-swift-5-6&quot;&gt;Swift 5.6ç¤ºä¾‹&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ä¸‹é¢æ˜¯ä¸€äº›æ¯”è¾ƒæœ‰ç”¨çš„swiftå­¦ä¹ çš„è®ºå›&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;https://www.objc.io/&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;https://swiftgg.gitbook.io/swift/&quot;&gt;swiftå®˜æ–¹æ–‡æ¡£çš„ä¸­æ–‡ç¿»è¯‘&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;https://onevcat.com/2019/06/swift-ui-firstlook/&quot;&gt;swiftUIçš„ä¹¦ç±&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;6-æ€»ç»“&quot;&gt;6 æ€»ç»“&lt;/h2&gt;

&lt;p&gt;Swift è¯­è¨€ç”±äºæ˜¯å‡ºè‡ªå¼€æºçš„ LLVM ç¼–è¯‘å™¨ä½œè€…ä¹‹æ‰‹ï¼ˆLLVMæ˜¯ Python,Rust,C++ç­‰ä¸€ç³»åˆ—è¯­è¨€çš„ç¼–è¯‘å™¨ï¼‰ï¼Œæ‰€ä»¥é‡Œé¢å¸æ”¶äº†å¾ˆå¤šè¯­è¨€çš„ä¼˜ç§€ç‰¹æ€§ï¼ŒSwift è¯´åˆ°åº•æ˜¯ä¸€é—¨é™æ€è¯­è¨€ï¼Œå­¦ä¹ çš„æˆæœ¬æ¯” JS,Python,Ruby,Dark è¿™ç§å¼±ç±»å‹è¯­è¨€ï¼Œæˆæœ¬è¿˜æ˜¯ç•¥é«˜çš„ï¼Œä½†æ˜¯æ€»ä½“æ¥è®²æ¯” C++ è¿™ç§è¯­è¨€å­¦ä¹ æˆæœ¬è¦ä½å¾ˆå¤šã€‚å¹¶ä¸” Swift åŒæ—¶å…·å¤‡äº†å¼±ç±»å‹è¯­è¨€çš„è¯­æ³•ä¾¿æ·æ€§ï¼Œä¹Ÿå…·å¤‡å¼ºç±»å‹è¯­è¨€çš„å®‰å…¨å’Œæ€§èƒ½ï¼Œæ‰€ä»¥è¿˜æ˜¯å¾ˆæ¨èå¤§å®¶å­¦ä¹ çš„ã€‚&lt;/p&gt;

&lt;p&gt;Swift è¯­è¨€ç›®å‰ä¸»è¦è¿˜æ˜¯åº”ç”¨åœ¨è‹¹æœç”Ÿæ€ä¸‹çš„æ¡Œé¢å’Œç§»åŠ¨åº”ç”¨å¼€å‘ã€‚ä½†æ˜¯ç”±äº Swift è¯­è¨€å®‰å…¨æ€§å’Œæ€§èƒ½æ–¹é¢æœ‰å¾ˆå¤šä¼˜ç§€çš„ç‰¹æ€§ï¼ŒSwift è¯­è¨€ä¹Ÿäº§å‡ºäº†å¾ˆå¤šæœåŠ¡å™¨å¼€å‘çš„æ¡†æ¶ï¼Œä¾‹å¦‚ SwiftNIO è‹¹æœå¼€æºçš„éé˜»å¡IOç½‘ç»œæ¡†æ¶ã€‚å¹¶ä¸”ä¹Ÿæœ‰ä¸€äº›å…¬å¸åœ¨ Swift æœåŠ¡å™¨å¼€å‘ä¸ŠæŒç»­æŠ•å…¥ã€‚ä¾‹å¦‚ &lt;a href=&quot;https://vapor.codes/&quot;&gt;vapor&lt;/a&gt; æ¡†æ¶æ˜¯ä¸€ä¸ªå¼€æºçš„ HTTP æœåŠ¡å™¨ï¼Œè¿™ä¸ªå°±æ˜¯åŸºäº SwiftNIO æ¡†æ¶å®ç°çš„ã€‚ä¸è¿‡ç”±äºè‹¹æœä¸€å‘ä»»æ€§çš„åšæ³•ï¼ŒSwift çš„è¯­è¨€ç‰ˆæœ¬å…¼å®¹æ€§åšçš„ä¸€ç›´å¾ˆå·®(Goè¯­è¨€åˆ°ç°åœ¨è¿˜æ²¡æœ‰2.0ï¼ŒSwift é©¬ä¸Šéƒ½6.0äº†)ï¼Œé€ æˆå¾ˆå¤šæœåŠ¡å™¨å¼€å‘è€…ä¸æ•¢è½»æ˜“çš„é‡‡ç”¨ï¼Œåˆ°äº† Swift5.1 ä¹‹åABIç¨³å®šäº†ï¼Œä¼šä¸ä¼šæœ‰æ›´å¤š Swift server çš„é¡¹ç›®ï¼Œæˆ‘ä»¬æ‹­ç›®ä»¥å¾…ã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œå†æ¬¡å¼ºè°ƒä¸‹ï¼Œè¿™ç¯‡åšå®¢ä¸æ˜¯ Swift çš„å­¦ä¹ æ•™ç¨‹ã€‚åªæ˜¯æŒ‘é€‰å‡ºæ¥ Swift è¯­è¨€çš„ä¸€äº›é‡è¦æ–°ç‰¹æ€§åšäº†ä»‹ç»ï¼Œå¯¹äºå°†æ¥ä½¿ç”¨ Swift çš„æ—¶å€™å¯ä»¥æ›´å¥½ç†è§£å…¶ä¸­çš„è¯­æ³•ã€‚å½“ç„¶æ–‡ç« ä¸­å¦‚æœæœ‰ä¸€äº›é”™è¯¯ä¹‹å¤„ï¼Œè¿˜æœ›æŒ‡å‡ºå’Œå‹˜æ­£ã€‚å¸Œæœ›å’Œå¤§å®¶ä¸€åŒå­¦ä¹ ï¼Œå…±åŒæé«˜ï¼Œèƒ½å¤Ÿæ›´å¥½çš„è¿ç”¨ Swift è¯­è¨€åˆ°å®é™…çš„ç¼–ç¨‹ä¸­ã€‚&lt;/p&gt;

&lt;h2 id=&quot;å‚è€ƒæ–‡çŒ®&quot;&gt;å‚è€ƒæ–‡çŒ®&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;https://docs.swift.org/swift-book/&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;https://github.com/realm/SwiftLint&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;https://github.com/apple/swift-evolution&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;https://github.com/twostraws/whats-new-in-swift-5-6&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;https://swiftgg.gitbook.io/swift/&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;</content><author><name>mengtnt</name></author><summary type="html">éšç€è¶Šæ¥è¶Šå¤šçš„åº”ç”¨åœ¨ä½¿ç”¨ Swift è¯­è¨€å¼€å‘iOSï¼Œå­¦ä¹  Swift è¯­è¨€ä¹Ÿå¾ˆæœ‰å¿…è¦ã€‚è¿™ä¸ªåšå®¢ä¸æ˜¯è¯¦ç»†çš„ Swift çš„æ•™ç¨‹ï¼Œä¸»è¦æ˜¯ä¸ºäº† Swift åˆå­¦è€…ï¼Œå°¤å…¶ä¹‹å‰ä½¿ç”¨ OC å¼€å‘ iOS åº”ç”¨çš„äººå‘˜ï¼Œåœ¨è½¬å…¥ Swift è¿™é—¨è¯­è¨€æ—¶ï¼Œåº”è¯¥äº†è§£çš„ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼Œä¸ºæ–¹ä¾¿è¿›ä¸€æ­¥çš„å­¦ä¹ åšä¸€äº›é“ºå«ã€‚</summary></entry><entry><title type="html">æ·±å…¥ç†è§£LINUXå†…æ ¸</title><link href="https://mengtnt.com/2022/03/16/readlinux.html" rel="alternate" type="text/html" title="æ·±å…¥ç†è§£LINUXå†…æ ¸" /><published>2022-03-16T07:05:06+00:00</published><updated>2022-03-16T07:05:06+00:00</updated><id>https://mengtnt.com/2022/03/16/readlinux</id><content type="html" xml:base="https://mengtnt.com/2022/03/16/readlinux.html">&lt;p&gt;æœ€è¿‘åœ¨è¯»ã€Šæ·±å…¥ç†è§£LINUXå†…æ ¸ã€‹è¿™æœ¬ä¹¦è®©æˆ‘æƒ³èµ·æ¥å¤§å­¦æ—¶ä»£çš„ã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿã€‹ã€ã€Šç¼–è¯‘åŸç†ã€‹ã€ã€Šæ“ä½œç³»ç»Ÿã€‹è¿™å‡ æœ¬çº¢å®ä¹¦ã€‚è¿™ç§ç±»å‹çš„ä¹¦ï¼Œç”±äºè®¾è®¡çš„æŠ€æœ¯ç»†èŠ‚è¿‡äºåºå¤§ï¼Œæ‰€ä»¥æƒ³è¯»ä¸€éäº†è§£å…¶ä¸­çš„åŸç†ä¸å¤ªå¯èƒ½ï¼Œåœ¨æˆ‘çœ‹æ¥è¯»è¿™ç§ç±»å‹çš„ä¹¦ï¼Œä¸€éæœ€å¤šä¹Ÿå°±èƒ½ç†è§£å…¶ä¸­10%çš„å†…å®¹ã€‚ç°åœ¨å·²ç»å·¥ä½œäº†10å¤šå¹´ï¼Œé‡æ–°çœ‹äº†ä¸‹çœ‹èƒ½ä¸èƒ½å†å¤šæ‡‚10%ã€‚&lt;/p&gt;

&lt;p&gt;è¨€å½’æ­£ä¼ ï¼Œæœ¬ç¯‡åšå®¢è‡ªå·±æƒ³è®°å½•ä¸‹å¯¹ä¹¦ä¸­ä¸€äº›åŸç†çš„ç†è§£ï¼Œæ„Ÿå—ä¸‹Linuxç³»ç»Ÿçš„å·§å¦™ä¹‹å¤„ã€‚å†æ¥å¯ä»¥å€Ÿé‰´ä¸‹Linuxå¾ˆå¤šçš„è®¾è®¡æ€æƒ³ï¼Œä¹Ÿå¯ä»¥åº”ç”¨åˆ°å¹³æ—¶å·¥ä½œä¸­ä¸šåŠ¡é€»è¾‘çš„è®¾è®¡ã€‚å½“ç„¶åšå®¢ç¯‡å¹…æœ‰é™ï¼Œä»…ä»…è®°å½•ä¸‹æ“ä½œç³»ç»Ÿæ ¸å¿ƒä¸šåŠ¡çš„æŸäº›æ€æƒ³ä»¥ä¾›å€Ÿé‰´ã€‚&lt;/p&gt;

&lt;p&gt;è¯´åˆ°æ“ä½œç³»ç»Ÿæ ¸å¿ƒä¸šåŠ¡ï¼Œä¸»è¦æ˜¯è¿›ç¨‹å’Œå†…å­˜ç®¡ç†ï¼Œæœ¬è´¨æ˜¯å°±æ˜¯ç®¡ç†cpuå’Œå­˜å‚¨ç³»ç»Ÿã€‚æ‰€ä»¥ä¸‹é¢çš„å‡ ç‚¹å†…å®¹éƒ½æ˜¯ä»è¿›ç¨‹å’Œå†…å­˜ç®¡ç†çš„ç« èŠ‚ä¸­é€‰å–çš„çŸ¥è¯†ç‚¹ã€‚&lt;/p&gt;

&lt;h2 id=&quot;å†…å­˜ç®¡ç†&quot;&gt;å†…å­˜ç®¡ç†&lt;/h2&gt;

&lt;p&gt;å‡å¦‚æ²¡æœ‰æ“ä½œç³»ç»Ÿï¼Œç¨‹åºå¦‚ä½•æ“ä½œå†…å­˜å‘¢ï¼Ÿé‚£å°±è¦ç®¡ç†æ¯ä¸€ä¸ªå†…å­˜åœ°å€çš„è¯»å–å’Œå­˜å‚¨äº†ï¼Œå¯¹äºä¸åŒçš„ç¡¬ä»¶å†…å­˜æ’å¸ƒéƒ½å„ä¸ç›¸åŒï¼Œæ‰€ä»¥ä½¿ç”¨ä¸åŒçš„ç¡¬ä»¶å°±è¦å†™ä¸€å¥—ä¸åŒçš„å†…å­˜ç®¡ç†æ–¹æ³•ã€‚æ“ä½œç³»ç»Ÿæœ¬è´¨ä¸Šå°±æ˜¯å¯¹å†…å­˜è¿™ä¸ªç¡¬ä»¶å¢åŠ äº†ä¸€ä¸ªæŠ½è±¡ï¼Œä¸Šå±‚ç¨‹åºåªéœ€è¦ä½¿ç”¨è™šæ‹Ÿåœ°å€æ¥è®¿é—®å°±å¯ä»¥ï¼Œåº•å±‚å¦‚ä½•åˆ†é…ç‰©ç†åœ°å€äº¤ç»™æ“ä½œç³»ç»Ÿæ¥åšã€‚&lt;/p&gt;

&lt;p&gt;ç”±äºæ“ä½œç³»ç»ŸæŠ½è±¡äº†ä¸€å±‚è™šæ‹Ÿå†…å­˜ï¼Œç”¨æˆ·ç¨‹åºä»…ä»…æ“ä½œè™šæ‹Ÿåœ°å€ï¼Œé‚£ä¹ˆè™šæ‹Ÿåœ°å€å¦‚ä½•è½¬æ¢æˆç‰©ç†åœ°å€å‘¢ï¼Ÿè¿™é‡Œå°±è¦ä»ç¨‹åºè£…è½½çš„è¿‡ç¨‹è¯´èµ·äº†ã€‚å¦‚æœç¨‹åºä¸æ˜¯è¿è¡Œåœ¨è™šæ‹Ÿæœºä¸Šï¼Œæœ¬è´¨ä¸Šæ“ä½œç³»ç»Ÿè£…è½½çš„éƒ½æ˜¯æœºå™¨ç ã€‚å†™è¿‡æ±‡ç¼–ä»£ç çš„éƒ½çŸ¥é“ï¼Œåœ¨å®šä¹‰ç¨‹åºä»£ç æ—¶ï¼Œéœ€è¦å®šä¹‰ä»£ç æ®µ(CS)ã€æ•°æ®æ®µ(DS)ã€å †æ ˆæ®µ(SS)ï¼Œå¹¶ä¸”ä»£ç é‡Œé¢å†™çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;mov 0x8049509 exa &lt;/code&gt; è¿™é‡Œçš„åœ°å€éƒ½æ˜¯é€»è¾‘åœ°å€ã€‚æ“ä½œç³»ç»Ÿé€šè¿‡ç¨‹åºæ®µå®šä¹‰æ®µçš„é€»è¾‘åœ°å€ï¼Œå†è½¬æ¢å‡ºç¨‹åºæ‰€éœ€è¦çš„è™šæ‹Ÿåœ°å€ã€‚å¯ä»¥çœ‹ä¸‹å›¾æ‰€ç¤ºã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/readLinux-logic-1.jpg&quot; alt=&quot;å›¾1&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä¸Šå›¾ä¸­æœ€ç»ˆçš„çº¿æ€§åœ°å€å°±æ˜¯å¹³æ—¶æˆ‘ä»¬è¯´çš„è™šæ‹Ÿåœ°å€ã€‚å…¶å®Linuxä¸­é€»è¾‘åœ°å€ç­‰äºè™šæ‹Ÿåœ°å€ã€‚å› ä¸ºLinuxæ‰€æœ‰çš„æ®µï¼ˆç”¨æˆ·ä»£ç æ®µã€ç”¨æˆ·æ•°æ®æ®µã€å†…æ ¸ä»£ç æ®µã€å†…æ ¸æ•°æ®æ®µï¼‰çš„çº¿æ€§åœ°å€éƒ½æ˜¯ä» 0x00000000 å¼€å§‹ï¼Œçº¿æ€§åœ°å€=0x00000000+é€»è¾‘åœ°å€(åç§»é‡)ï¼Œä¹Ÿå°±æ˜¯è¯´é€»è¾‘åœ°å€ç­‰äºè™šæ‹Ÿåœ°å€äº†ã€‚åƒWindowsç³»ç»Ÿå°±ä¼šåœ¨åŠ è½½ç¨‹åºæ—¶ï¼Œä¼šæœ‰é€»è¾‘åœ°å€è½¬æ¢è™šæ‹Ÿåœ°å€çš„è¿‡ç¨‹ã€‚Linuxèˆå¼ƒè¿™ä¸€æ­¥çš„ç›®çš„æ˜¯ä¸ºäº†é«˜æ•ˆï¼Œè¿™æ ·Linuxå°±å¯ä»¥ç›´æ¥æŠŠæ‰€æœ‰çš„é€»è¾‘åœ°å€æ˜ å°„åˆ°æˆ‘ä»¬ä¸‹é¢è¦è¯´çš„é¡µè¡¨ä¸­äº†ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨å†™æ±‡ç¼–ä»£ç æ—¶ï¼Œä¼šå‘ç°ç¨‹åºä¸­æ‰€æœ‰æ“ä½œçš„å†…å­˜éƒ½æ˜¯è¿ç»­çš„ï¼Œè¿™æ ·å¾ˆæ–¹ä¾¿æˆ‘ä»¬ç®¡ç†å†…å­˜çš„è¯»å–ã€‚é‚£æ“ä½œç³»ç»Ÿå¦‚ä½•æŠŠç¨‹åºä¸­æ‰€æœ‰è¿ç»­çš„è™šæ‹Ÿåœ°å€ï¼Œæ˜ å°„åˆ°ç‰©ç†åœ°å€ä¸­ã€‚è¿™ä¸ªè¿‡ç¨‹å°±éœ€è¦ç”¨åˆ°é¡µè¡¨ã€‚é¡µè¡¨
 æ˜¯åˆ†é…ç‰©ç†å†…å­˜çš„æœ€å°å•å…ƒï¼Œæœ‰4Kï¼Œ16Kç­‰ç­‰ï¼Œç³»ç»Ÿæ¯æ¬¡ç”³è¯·åœ°å€æ—¶ï¼Œéƒ½æ˜¯æŒ‰ç…§é¡µçš„å•å…ƒæ¥çš„ã€‚è¿™æ ·å¯ä»¥ä¿è¯ç¡¬ä»¶çš„æœ€é«˜æ•ˆè¿ä½œã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œå¯èƒ½å°±æœ‰äººç–‘é—®äº†ï¼Œå¦‚æœæ¯ä¸ªè™šæ‹Ÿåœ°å€éƒ½è¦ä»é¡µè¡¨ä¸­æŸ¥æ‰¾çš„è¯ï¼Œå­˜å‚¨é¡µè¡¨æ˜¯ä¸æ˜¯å¾ˆæµªè´¹ç©ºé—´ã€‚å¦‚æœæ˜¯4Kçš„é¡µé¢ï¼Œ1Gç‚¹å†…å­˜ï¼Œå²‚ä¸æ˜¯å°±è¦ &lt;code class=&quot;highlighter-rouge&quot;&gt;1024/4 = 256M&lt;/code&gt;ã€‚æ‰€ä»¥å°±äº§ç”Ÿäº†å¤šçº§é¡µé¢ï¼Œå¤šåŠ å‡ ä¸ªç›®å½•ä¸å°±å¯ä»¥äº†ä¹ˆï¼Ÿå¦‚ä¸‹å›¾:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/readLinux-page-2.jpg&quot; alt=&quot;å›¾2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä¸Šå›¾å°±æ˜¯Linuxæ“ä½œç³»ç»Ÿä¸­å¸¸ç”¨çš„ä¸‰çº§é¡µè¡¨ï¼Œ1Gå†…å­˜ä¹Ÿä»…ä»…åªéœ€è¦4Mçš„é¡µè¡¨å°±å¯ä»¥å®Œæˆå¯»å€ï¼Œæé«˜å¯»å€é€Ÿåº¦çš„åŒæ—¶ï¼Œä¹Ÿå¤§å¤§èŠ‚çœäº†ç©ºé—´ã€‚&lt;/p&gt;

&lt;p&gt;ä¸Šé¢åªæ˜¯ç®€å•çš„ä»‹ç»äº†Linuxçš„åˆ†é¡µç³»ç»Ÿï¼Œä¸ºäº†æé«˜åˆ†é¡µæ•ˆç‡æœ‰å¾ˆå¤šç§åˆ†é¡µç®—æ³•ï¼Œè¿™é‡Œé™äºç¯‡å¹…ä¹Ÿä¸å†ä»‹ç»ã€‚åœ¨çœ‹åˆ°è¿™çš„æ—¶å€™ï¼Œæƒ³åˆ°äº†å¹³æ—¶åœ¨åšä¸šåŠ¡æ—¶ï¼Œé‡åˆ°å¹³å°ç»Ÿä¸€æ€§é—®é¢˜ä¸Šæ—¶ï¼Œå°±å¯ä»¥å€Ÿé‰´ä¸‹æ“ä½œç³»ç»Ÿå¦‚ä½•é€šè¿‡å¢åŠ ä¸€å±‚æŠ½è±¡æ¥å¯¹å†…å­˜ç®¡ç†ï¼Œä»è€Œç£¨å¹³äº†å¹³å°çš„å·®å¼‚ã€‚åœ¨è§£å†³ä¸šåŠ¡æ•ˆç‡çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åˆ†è¡¨çš„æ€æƒ³æé«˜è®¿é—®çš„é€Ÿåº¦ã€‚&lt;/p&gt;

&lt;h2 id=&quot;è¿›ç¨‹ç®¡ç†&quot;&gt;è¿›ç¨‹ç®¡ç†&lt;/h2&gt;

&lt;p&gt;è¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿç³»ç»ŸåŸºæœ¬çš„æ‰§è¡Œå•å…ƒã€‚åœ¨Linuxæ“ä½œç³»ç»Ÿä¸­ï¼Œæœ‰ä¸€ä¸ªæ¦‚å¿µå«è½»é‡çº§è¿›ç¨‹(lwp)ã€‚å’‹ä¸€çœ‹è¿™ä¸å°±æ˜¯è¿›ç¨‹ï¼Œå…¶å®ä¸ç„¶ã€‚ä¸ºå•¥Linuxä¸æŒ‰ç…§æ“ä½œç³»ç»Ÿçš„æ¦‚å¿µï¼Œè€è€å®å®çš„åšä¸€ä¸ªè¿›ç¨‹çš„ç®¡ç†å‘¢ï¼Ÿæˆ‘ç†è§£çš„æœ¬è´¨ä¸Šæ˜¯ä¸ºäº†æ›´å¥½çš„é‡ç”¨ï¼Œè¿›ç¨‹å…¶å®æ˜¯ä¸€ä¸ªå¾ˆå¤æ‚çš„æ¦‚å¿µï¼ŒåŒ…å«äº†cpuè°ƒåº¦ä»¥åŠéœ€è¦ç®¡ç†å„ç§è°ƒåº¦çš„èµ„æºã€‚è€Œlwpå…¶å®ä»…ä»…æŠ½è±¡äº†cpuçš„è°ƒåº¦è¿‡ç¨‹ï¼Œä¸»è¦åŒ…å«äº†cpuä¸­å¯„å­˜å™¨ä¸Šä¸‹æ–‡åˆ‡æ¢çš„è¿‡ç¨‹å’Œä¸€äº›å¿…é¡»çš„èµ„æºç®¡ç†ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨Linuxçš„topå’Œpså‘½ä»¤ä¸­ï¼Œé»˜è®¤çœ‹åˆ°æœ€å¤šçš„æ˜¯pid (process ID)ï¼Œä¹Ÿè®¸ä½ ä¹Ÿèƒ½çœ‹åˆ°lwp (thread ID)å’Œtgid (thread group ID for the thread group leader)ç­‰ç­‰ã€‚æ‰€ä»¥æœ¬è´¨ä¸ŠLinuxçš„è¿›ç¨‹æ˜¯ç”±lwpå’Œä¸€äº›å…±äº«èµ„æºç»„åˆè€Œæˆçš„ï¼Œå¹¶ä¸”lwpè¿˜å¯ä»¥ä½œä¸ºå†…æ ¸çš„çº¿ç¨‹ã€‚å¦å¤–è¿™é‡Œæˆ‘æƒ³è¯´PThreadå…¶å®æ˜¯ç”¨æˆ·è¿›ç¨‹ï¼Œé€šè¿‡ä¸€äº›åº“å‡½æ•°æ¨¡æ‹Ÿçº¿ç¨‹çš„å¹¶å‘æ‰§è¡Œçš„æ•ˆæœï¼Œç”Ÿæ•ˆèŒƒå›´å…¶å®ä¸åœ¨ç³»ç»Ÿçº§åˆ«ï¼Œä¸æ˜¯lwpçš„çº§åˆ«ã€‚æ‰€ä»¥å¯¹äºä¸åŒçš„æ“ä½œç³»ç»Ÿæ¥è®²ï¼Œè¿›ç¨‹å’Œçº¿ç¨‹çš„å®ç°æ–¹å¼å¹¶ä¸ç›¸åŒï¼Œä½†æ˜¯ä»–ä»¬ç†å¿µéƒ½å¤§åŒå°å¼‚ï¼Œéƒ½æ˜¯å¯¹cpuçš„è°ƒåº¦å’Œèµ„æºçš„ç®¡ç†ã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸‹è¿›ç¨‹ç®¡ç†çš„ä¸€ä¸ªæ ¸å¿ƒå‡½æ•°ï¼Œè¿›ç¨‹åˆ‡æ¢ã€‚ä¸‹é¢æˆ‘åˆ—ä¸‹ä¹¦ä¸­ä»‹ç»çš„è¿›ç¨‹åˆ‡æ¢çš„æ ¸å¿ƒä»£ç å¦‚ä¸‹:&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;cp&quot;&gt;#define switch_to(prev, next, last)                 \
do {                                    \
    prepare_switch_to(next);                    \
                                    \
    ((last) = __switch_to_asm((prev), (next)));         \
} while (0)
&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;é‡Œé¢ä¸“é—¨ä»‹ç»äº†ä¸ºä½•Aï¼ŒBè¿›ç¨‹åˆ‡æ¢éœ€è¦ä¸‰ä¸ªå‚æ•°ï¼Œlastå‚æ•°çš„ä½œç”¨ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/readLinux-switch-3.jpg&quot; alt=&quot;å›¾2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å‡å®š3ä¸ªè¿›ç¨‹Aã€Bå’ŒCåœ¨ç³»ç»Ÿä¸Šè¿è¡Œã€‚åœ¨æŸä¸ªæ—¶é—´ç‚¹ï¼Œå†…æ ¸å†³å®šä»è¿›ç¨‹Aåˆ‡æ¢åˆ°è¿›ç¨‹Bï¼Œç„¶åä»è¿›ç¨‹Båˆ‡æ¢åˆ°è¿›ç¨‹Cï¼Œæ¥ä¸‹æ¥å†ä»è¿›ç¨‹Cåˆ‡æ¢å›è¿›ç¨‹Aã€‚åœ¨æ¯ä¸ªswitch_toè°ƒç”¨ä¹‹å‰ï¼Œnextå’ŒprevæŒ‡é’ˆä½äºå„è¿›ç¨‹çš„å†…æ ¸æ ˆä¸Šï¼ŒprevæŒ‡å‘å½“å‰è¿è¡Œçš„è¿›ç¨‹ï¼Œè€ŒnextæŒ‡å‘å°†è¦è¿è¡Œçš„ä¸‹ä¸€ä¸ªè¿›ç¨‹ã€‚ä¸ºæ‰§è¡Œä»prevåˆ°nextçš„åˆ‡æ¢ï¼Œswitch_toçš„å‰ä¸¤ä¸ªå‚æ•°è¶³å¤Ÿäº†ã€‚å¯¹è¿›ç¨‹Aæ¥è¯´ï¼ŒprevæŒ‡å‘è¿›ç¨‹Aè€ŒnextæŒ‡å‘è¿›ç¨‹Bã€‚&lt;/p&gt;

&lt;p&gt;åœ¨è¿›ç¨‹Aè¢«é€‰ä¸­å†æ¬¡æ‰§è¡Œæ—¶ï¼Œä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œæ§åˆ¶æƒè¿”å›è‡³switch_toä¹‹åçš„ç‚¹ï¼Œå¦‚æœæ ˆå‡†ç¡®åœ°æ¢å¤åˆ°åˆ‡æ¢ä¹‹å‰çš„çŠ¶æ€ï¼Œé‚£ä¹ˆprevå’Œnextä»ç„¶æŒ‡å‘åˆ‡æ¢ä¹‹å‰çš„å€¼ï¼Œå³next=Bï¼Œè€Œprev=Aã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå†…æ ¸æ— æ³•çŸ¥é“å®é™…ä¸Šåœ¨è¿›ç¨‹Aä¹‹å‰è¿è¡Œçš„è¿›ç¨‹æ˜¯Cã€‚&lt;/p&gt;

&lt;p&gt;ä»ä¸Šé¢çš„æè¿°å¯ä»¥çœ‹å‡ºï¼Œswitch_toè¿™ä¸ªå‡½æ•°éå¸¸ç‰¹æ®Šï¼Œåœ¨ä»Cè¿›ç¨‹åˆ‡å›åˆ°Aè¿›ç¨‹æ—¶ï¼Œåœ¨åˆ‡æ¢çš„ä¸ŠåŠéƒ¨åˆ†æ˜¯åœ¨è¿›ç¨‹Cä¸­è¿è¡Œçš„ï¼Œè€Œä¸‹åŠéƒ¨åˆ†æ˜¯åœ¨è¿›ç¨‹Aä¸­è¿è¡Œçš„ï¼Œæ‰€ä»¥Aè¿›ç¨‹éœ€è¦è¯»å–ç¬¬ä¸‰ä¸ªå‚æ•°lastæ‰èƒ½çŸ¥é“æ˜¯ä»Cåˆ‡æ¢è¿‡æ¥çš„ã€‚&lt;/p&gt;

&lt;p&gt;Linuxä¸ºäº†æé«˜è¿›ç¨‹åˆ‡æ¢çš„æ•ˆç‡ï¼Œæ‰ä½¿ç”¨è¿™ç§å¦‚æ­¤ä¸å¥½ç†è§£çš„æ–¹å¼ã€‚å…¶å®å¦‚æœæˆ‘ä»¬èƒ½å¼•å…¥ä¸€ä¸ªè¿›ç¨‹ç®¡ç†çš„è¿›ç¨‹å°±ä¼šæ›´åŠ çš„æ¸…æ™°ï¼Œä½†æ˜¯æ•ˆç‡è‡ªç„¶ä¹Ÿå°±ç‰ºç‰²äº†ã€‚æˆ‘å¼•ç”¨ä¸‹ä¸€ä¸ªç½‘å‹å¯¹æ­¤é—®é¢˜çš„çœ‹æ³•ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Linuxä¸­æ²¡æœ‰ä¸“é—¨çš„è°ƒåº¦ç®¡ç†çº¿ç¨‹è™½ç„¶å’‹ä¸€çœ‹å¾ˆä¸ç¾è§‚ï¼Œä½†æ˜¯å®ƒæ¯•ç«Ÿä¸æ˜¯å¾®å†…æ ¸ç»“æ„ï¼Œå¤§å†…æ ¸çš„ ä¼˜ç‚¹å°±æ˜¯é«˜æ•ˆï¼Œç›´æ¥è®©éœ€è¦åˆ‡æ¢çš„è¿›ç¨‹è‡ªå·±è°ƒç”¨åˆ‡æ¢ä»£ç å¦å¤–åˆ«çš„è¿›ç¨‹å°±ç»ªåå‘Šè¯‰æ­£è¿è¡Œçš„è¿›ç¨‹æœ‰åˆ‡æ¢éœ€è¦ç„¶åç€æ‰‹è°ƒåº¦ï¼Œè¿™ç§æ–¹å¼è‚¯å®šæœ€é«˜æ•ˆï¼Œå¦‚æœè®¾ç½®äº†è°ƒåº¦ç®¡ ç†çº¿ç¨‹ï¼Œéœ€è¦è°ƒåº¦æ—¶è¿˜è¦é€šçŸ¥è¿™ä¸ªç®¡ç†å™¨ï¼Œå¾ˆå¤šåˆ‡æ¢å¾ˆä½æ•ˆï¼Œä½†æ˜¯å´å¾ˆç¾è§‚ã€‚è¿™ä¸€ç‚¹ä¸Šï¼ŒLinuxä¸­çš„è°ƒåº¦æ˜¯å’Œè°è‡ªå‘çš„æŠ¢å å¼åä½œï¼Œè€Œå¸¦æœ‰è°ƒåº¦ç®¡ç†å™¨çš„å†…æ ¸å¯¹ äºè°ƒåº¦åˆ™æ˜¯å¼ºè¡Œçš„ç®¡åˆ¶ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æ‰€ä»¥æˆ‘ä»¬å¹³æ—¶åœ¨åšä¸€äº›ä¸šåŠ¡æ—¶ï¼Œä¸ºäº†æå‡æ•ˆç‡ï¼Œå¾€å¾€ä¼šé‡‡ç”¨ä¸€äº›å¾ˆè¯¡å¼‚(trick)çš„æ‰‹æ®µï¼Œè™½ç„¶ç›®çš„è¾¾åˆ°äº†ï¼Œä½†æ˜¯ç‰ºç‰²äº†ä»£ç çš„å¯è¯»æ€§ã€‚è¿™ä¹Ÿæ˜¯Linuxè®¾è®¡å“²å­¦çš„æƒè¡¡ï¼Œå› ä¸ºæ•ˆç‡è¢«çœ‹åšLinuxç³»ç»Ÿçš„æœ€é«˜ä¼˜å…ˆçº§ã€‚&lt;/p&gt;

&lt;h2 id=&quot;ä¸­æ–­&quot;&gt;ä¸­æ–­&lt;/h2&gt;

&lt;p&gt;åœ¨å†…æ ¸çš„è¿›ç¨‹åˆ‡æ¢æ—¶ï¼Œæˆ‘ä»¬æåˆ°è¿‡ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚å…¶å®ä¸­æ–­æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ç§ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚ä½†æ˜¯ä¸­æ–­å¤„ç†å’Œè¿›ç¨‹åˆ‡æ¢æœ‰ä¸€ä¸ªæ˜æ˜¾çš„å·®å¼‚: ç”±ä¸­æ–­å¤„ç†æ‰§è¡Œçš„ä»£ç å¹¶ä¸æ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œæˆ‘ä»¬å¸¸å¸¸ç”¨å†…æ ¸æ§åˆ¶è·¯å¾„(kernel control path)æ¥ä»£è¡¨ä¸­æ–­å‘ç”Ÿæ—¶ï¼Œæ­£åœ¨æ‰§è¡Œçš„ç¨‹åºã€‚å¯ä»¥è¯´ä¸­æ–­å¤„ç†çš„ç¨‹åºæ¯”lwpè¿˜è¦è½»é‡çº§ã€‚&lt;/p&gt;

&lt;p&gt;ä¸­æ–­åœ¨cpuä¸­ç»å¸¸å‘ç”Ÿï¼Œæ‰€ä»¥ä¸­æ–­çš„æ•ˆç‡å¼‚å¸¸é‡è¦ã€‚ä¸‹å›¾å±•ç¤ºäº†ä¸­æ–­è¯·æ±‚å‘ç”Ÿæ—¶ï¼Œæ•°æ®å¤„ç†çš„è¿‡ç¨‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/readLinux-int-4.jpg&quot; alt=&quot;å›¾2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œåˆ†ä¸ºä¸Šä¸‹ä¸¤ä¸ªéƒ¨åˆ†ã€‚ä¸Šéƒ¨è¢«ç§°ä¸ºç¡¬ä¸­æ–­å¤„ç†ï¼Œåªæœ‰ä¸€äº›æ¯”è¾ƒç´§æ€¥çš„åŠŸèƒ½ï¼Œå®ƒå¾€å¾€åªæ˜¯ç®€å•åœ°è¯»å–å¯„å­˜å™¨ä¸­çš„ä¸­æ–­çŠ¶æ€å¹¶æ¸…é™¤ä¸­æ–­æ ‡å¿—åå°±è¿›è¡Œâ€œç™»è®°ä¸­æ–­â€çš„å·¥ä½œã€‚â€œç™»è®°ä¸­æ–­â€æ„å‘³ç€å°†ä¸‹åŠéƒ¨å¤„ç†ç¨‹åºï¼ŒæŒ‚åˆ°åç»­çš„æ‰§è¡Œé˜Ÿåˆ—ä¸­å»ã€‚ä¸‹åŠéƒ¨åˆ†æ˜¯çœŸæ­£å¤„ç†ä¸­æ–­è¯·æ±‚çš„ç¨‹åºé€»è¾‘ã€‚Linuxä¸‹åŠéƒ¨åˆ†å¤„ç†æœ‰è½¯ä¸­æ–­ã€taskletã€å·¥ä½œé˜Ÿåˆ—ã€‚è¿™é‡Œä¸è¿‡å¤šä»‹ç»ã€‚&lt;/p&gt;

&lt;p&gt;ç»“åˆæˆ‘ä»¬å¹³æ—¶å†™ä»£ç æ—¶ï¼Œç”¨åˆ°çš„å®šæ—¶å™¨ï¼Œæ“ä½œç³»ç»Ÿå¤„ç†çš„è¿‡ç¨‹æ˜¯ï¼Œæ ¹æ®cpuå‘å‡ºçš„æ—¶é’Ÿä¸­æ–­ï¼Œè¾¾åˆ°ç”¨æˆ·è®¾ç½®å®šæ—¶å™¨æ—¶é—´ï¼Œå°±å‘ç”Ÿä¸€ä¸ªè½¯ä¸­æ–­ï¼Œç­‰å¾…ç”¨æˆ·ç¨‹åºå¤„ç†ã€‚ä½†æ˜¯ä½•æ—¶å¤„ç†ï¼Œå°±è·Ÿæ•´ä¸ªç³»ç»Ÿçš„ååèƒ½åŠ›æœ‰å…³ç³»äº†ã€‚æ‰€ä»¥å¹³æ—¶çš„å®šæ—¶å™¨ä¸­æ–­ï¼Œè¿è¡Œåˆ°å¤„ç†ç¨‹åºæ—¶ï¼Œæ—¶é—´å¹¶ä¸æ˜¯100%å‡†ç¡®çš„ã€‚&lt;/p&gt;

&lt;p&gt;ä»ä¸­å¯ä»¥çœ‹å‡ºï¼Œä¸ºäº†ç³»ç»Ÿçš„å¯ç”¨æ€§å’Œååèƒ½åŠ›ï¼Œä¸­æ–­çš„è®¾è®¡å°±éå¸¸çš„å·§å¦™ï¼Œæ—¢è§£å†³äº†åŒæ—¶å¯ä»¥å“åº”å¤šä¸ªå¤–è®¾è¾“å…¥çš„é—®é¢˜ï¼Œåˆè§£å†³äº†å“åº”æ…¢çš„é—®é¢˜ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨å¤„ç†ä¸€äº›ä¸šåŠ¡çš„æ—¶å€™ï¼Œä¸å¦¨æŠŠä¸šåŠ¡çš„æ“ä½œæ›´åŠ ç»†åˆ†ï¼Œå°±å¯ä»¥è¾¾åˆ°å¹¶å‘æ‰§è¡Œçš„æ•ˆæœï¼Œæé«˜äº†ä¸šåŠ¡çš„æ•ˆç‡å’Œååç‡ã€‚&lt;/p&gt;

&lt;h2 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h2&gt;

&lt;p&gt;Linuxæ˜¯å®ç°äº†æ“ä½œç³»ç»Ÿè¿™ä¸ªå¤æ‚çš„ä¸šåŠ¡çš„ä¸€ç§ç³»ç»Ÿï¼Œæˆ‘ä»¬å¹³æ—¶åšçš„ä¸šåŠ¡å¯èƒ½è¿œè¿œæ²¡æœ‰è¿™ä¹ˆå¤æ‚ï¼Œä¹Ÿä¸ä¼šè¦æ±‚å¦‚æ­¤é«˜çš„æ•ˆç‡ï¼Œä½†æ˜¯ä»Linuxçš„è®¾è®¡å®è·µä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å€Ÿé‰´å¾ˆå¤šçš„ç†å¿µå’Œæ–¹æ³•æ¥æé«˜æˆ‘ä»¬ä¸šåŠ¡çš„æ•ˆç‡ã€‚å¦‚æœå†åš10å¹´çš„ä¸šåŠ¡ï¼Œå›å¤´çœ‹è¿™æœ¬ä¹¦ï¼Œå¯èƒ½ä¼šæœ‰å¦å¤–çš„æ„Ÿæ‚Ÿã€‚&lt;/p&gt;

&lt;p&gt;åœ¨æ„Ÿå¹åˆ°Linuxçš„ç²¾å¦™è®¾è®¡çš„åŒæ—¶ã€‚ä¹Ÿä¼šæ„Ÿå—åˆ°å…¶ä¸­çš„å¤æ‚ï¼Œåˆ°ç°åœ¨å¾ˆå¤šè®¾è®¡ç†å¿µæˆ‘è¿˜æ˜¯ä¸€çŸ¥åŠè§£ï¼Œå¯èƒ½å¤§å¤šæ•°äººéƒ½è¦èŠ±ä¸Šå¾ˆå¤šå¹´æ‰èƒ½è¯»æ‡‚è¿™æœ¬ä¹¦ã€‚å¯æ˜¯Linuxéšç€æ—¶é—´çš„å‘å±•ï¼Œä»ç„¶åœ¨ä¸å®šçš„è¿­ä»£å’Œè¿›æ­¥ã€‚æ‰€ä»¥äººç±»çš„çŸ¥è¯†ä½“ç³»åªä¼šè¶Šæ¥è¶Šå¤æ‚ï¼Œé‚£ä¹ˆäººç±»çš„è¿›åŒ–é€Ÿåº¦æ˜¯å¦å¯ä»¥èµ¶ä¸ŠçŸ¥è¯†å¤æ‚æ¼”å˜çš„é€Ÿåº¦å‘¢ï¼Ÿä¹‹å‰è®°å¾—è¯»è¿‡ä¸€ç¯‡æ–‡ç« è®²åˆ°ï¼Œäººç±»å¯èƒ½ä¼šå› ä¸ºæ„å»ºè¿‡äºå¤æ‚çš„ä¸–ç•Œè€Œå´©æºƒï¼Œå› ä¸ºæ²¡æœ‰ä¸€ä¸ªäººå¯ä»¥ç†è§£ï¼Œæ‰€å¤„ç³»ç»Ÿçš„è¿è¡Œæœºåˆ¶ã€‚è¿™ä¸ªå“²å­¦é—®é¢˜ä¹Ÿç•™ç»™å¤§å®¶æ¥æ€è€ƒäº†ã€‚&lt;/p&gt;</content><author><name>mengtnt</name></author><summary type="html">æœ€è¿‘åœ¨è¯»ã€Šæ·±å…¥ç†è§£LINUXå†…æ ¸ã€‹è¿™æœ¬ä¹¦è®©æˆ‘æƒ³èµ·æ¥å¤§å­¦æ—¶ä»£çš„ã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿã€‹ã€ã€Šç¼–è¯‘åŸç†ã€‹ã€ã€Šæ“ä½œç³»ç»Ÿã€‹è¿™å‡ æœ¬çº¢å®ä¹¦ã€‚è¿™ç§ç±»å‹çš„ä¹¦ï¼Œç”±äºè®¾è®¡çš„æŠ€æœ¯ç»†èŠ‚è¿‡äºåºå¤§ï¼Œæ‰€ä»¥æƒ³è¯»ä¸€éäº†è§£å…¶ä¸­çš„åŸç†ä¸å¤ªå¯èƒ½ï¼Œåœ¨æˆ‘çœ‹æ¥è¯»è¿™ç§ç±»å‹çš„ä¹¦ï¼Œä¸€éæœ€å¤šä¹Ÿå°±èƒ½ç†è§£å…¶ä¸­10%çš„å†…å®¹ã€‚ç°åœ¨å·²ç»å·¥ä½œäº†10å¤šå¹´ï¼Œé‡æ–°çœ‹äº†ä¸‹çœ‹èƒ½ä¸èƒ½å†å¤šæ‡‚10%ã€‚</summary></entry><entry><title type="html">äº‘åŸç”Ÿçš„æ€è€ƒ</title><link href="https://mengtnt.com/2022/01/01/thinkcncf.html" rel="alternate" type="text/html" title="äº‘åŸç”Ÿçš„æ€è€ƒ" /><published>2022-01-01T07:00:04+00:00</published><updated>2022-01-01T07:00:04+00:00</updated><id>https://mengtnt.com/2022/01/01/thinkcncf</id><content type="html" xml:base="https://mengtnt.com/2022/01/01/thinkcncf.html">&lt;p&gt;2022å¹´å³å°†åˆ°æ¥ä¹‹é™…ï¼Œæ”¶åˆ°è…¾è®¯äº‘æœåŠ¡å™¨å‹å¥½çš„æé†’ï¼šâ€œå°Šæ•¬çš„ç”¨æˆ·ï¼Œä½ xxxxäº‘æœåŠ¡å™¨èµ„æºå°†äº2021.12.30å·åˆ°æœŸï¼Œåˆ°æœŸåå°†åœ¨ä¸€å¤©ååœæ­¢æœåŠ¡ï¼Œåœæœåæ•°æ®ä¸ºä½ ä¿ç•™7å¤©ï¼Œé€¾æœŸæœªç»­è´¹èµ„æºå°†è¢«é‡Šæ”¾â€ã€‚æˆ‘æƒ³ç€ä¼ä¸šéƒ½ä¸å®¹æ˜“ï¼Œæ¯•ç«Ÿå¹´åº•äº†ç»­ä¸ªè´¹å§ã€‚ä¸€æ‰“å¼€ç»­è´¹é¡µé¢ï¼Œç»­è´¹çš„è¯ä¸€å¹´å°†è¿‘2000RMBï¼Œè™½ç„¶è‡ªå·±çŸ¥é“ç»­è´¹è‚¯å®šä¼šè´µä¸€äº›ï¼Œä½†æ˜¯ç€å®è¿˜æ˜¯éœ‡æƒŠäº†ä¸‹ã€‚æ¯•ç«Ÿå½“æ—¶ä¹°çš„è…¾è®¯äº‘æœåŠ¡å™¨3å¹´ä¹Ÿå°±300å¤šå—é’±ã€‚&lt;/p&gt;

&lt;h2 id=&quot;ç»­è´¹ä¹‹è·¯&quot;&gt;ç»­è´¹ä¹‹è·¯&lt;/h2&gt;

&lt;p&gt;è‡ªå·±æƒ³ç€å¹´åº•å„ç§ä¼˜æƒ æ´»åŠ¨åº”è¯¥æœ‰ä¼˜æƒ åˆ¸å§ï¼Œå°±ä»è…¾è®¯äº‘çš„å®˜æ–¹çœ‹äº†ä¸‹ï¼Œæœç„¶æœ‰ï¼Œç„¶åç¾æ»‹æ»‹çš„é¢†äº†è€ç”¨æˆ·ç»­è´¹åˆ¸ä¸€å¹´å°±åªè¦300å¤šå—é’±äº†ã€‚æ­£å‡†å¤‡ç»­è´¹çš„æ—¶å€™ï¼Œæˆ‘æ€è€ƒäº†ä¸‹ï¼Œä¸ºå•¥æœåŠ¡å™¨ç»­è´¹çš„ä»·æ ¼æ¶¨çš„è¿™ä¹ˆç¦»è°±ï¼Œæˆ‘è¿™å°æœåŠ¡å™¨ä¹Ÿå°±è‡ªå·±çš„åšå®¢å’Œä¸€ä¸ªMySQLæ•°æ®åº“ï¼Œä»¥åŠè‡ªå·±ä¸€äº›æ—¥å¸¸è‡ªåŠ¨åŒ–çš„è„šæœ¬åœ¨è¿è¡Œã€‚ä¸è‡³äºå ç”¨è¿™ä¹ˆå¤šèµ„æºå§ã€‚&lt;/p&gt;

&lt;p&gt;åŒæ—¶æˆ‘çœ‹äº†ä¸‹è…¾è®¯äº‘çš„é”€å”®æ”¿ç­–ï¼Œæ–°ç”¨æˆ·æ³¨å†ŒåŒæ ·çš„æœåŠ¡å™¨ä¸€å¹´åªè¦79å—é’±ï¼Œå¿ƒé‡Œæœ‰äº›ä¸å¹³è¡¡äº†ã€‚è…¾è®¯è¿™ä¸å°±æ˜¯æ€ç†Ÿå®¢è¡Œä¸ºï¼Œéš¾é“è…¾è®¯ä¸æ€•å®¢æˆ·è·‘è·¯ä¹ˆï¼Ÿä»”ç»†æƒ³äº†ä¸‹ï¼Œè¿™ä¸å°±æ˜¯å…¸å‹çš„ToBè¡Œä¸šçš„é”€å”®å¥—è·¯ä¹ˆï¼Ÿå…ˆç”¨åº•ä»·è®©ä½ å…¥å‘ï¼Œç„¶åä¹‹åä¸€è¡Œä»£ç å¯èƒ½å°±æ˜¯ä½ åŸæ¥å…¥å‘çš„å‡ åå€ã€‚&lt;/p&gt;

&lt;h2 id=&quot;è¿ç§»æˆæœ¬&quot;&gt;è¿ç§»æˆæœ¬&lt;/h2&gt;

&lt;p&gt;å…¶å®ToBæœåŠ¡çš„ä¼ä¸šï¼Œæ•¢äºè¿™æ ·å¹²çš„æœ¬è´¨åŸå› ï¼Œå°±æ˜¯ä¼ä¸šæœåŠ¡çš„è¿ç§»æˆæœ¬ã€‚å…¸å‹çš„åƒç»™ä¼ä¸šæä¾›CRMæœåŠ¡ï¼Œå½“ä½ çš„ä¼ä¸šå®¢æˆ·æ•°æ®éƒ½ç¦»ä¸å¼€ä»–ä»¬çš„æœåŠ¡æ—¶ï¼Œè¿™æ—¶å€™ä¼ä¸šå°±å¯ä»¥åŠ ä»·äº†ï¼Œå› ä¸ºè¿™æ—¶å€™ä»–ä»¬åœ¨å¸‚åœºä¸Šå·²ç»æ²¡æœ‰å¯¹æ‰‹äº†ï¼Œè¢«æœåŠ¡çš„ä¼ä¸šä¹Ÿå¾ˆæ— å¥ˆï¼Œå› ä¸ºè¿ç§»æˆæœ¬å¾€å¾€ä¼šå¾ˆå¤§ï¼Œåªè¦ä»·æ ¼ä¸è¦é«˜çš„å¤ªç¦»è°±ï¼Œä»–ä»¬è‡ªç„¶ä¼šæ€ªæ€ªä»˜è´¹ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¯´åšSAASæœåŠ¡çš„ä¼ä¸šï¼Œå¾€å¾€æ”¶å…¥ç›¸å¯¹ç¨³å®šï¼Œæ¯”åšToCä¼ä¸šç¨³å®šæ€§å¥½å¾ˆå¤šã€‚ToCçš„ä¼ä¸šä¸€ä¸ªåŠŸèƒ½ä½“éªŒæ²¡åšå¥½ï¼Œå¾—ç½ªäº†ç”¨æˆ·ä»–ä»¬ç«‹é©¬å¯èƒ½å°±è½¬å¤´å»ç”¨å¦ä¸€ä¸ªä¼ä¸šçš„äº§å“äº†ï¼Œç”¨æˆ·èŠ±è´¹çš„æˆæœ¬å¯èƒ½ä»…ä»…æ˜¯é‡æ–°ä¸‹è½½ä¸€ä¸ªæ–°APPè€Œå·²ã€‚&lt;/p&gt;

&lt;p&gt;é‚£ä¹ˆè¿™æ ·æƒ…å†µæœ‰æ²¡æœ‰ç ´å±€é‚£ï¼Ÿå°¤å…¶åƒäº‘æœåŠ¡å¸‚åœºï¼Œå¦‚æœä¸€ä¸ªä¼ä¸šçš„æ‰€æœ‰æœåŠ¡å™¨éƒ½æ˜¯é€šè¿‡ä¸€å®¶å…¬å¸è´­ä¹°çš„ï¼Œæƒ³è¦è¿ç§»åˆ°å¦ä¸€ä¸ªå®¶å…¬å¸æˆæœ¬ä¼šæœ‰å¤šé«˜å“ªï¼Ÿè™½ç„¶è‡ªå·±æœåŠ¡å™¨ä¸Šä¹Ÿå°±5ï¼Œ8ä¸ªæœåŠ¡åœ¨è·‘ï¼Œå’Œä¼ä¸šæœåŠ¡æ²¡å‘ç›¸æå¹¶è®ºã€‚ä¸è¿‡è‡ªå·±æƒ³å¯¹æ¯”ä¸‹è¿ç§»çš„æˆæœ¬åˆ°åº•æœ‰å¤šé«˜ã€‚ç„¶åå°±èŠ±äº†79å—é’±ä¹°äº†ä¸€ä¸ªæ–°çš„æœåŠ¡å™¨ã€‚ä¸‹é¢å°±æè¿°ä¸‹è‡ªå·±çš„è¿ç§»è¿‡ç¨‹ã€‚&lt;/p&gt;

&lt;h2 id=&quot;æœåŠ¡è¿ç§»&quot;&gt;æœåŠ¡è¿ç§»&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;æ–°è´­ä¹°çš„æœåŠ¡å™¨é¦–å…ˆè¦é…ç½®æœåŠ¡å™¨çš„ç§˜é’¥ï¼Œæ–¹ä¾¿ç”¨sshç™»é™†ç®¡ç†æœåŠ¡å™¨ã€‚ä»¥åŠä¿®æ”¹sshd_configä¸€äº›é…ç½®ã€‚å¤§æ¦‚èŠ±è´¹äº†åŠå°æ—¶æ—¶é—´ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ä¸‹è½½ä¸€äº›å¸¸ç”¨çš„è½¯ä»¶ï¼Œå…¶å®æˆ‘è¿™é‡Œä¸»è¦æ˜¯gitå’Œdockerã€‚gitæ˜¯å› ä¸ºè¦ä¸‹è½½è‡ªå·±æœåŠ¡çš„æºç è€Œdockeræ˜¯è¦éƒ¨ç½²è¿™äº›æœåŠ¡ã€‚è¿™ä¸ªå°±çœ‹ç½‘è·¯äº†ï¼Œ10å‡ åˆ†é’Ÿã€‚ï¼ˆç°åœ¨å¾ˆå¤šè½»é‡çº§æœåŠ¡å™¨éƒ½è‡ªå¸¦dockeräº†ï¼‰&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ä¸‹è½½æºç å¼€å§‹ç¼–è¯‘æ„å»ºæ‰€æœ‰åŸºäºdockerçš„æœåŠ¡ï¼Œè¿™ä¸ªæ„å»ºè¿‡ç¨‹å¯èƒ½æ¯”è¾ƒä¹…å¤§æ¦‚ç”¨äº†1ä¸ªå°æ—¶ï¼Œè‡ªå·±æœåŠ¡ç”¨çš„ç¯å¢ƒä¸»è¦æ˜¯rubyã€nodeã€mysqlã€phpã€Nginxã€‚è¿™ä¸ªè¿‡ç¨‹å…¨ç§°éƒ½ä¸éœ€è¦æˆ‘æ“ä½œã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ä¿®æ”¹é˜²ç«å¢™çš„é…ç½®ï¼Œå¼€å‘ç«¯å£è®©å¤–é¢çš„æœåŠ¡å™¨è®¿é—®ã€‚å‡ åˆ†é’Ÿå·¦å³ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ä¿®æ”¹åŸŸåè§£æï¼Œè‡ªå·±ç”¨çš„godaddyåŸŸåï¼Œè§£æä½¿ç”¨çš„æ—¶é—´ï¼Œ10åˆ†é’Ÿå·¦å³ã€‚&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æ€»è®¡è‡ªå·±æ™šä¸Šæäº†2åˆ°3ä¸ªå°æ—¶ï¼ŒæŠŠæ‰€æœ‰çš„æœåŠ¡å™¨è¿ç§»å¥½äº†ã€‚ç„¶åè‡ªå·±å¿ƒé‡Œç¾æ»‹æ»‹ï¼Œæ¯•ç«Ÿçœä¸‹äº†2000å—é’±ã€‚è¿™ä¹ˆé¡ºåˆ©çš„è¿ç§»å…¶å®è‡ªå·±è¿˜æ˜¯å¾ˆæ„å¤–çš„ã€‚&lt;/p&gt;

&lt;p&gt;çŠ¹è®°å¾—2011å¹´é‚£æ—¶å€™ï¼Œå½“æ—¶äº‘è®¡ç®—ç™¾å®¶äº‰é¸£ï¼Œè‡ªå·±ä¹°è¿‡æ–°æµªçš„äº‘æœåŠ¡SAE(æ–°æµªå½“æ—¶çš„æœåŠ¡å¯¹æ ‡Google App Engineï¼ˆGAE))ã€‚ç„¶åéƒ¨ç½²äº†ä¸€ä¸ªç½‘ç«™å’Œå‡ ä¸ªæ¥å£çš„æœåŠ¡ï¼Œç”¨çš„ç¯å¢ƒæ˜¯Pythonã€‚æ–°æµªSAEå¯ä»¥é€‰æ‹©æœåŠ¡å™¨è‡ªå¸¦pythonç¯å¢ƒï¼Œç”±äºè‡ªå·±çš„æœåŠ¡æ—¶åŸºäºPythonçš„web2pyæ¡†æ¶ï¼Œç”¨äº†SAEåï¼Œåªè¦ç®€å•çš„å¢åŠ ä¸€äº›å’Œå¹³å°çš„ç›¸å…³çš„é…ç½®å°±å¾ˆå¿«å¯ä»¥è¿è¡Œäº†ã€‚&lt;/p&gt;

&lt;p&gt;åªæœ‰ç”±äºä¸€äº›ä¸šåŠ¡è¿­ä»£ï¼Œæ¥å…¥ä»–ä»¬çš„MemCacheå·²ç»ä½¿ç”¨äº†SAEçš„MySQLæ•°æ®åº“ã€‚è¿™ä¸ªæœåŠ¡è¿è¡Œä¸€å¹´åï¼Œæ„Ÿè§‰è´¹ç”¨æˆæœ¬æ–¹é¢å·²ç»è¿œè¿œè¶…è¿‡äº†é˜¿é‡Œäº‘ã€‚æ‰€ä»¥å°±æƒ³è¿ç§»åˆ°é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œä¹°äº†é˜¿é‡Œäº‘æœåŠ¡å™¨åï¼Œéƒ¨ç½²äº†è‡ªå·±çš„æºç ï¼Œå‘ç°å„ç§å„ç§æŠ¥é”™å’Œæ¥å£ä¸åŒï¼Œæ”¹åŠ¨è¿™äº›é—®é¢˜ï¼ŒèŠ±äº†1ï¼Œ2å¤©çš„æ—¶é—´æ‰è¿ç§»æˆåŠŸã€‚&lt;/p&gt;

&lt;p&gt;ä»ä¸Šé¢çœ‹å‡ºå½“æ—¶æœåŠ¡å™¨è¿ç§»çš„æˆæœ¬è¿˜æ˜¯æŒºé«˜çš„ï¼Œè‡ªå·±å°±ä¸€ä¸ªç®€å•çš„æœåŠ¡å°±è¿ç§»äº†è¿™ä¹ˆä¹…ï¼Œå¯æƒ³å¦‚æœæ˜¯ä¸€ä¸ªä¼ä¸šé‚£è‚¯å®šè¦æ›´é«˜çš„æˆæœ¬ã€‚å…¶ä¸­è¿ç§»å›°éš¾çš„æœ¬è´¨åŸå› ï¼Œå°±æ˜¯æ¯ä¸ªäº‘æœåŠ¡å™¨é…ç½®éƒ½æœ‰ä»–ä»¬è‡ªå·±ç‰¹æ®Šå®šåˆ¶çš„åŠŸèƒ½ï¼Œè™½ç„¶SAEæœ‰Pythonç¯å¢ƒï¼Œä½†æ˜¯è¦å®Œå…¨ä½¿ç”¨å¹³å°çš„ç¯å¢ƒï¼Œéœ€è¦ä¾µå…¥è‡ªå·±çš„æºç ï¼Œå¢åŠ ä¸€äº›å¹³å°ç›¸å…³çš„é…ç½®ã€‚é˜¿é‡Œäº‘çš„æœåŠ¡å’Œæ–°æµªçš„è¿™äº›æ ‡å‡†éƒ½å„ä¸ç›¸åŒï¼Œå°±é€ æˆäº†è¿ç§»çš„æˆæœ¬éå¸¸çš„å·¨å¤§ã€‚&lt;/p&gt;

&lt;h2 id=&quot;äº‘åŸç”Ÿ&quot;&gt;äº‘åŸç”Ÿ&lt;/h2&gt;

&lt;p&gt;æ­£åº”äº†é‚£å¥åè¨€â€œå¤©ä¸‹å¤§åŠ¿åˆä¹…å¿…åˆ†ï¼Œåˆ†ä¹…é—­åˆâ€ï¼Œè‡ªä»äº‘è®¡ç®—æœåŠ¡å‡ºæ¥åï¼Œå„å®¶å…¬å¸éƒ½åœ¨äº‰å¤ºè¿™ä¸ªé¢†åŸŸï¼Œç„¶åäºšé©¬é€Šã€å¾®è½¯ã€è°·æ­Œã€é˜¿é‡Œäº‘è¿™å‡ ä¸ªå‚å•†åœ¨å„è‡ªçš„åŒºåŸŸæ‹”å¾—å¤´ç­¹ã€‚ä½†æ˜¯äº‘è®¡ç®—å„ä¸ªå¹³å°çš„æ ‡å‡†å¹¶ä¸ç»Ÿä¸€ï¼Œæœ¬è´¨ä¸Šå¾ˆå®¹æ˜“é€ æˆä¸Šé¢æˆ‘è¯´çš„å±€é¢ï¼Œä¹Ÿå› ä¸ºè¿™äº›å¼Šç«¯ï¼Œä¸€äº›ä¸­å°ä¼ä¸šå¹¶ä¸æ˜¯å¾ˆä¹æ„ä¸Šäº‘ï¼Œæ¯•ç«Ÿè¿ç§»æˆæœ¬è¿˜æ˜¯å¾ˆå¤§çš„é—®é¢˜ã€‚æ‰€ä»¥ç»Ÿä¸€äº‘æœåŠ¡çš„æ ‡å‡†åŠ¿åœ¨å¿…å¾—ï¼Œäº‘åŸç”Ÿçš„æ¦‚å¿µé¡ºåŠ¿è€Œå‡ºäº†ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;äº‘åŸç”Ÿçš„æ¦‚å¿µï¼Œç”±æ¥è‡ªPivotalçš„MattStineäº2013å¹´é¦–æ¬¡æå‡ºï¼Œè¢«ä¸€ç›´å»¶ç»­ä½¿ç”¨è‡³ä»Šã€‚è¿™ä¸ªæ¦‚å¿µæ˜¯Matt Stineæ ¹æ®å…¶å¤šå¹´çš„æ¶æ„å’Œå’¨è¯¢ç»éªŒæ€»ç»“å‡ºæ¥çš„ä¸€ä¸ªæ€æƒ³é›†åˆï¼Œå¹¶å¾—åˆ°äº†ç¤¾åŒºçš„ä¸æ–­å®Œå–„ï¼Œå†…å®¹éå¸¸å¤šï¼ŒåŒ…æ‹¬DevOpsã€æŒç»­äº¤ä»˜ã€å¾®æœåŠ¡ã€æ•æ·åŸºç¡€è®¾æ–½å’Œ12è¦ç´ ç­‰å‡ å¤§ä¸»é¢˜ï¼Œæ˜¯ä¸€å¥—å…¸å‹ä¸Šäº‘æŒ‡å¯¼æ€æƒ³å’Œæ–¹æ³•è®ºï¼ŒåŒæ—¶æä¾›å…·ä½“çš„æ“ä½œå·¥å…·ã€‚é‡‡ç”¨åŸºäºäº‘åŸç”Ÿçš„æŠ€æœ¯å’Œç®¡ç†æ–¹æ³•ï¼Œå¯ä»¥æ›´å¥½åœ°æŠŠä¸šåŠ¡ç”Ÿäºâ€œäº‘â€æˆ–è¿ç§»åˆ°äº‘å¹³å°ï¼Œä»è€Œäº«å—â€œäº‘â€çš„é«˜æ•ˆå’ŒæŒç»­çš„æœåŠ¡èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;äº‘åŸç”Ÿçš„æ¦‚å¿µæå‡ºæ¥ä»¥åã€‚æ‹¥æŠ±æœ€å¤šçš„ä¼ä¸šå°±æ˜¯è°·æ­Œã€‚å¹¶ä¸”ä¸€ç›´åœ¨æ¨åŠ¨å’Œå®è·µè¿™ä¸ªè¡Œä¸ºï¼Œè°·æ­Œè¿™ç§åšæ³•ä¹Ÿä¸æ— é“ç†ã€‚ä¸ºä½•è¦ç»Ÿä¸€åŒ–äº‘è®¡ç®—æœåŠ¡çš„æ ‡å‡†å“ªï¼Ÿå› ä¸ºè°·æ­Œçœ‹åˆ°äº†äºšé©¬é€Šåœ¨äº‘æœåŠ¡å¸‚åœºèµšåˆ°ç›†æ»¡é’µæ»¡ã€‚è°·æ­Œç”¨çš„æ‰“æ³•å’Œå½“å¹´çš„Androidå¦‚åˆä¸€è¾™ï¼ŒæŒ‡å®šæ ‡å‡†å’Œå¼€æºï¼Œæ¨å‡ºäº†k8så’Œdockerè¿™ä¸¤ç§äº‘åŸç”Ÿçš„åˆ©å™¨ã€‚&lt;/p&gt;

&lt;p&gt;è°·æ­Œç”¨è¿™ç§æ–¹å¼å¯¹äº‘æœåŠ¡å¸‚åœºè¿›è¡Œçš„ç ´å±€æ–¹å¼ã€‚å½“å¹´çš„Androidçš„å¥—è·¯å¾ˆåƒé€šè¿‡ç»Ÿä¸€æ ‡å‡†ï¼Œæ¥é™ä½ä¼ä¸šä¾èµ–å¹³å°çš„ç³»æ•°ã€‚è®©ä¼ä¸šå¯ä»¥æ›´æ”¾å¿ƒçš„é€‰æ‹©è¿ç§»è‡ªå·±çš„äº‘æœåŠ¡å‚å•†ã€‚å°±è·ŸAndroidä¸€æ ·ï¼Œå‡ºæ¥ä¸€ä¸ªå¼€æºçš„æ ‡å‡†æ‰€æœ‰å‚å•†æ¥å…¥å°±è¡Œäº†ã€‚è¿™æ ·å°±æ¶ˆé™¤äº†å¾ˆå¤šä¼ä¸šçš„é¡¾è™‘ï¼Œå¤§å®¶è‡ªç„¶å°±éƒ½åŸå› å¹²è¿™ä¸ªäº‹æƒ…ï¼ŒåŒæ—¶ç«äº‰ä¹Ÿå°±ä¼šä¸Šæ¥äº†ã€‚æ‰€ä»¥å½“æ—¶Androidå’Œå¾®è½¯ã€è‹¹æœçš„ç«äº‰ä¸­ï¼Œæ‰èƒ½åæ¥å±…ä¸Šã€‚&lt;/p&gt;

&lt;p&gt;ä¸è¿‡è°·æ­Œçš„è¿™ç§æ‰“æ³•ï¼Œå¿…ç„¶ä¼šé€ æˆäº‘è®¡ç®—è¡Œä¸šå‚å•†çš„åˆ©æ¶¦ä¸‹é™ï¼Œä½†æ˜¯æ•´ä½“çš„äº‘æœåŠ¡è´¨é‡å°±ä¼šä¸Šå‡ã€‚å…¶å®é•¿è¿œæ¥çœ‹è¿˜æ˜¯å¾ˆæœ‰åˆ©è¡Œä¸šçš„å‘å±•ã€‚ä¸‹é¢å¼•ç”¨ä¸‹äº‘åŸç”Ÿçš„å¸¸ç”¨æ¦‚å¿µã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;å…¶å®ä»äº‘åŸç”Ÿæ¦‚å¿µä¸Šæ¥çœ‹ï¼Œäº‘åŸç”Ÿæ¯”ä¸Šäº‘æ›´è¿›ä¸€æ­¥ï¼Œä¸å†æ˜¯ä¸€ä¸ªæ–¹å‘æˆ–è€…æŒ‡å¯¼æ€æƒ³ï¼Œè€Œæ˜¯æ˜ç¡®äº†ä¸Šäº‘çš„æ–¹å¼å’Œæœ€ä½³å®è·µã€‚CNCF TOCå¼ ç£Šåˆ†äº«ä»–å¯¹äº‘åŸç”Ÿçš„ç†è§£ï¼šâ€œäº‘åŸç”Ÿæ˜¯ä¸€æ¡æœ€ä½³è·¯å¾„æˆ–è€…æœ€ä½³å®è·µã€‚æ›´è¯¦ç»†çš„è¯´ï¼Œäº‘åŸç”Ÿä¸ºç”¨æˆ·æŒ‡å®šäº†ä¸€æ¡ä½å¿ƒæ™ºè´Ÿæ‹…çš„ã€æ•æ·çš„ã€èƒ½å¤Ÿä»¥å¯æ‰©å±•ã€å¯å¤åˆ¶çš„æ–¹å¼æœ€å¤§åŒ–åœ°åˆ©ç”¨äº‘çš„èƒ½åŠ›ã€å‘æŒ¥äº‘çš„ä»·å€¼çš„æœ€ä½³è·¯å¾„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºäº‘åŸç”Ÿæœ¬è´¨ä¸Šå°±æ˜¯ä¸ºäº†è§£å†³å„å®¶äº‘å‚å•†æ ‡å‡†çš„é—®é¢˜ï¼Œå¦‚æœå¤§å®¶éƒ½éµå¾ªäº†è¿™ä¸ªåŸåˆ™ï¼Œé‚£ä¹ˆä¼ä¸šåªè¦å…³æ³¨è‡ªå·±ä¸šåŠ¡çš„ä»£ç ã€‚å†™å®Œä¹‹åæƒ³ä»ä¸€ä¸ªäº‘ä¸Šè¿ç§»åˆ°å¦ä¸€ä¸ªéƒ½å¾ˆå®¹æ˜“ï¼Œå› ä¸ºæ ‡å‡†æ˜¯ç»Ÿä¸€çš„ä¸ä¼šå‡ºç°ä¸å…¼å®¹ã€‚&lt;/p&gt;

&lt;h2 id=&quot;æœªæ¥å±•æœ›&quot;&gt;æœªæ¥å±•æœ›&lt;/h2&gt;

&lt;p&gt;äº‘è®¡ç®—æœåŠ¡è¡Œä¸šæ˜¯å…¸å‹çš„ToBä¼ä¸šï¼ŒToBçš„ä¼ä¸šä»·å€¼åšåˆ°æœ€åï¼Œå¾€å¾€å°±åƒå·¥ä¸šæ—¶ä»£çš„æ°´ç”µç…¤ä¸€æ ·ï¼Œæˆæœ¬ä¼šå›å½’åˆ°äº‹ç‰©æœ¬èº«çš„ä»·å€¼ã€‚å¾€å¾€ä¸åƒToCçš„è¡Œä¸šåˆ©æ¶¦å¯ä»¥åšåˆ°å¾ˆé«˜ï¼Œå¾ˆé‡è¦çš„ä¸€ç‚¹å°±æ˜¯Tocè¡Œä¸šå¾ˆéš¾å½¢æˆç»Ÿä¸€çš„æœåŠ¡æ ‡å‡†ã€‚å¯¹äºTocè¡Œä¸šæ¥è¯´ï¼Œé¦–å…ˆæœ‰åºå¤§çš„ç”¨æˆ·ç¾¤ä½“ï¼Œå¹¶ä¸”æ¯ä¸ªç”¨æˆ·çš„éœ€æ±‚éƒ½ä¸ä¸€æ ·ï¼Œè¦å„ç§å®šåˆ¶åŒ–çš„éœ€æ±‚ï¼Œç»Ÿä¸€å°±å¾ˆéš¾ã€‚ä½†æ˜¯å¦‚æœæ˜¯æœåŠ¡ä¼ä¸šçš„è¯ï¼Œæœ¬èº«ç¾¤ä½“ä¸ä¼šç‰¹åˆ«å¤§ï¼Œå¹¶ä¸”æ ‡å‡†ç»Ÿä¸€åè€Œæœ‰åˆ©äºä¼ä¸šåšè¿ç§»ï¼Œæ‰€ä»¥ç»Ÿä¸€å°±ç›¸å¯¹å®¹æ˜“ä¸€äº›ã€‚&lt;/p&gt;

&lt;p&gt;å…¶å®è¿™ä¹Ÿæ˜¯å¸‚åœºå‘å±•çš„å¿…ç„¶è¿‡ç¨‹ã€‚ä»»ä½•è¡Œä¸šæƒ³è¦é™ä½æˆæœ¬çš„è¿‡ç¨‹ä¸­ï¼Œæä¾›æ›´å¥½çš„æœåŠ¡ï¼Œä¸€å®šæ˜¯å¤§å®¶å½¢æˆç»Ÿä¸€çš„æ ‡å‡†ï¼Œå¯ä»¥è‡ªç”±çš„ç«äº‰ï¼Œç„¶åå›å½’åˆ°ä»·å€¼æœ¬èº«äº†ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¾ˆå¤šå›½å®¶ä¼šæœ‰å„æ–­æ³•ï¼Œå› ä¸ºä¸€æ—¦ä¸€ä¸ªè¡Œä¸šè¢«å„æ–­äº†ï¼Œç”¨æˆ·è¿ç§»æˆæœ¬æ— é™å¤§çš„æ—¶å€™ï¼Œå„æ–­çš„ä¼ä¸šå°±å¯ä»¥æ¼«å¤©è¦ä»·ã€‚&lt;/p&gt;

&lt;p&gt;ä»äº‘è®¡ç®—çš„å‘å±•ä¸­ä¹Ÿå¯ä»¥çœ‹å‡ºç°åœ¨å¸‚åœºç»æµï¼Œå¾€å¾€ä»·å€¼æœ€é«˜çš„äº§å“å°±æ˜¯å¸‚é¢ä¸Šæ²¡æœ‰ç»Ÿä¸€çš„æ ‡å‡†ï¼Œéœ€è¦ç»™ç”¨æˆ·ç‰¹æ®Šå®šåˆ¶çš„(è¿™é‡Œçš„ä»·å€¼æ˜¯è¯´å¯¹æä¾›çš„ä¼ä¸šèµšé’±çš„å¤šå°‘ï¼Œå¹¶ä¸ä»£è¡¨å¯¹æ•´ä¸ªè¡Œä¸šçš„ä»·å€¼å¾ˆé«˜)ã€‚ä¸€æ—¦ä¸€ä¸ªè¡Œä¸šå½¢æˆäº†æ ‡å‡†ï¼Œå¤§å®¶éƒ½å¯ä»¥æŒ‰ç…§è¿™ä¸ªæ ‡å‡†äº§å‡ºä¸œè¥¿çš„æ—¶å€™ï¼Œå°±æ„å‘³ç€è¿™ä¸ªè¡Œä¸šçš„åˆ©æ¶¦å·²ç»åŸºæœ¬å›å½’åˆ°ä»·å€¼æœ¬èº«äº†ã€‚å…¶å®æœ¬è´¨ä¸Šè¿™æ›´åˆ©äºè¡Œä¸šçš„è“¬å‹ƒå‘å±•ï¼Œå°±è·Ÿç°åœ¨çš„å»ºç­‘ã€ç¡¬ä»¶åˆ¶é€ ã€æ±½è½¦åˆ¶é€ è¡Œä¸šï¼Œå¤§å®¶å¯ä»¥ç™¾å®¶äº‰é¸£ï¼ŒåŒæ—¶æ¶ˆè´¹è€…ä¹Ÿèƒ½äº«å—åˆ°æ›´å¥½çš„æœåŠ¡ã€‚è¿™æ‰æ˜¯å¥åº·æœ‰åˆ©çš„å‘å±•ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥æ‰€è°“çº¢æµ·å¸‚åœºï¼Œæœ¬è´¨ä¸Šæ˜¯è¡Œä¸šè¿˜å¤„äºæ ‡å‡†ä¸ç»Ÿä¸€çš„èŠ‚ç‚¹ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¼ä¸šæœ€èƒ½èµšåˆ°åŸå§‹èµ„æœ¬çš„åœ°æ–¹ï¼Œä¸€æ—¦è¡Œä¸šå½¢æˆæ ‡å‡†ï¼Œæœ€ç»ˆå¸‚åœºéƒ½ä¼šå½’äºå†·é™ï¼Œä¹Ÿå°±å›å½’åˆ°ç†æ€§çš„ä»·æ ¼ã€‚ä¸ä»…æƒ³èµ·ä¸€å¥ä¿—è¯­â€å°˜å½’å°˜,åœŸå½’åœŸ,åŠå°½ç¹å,ä¸è¿‡ä¸€æ¬ç»†æ²™â€ã€‚æ‰€ä»¥äº‘åŸç”Ÿç°åœ¨è“¬å‹ƒçš„å‘å±•ä¹Ÿæ˜¯å°è¯äº†è¿™ä¸ªé“ç†ã€‚&lt;/p&gt;</content><author><name>mengtnt</name></author><summary type="html">2022å¹´å³å°†åˆ°æ¥ä¹‹é™…ï¼Œæ”¶åˆ°è…¾è®¯äº‘æœåŠ¡å™¨å‹å¥½çš„æé†’ï¼šâ€œå°Šæ•¬çš„ç”¨æˆ·ï¼Œä½ xxxxäº‘æœåŠ¡å™¨èµ„æºå°†äº2021.12.30å·åˆ°æœŸï¼Œåˆ°æœŸåå°†åœ¨ä¸€å¤©ååœæ­¢æœåŠ¡ï¼Œåœæœåæ•°æ®ä¸ºä½ ä¿ç•™7å¤©ï¼Œé€¾æœŸæœªç»­è´¹èµ„æºå°†è¢«é‡Šæ”¾â€ã€‚æˆ‘æƒ³ç€ä¼ä¸šéƒ½ä¸å®¹æ˜“ï¼Œæ¯•ç«Ÿå¹´åº•äº†ç»­ä¸ªè´¹å§ã€‚ä¸€æ‰“å¼€ç»­è´¹é¡µé¢ï¼Œç»­è´¹çš„è¯ä¸€å¹´å°†è¿‘2000RMBï¼Œè™½ç„¶è‡ªå·±çŸ¥é“ç»­è´¹è‚¯å®šä¼šè´µä¸€äº›ï¼Œä½†æ˜¯ç€å®è¿˜æ˜¯éœ‡æƒŠäº†ä¸‹ã€‚æ¯•ç«Ÿå½“æ—¶ä¹°çš„è…¾è®¯äº‘æœåŠ¡å™¨3å¹´ä¹Ÿå°±300å¤šå—é’±ã€‚</summary></entry><entry><title type="html">å¼‚å¸¸å’Œé”™è¯¯å¤„ç†</title><link href="https://mengtnt.com/2021/11/09/idempotence.html" rel="alternate" type="text/html" title="å¼‚å¸¸å’Œé”™è¯¯å¤„ç†" /><published>2021-11-09T02:25:11+00:00</published><updated>2021-11-09T02:25:11+00:00</updated><id>https://mengtnt.com/2021/11/09/idempotence</id><content type="html" xml:base="https://mengtnt.com/2021/11/09/idempotence.html">&lt;p&gt;å¼‚å¸¸å’Œé”™è¯¯ï¼Œå’‹ä¸€çœ‹å¾€å¾€éƒ½ä¼šä»¥ä¸ºæ˜¯ä¸€ä¸ªäº‹æƒ…ã€‚è¿™é‡Œé¦–å…ˆè¦å®šä¹‰ä¸‹æœ¬æ–‡å¼‚å¸¸å’Œé”™è¯¯çš„æ¦‚å¿µï¼Œä»¥ä¾¿äºå¯ä»¥åŒºåˆ†é€šç”¨çš„æ¦‚å¿µã€‚åœ¨ç¨‹åºè¿è¡Œä¸­å¦‚æœå‘ç”Ÿäº†é—®é¢˜ï¼Œä½†æ˜¯è¿™ä¸ªé—®é¢˜å¦‚æœé€šè¿‡å¢åŠ ç›¸åº”çš„ç¨‹åºé€»è¾‘å¯ä»¥æ¢å¤çš„å«åšå¼‚å¸¸ã€‚å¦‚æœå› ä¸ºç¨‹åºé€»è¾‘é—®é¢˜å¼•èµ·çš„ä¸å¯æ¢å¤çš„å¼‚å¸¸å«é”™è¯¯ï¼Œä¹Ÿå°±æ˜¯é€šå¸¸æ‰€è¯´çš„ç¨‹åºçš„BUGã€‚&lt;/p&gt;

&lt;p&gt;å®šä¹‰å¥½äº†è¿™ä¸¤ä¸ªæ¦‚å¿µåï¼Œå¯èƒ½ä¼šæœ‰ç–‘é—®ä¸ºä»€ä¹ˆè¦è¿™æ ·å®šä¹‰ï¼Œå¼‚å¸¸å’Œé”™è¯¯åœ¨æˆ‘ä»¬é€šç”¨ç†è§£çš„æ„ä¹‰ä¸Šæ˜¯ä¸€ä¸ªåŒä¹‰è¯ï¼Œæ²¡æœ‰æœ¬è´¨çš„åŒºåˆ«ã€‚å…¶å®åœ¨ç¨‹åºè®¾è®¡çš„å‘å±•è¿‡ç¨‹ä¸­ï¼Œæœ€å¼€å§‹è¿™ä¸¤ä¸ªæ¦‚å¿µä¹Ÿæ˜¯æ²¡ä»€ä¹ˆåŒºåˆ«çš„ï¼Œä½†æ˜¯éšç€è½¯ä»¶è®¾è®¡è¶Šæ¥è¶Šå¤æ‚æ…¢æ…¢è¡ç”Ÿå‡ºæ¥è¿™ä¸¤ä¸ªæ¦‚å¿µã€‚&lt;/p&gt;

&lt;h2 id=&quot;å¼‚å¸¸çš„æ¼”å˜&quot;&gt;å¼‚å¸¸çš„æ¼”å˜&lt;/h2&gt;

&lt;p&gt;é¦–å…ˆçœ‹ä¸‹æ¯”è¾ƒæ—©æœŸçš„Cè¯­è¨€ã€‚&lt;code class=&quot;highlighter-rouge&quot;&gt; Assert &lt;/code&gt;è¿™ä¸ªå…³é”®å­—åœ¨Cè¯­è¨€ä¸­å¾ˆå¸¸è§ï¼Œæœ¬è´¨ä¸Šæ˜¯å¤„ç†ç¨‹åºè®¾è®¡çš„é”™è¯¯çš„ï¼Œä¸€æ—¦å‡ºç°æ–­è¨€æ‰§è¡Œï¼Œå‡½æ•°æä¾›è€…æ˜¯æ²¡æœ‰èƒ½åŠ›æ¢å¤è¿™ä¸ªé—®é¢˜çš„ï¼Œéœ€è¦è°ƒç”¨æ–¹æ£€æŸ¥é—®é¢˜ï¼Œåé¢å¦‚æœç¨‹åºç»§ç»­è¿è¡Œä¸‹å»ï¼Œå¯èƒ½å‘ç”Ÿä¸å¯é¢„çŸ¥çš„é—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;ä¸€æ—¦æ‰§è¡Œåˆ°&lt;code class=&quot;highlighter-rouge&quot;&gt; Assert &lt;/code&gt;ï¼Œè¯´æ˜å‡½æ•°çš„è°ƒç”¨æ–¹çš„ç¨‹åºæ˜¯æœ‰bugçš„ï¼Œæ²¡æœ‰æ­£ç¡®çš„ä½¿ç”¨å‡½æ•°ï¼Œæ˜¾ç„¶æ˜¯ç¬¦åˆæˆ‘ä»¬ä¸Šé¢å®šä¹‰çš„é”™è¯¯æ¦‚å¿µã€‚&lt;/p&gt;

&lt;p&gt;å†æ¥è¯´ä¸‹å¼‚å¸¸ï¼Œé‚£ä¹ˆåœ¨Cè¯­è¨€ä¸­å¦‚ä½•å¤„ç†å¼‚å¸¸çš„æƒ…å†µï¼Ÿåœ¨è°ƒç”¨Cå‡½æ•°çš„æ—¶å€™ï¼Œå¦‚æœå¯èƒ½å‘ç”Ÿå¼‚å¸¸ï¼Œå¾€å¾€ä½¿ç”¨å‡½æ•°è¿”å›å€¼è¡¨ç¤ºå¦‚ä¸‹ã€‚&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;n&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;createMap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// è¿”å›å€¼è¡¨ç¤ºæˆåŠŸæˆ–è€…å¤±è´¥&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;num&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è°ƒç”¨è€…çœ‹åˆ°è¿™ç§ç±»å‹çš„APIï¼Œå¾€å¾€éœ€è¦å¢åŠ &lt;code class=&quot;highlighter-rouge&quot;&gt; if-else &lt;/code&gt;çš„åˆ¤æ–­ï¼Œæ¥è®©ç¨‹åºæ­£ç¡®çš„æ‰§è¡Œï¼Œå…¶å®è¿™å°±æ˜¯æ—©æœŸçš„å¼‚å¸¸å¤„ç†çš„æ–¹å¼ã€‚ç°åœ¨å¾ˆå¤šè¯­è¨€ä¹Ÿæ˜¯ç”¨è¿™ç§æ–¹å¼æ¥å¤„ç†çš„ã€‚ä½†æ˜¯ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œç¨‹åºä¸­éœ€è¦å†™å¤§é‡çš„&lt;code class=&quot;highlighter-rouge&quot;&gt; if-else &lt;/code&gt;è¯­å¥ï¼Œä¸åˆ©äºä»£ç çš„é˜…è¯»å’Œç»´æŠ¤ã€‚&lt;/p&gt;

&lt;h2 id=&quot;å¼‚å¸¸çš„å®šä¹‰&quot;&gt;å¼‚å¸¸çš„å®šä¹‰&lt;/h2&gt;

&lt;p&gt;ä¸ºäº†ä¿è¯ç¨‹åºçš„å¥å£®æ€§ï¼ŒåŒæ—¶ä¿è¯ä»£ç ä¹¦å†™çš„ä¾¿æ·æ€§ã€‚å¾ˆå¤šé«˜çº§è¯­è¨€å¼€å§‹å®šä¹‰äº†å¼‚å¸¸çš„æ¦‚å¿µï¼Œä¾‹å¦‚C++æ˜¯å¾ˆæ—©å°±åœ¨è¯­æ³•ä¸­å®šä¹‰äº†exceptionã€‚&lt;/p&gt;

&lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;k&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;c1&quot;&gt;// protected code&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;createMap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;userMap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;releaseMap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ExceptionName&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// code to handle ExceptionName exception&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;handlerExcepiton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™æ ·tryæ¨¡å—ä¸­ï¼Œæ‰€æœ‰å¯èƒ½å¼‚å¸¸çš„å‡½æ•°éƒ½å¯ä»¥ä¸€è¡Œä»£ç è°ƒç”¨ï¼Œä¸ç”¨åƒCè¯­è¨€è¿™æ ·å†™å¤§é‡çš„&lt;code class=&quot;highlighter-rouge&quot;&gt; if-else &lt;/code&gt;å¤„ç†ã€‚è¿™å¯¹äºä»£ç çš„é˜…è¯»æ€§è‡ªç„¶å¾ˆå¥½ï¼Œä½†æ˜¯åŒæ ·å­˜åœ¨ä¸€ä¸ªé—®é¢˜å°±æ˜¯æ€§èƒ½ã€‚ä¸ºä»€ä¹ˆå¤§é‡ä½¿ç”¨å¼‚å¸¸å¤„ç†ä»£ç ä¼šå¼•èµ·æ€§èƒ½é—®é¢˜å“ªï¼Ÿ&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªå°±æ¶‰åŠåˆ°å¼‚å¸¸å®ç°çš„é€»è¾‘äº†ã€‚å‡½æ•°ä¸­ä¸ºäº†æ•è·å¼‚å¸¸ï¼Œéœ€è¦é¢å¤–çš„å¼€è¾Ÿä¸€äº›ç©ºé—´ç»™å¼‚å¸¸å¯¹è±¡ä½¿ç”¨ã€‚åŒæ—¶å¼‚å¸¸ä¸€æ—¦å‘ç”Ÿéœ€è¦ä¸­æ–­å‡½æ•°çš„è°ƒç”¨å †æ ˆï¼ŒæŒ‡å‘å¼‚å¸¸å¤„ç†å‡½æ•°ã€‚è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºå †æ ˆå±•å¼€ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;å½“æˆ‘ä»¬è°ƒç”¨æŸäº›å‡½æ•°æ—¶ï¼Œå®ƒå°†åœ°å€å­˜å‚¨åˆ°è°ƒç”¨å †æ ˆä¸­ï¼Œä»å‡½æ•°è¿”å›åï¼Œéœ€è¦å¼¹å‡ºè¯¥åœ°å€ä»¥å¼€å§‹å…¶å‰©ä½™çš„å·¥ä½œã€‚å †æ ˆå±•å¼€æ˜¯ä¸€ä¸ªåœ¨è¿è¡Œæ—¶åˆ é™¤å‡½æ•°è°ƒç”¨å †æ ˆæ¡ç›®çš„è¿‡ç¨‹ã€‚è¦åˆ é™¤å †æ ˆå…ƒç´ ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¼‚å¸¸ã€‚ å¦‚æœå†…éƒ¨å‡½æ•°å¼•å‘å¼‚å¸¸ï¼Œåˆ™å°†åˆ é™¤å †æ ˆçš„æ‰€æœ‰æ¡ç›®ï¼Œå¹¶è¿”å›åˆ°ä¸»è°ƒç”¨ç¨‹åºå‡½æ•°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å¹¶ä¸”ä¸ä»…ä¸Šé¢è¯´çš„è¿™ä¸ªå¼€é”€ï¼Œå› ä¸ºå¼‚å¸¸å‡ºç°çš„å‡½æ•°ï¼Œå¯èƒ½å¾ˆæ—©å°±è¢«è°ƒç”¨äº†ï¼Œä½†æ˜¯å¾ˆæ™šæ‰å¼€å§‹ä½¿ç”¨catchæ•è·ã€‚è¿™æ—¶å€™å°±éœ€è¦æŠŠå¼‚å¸¸æ•°æ®å±‚å±‚ä¼ é€’ç»™éœ€è¦å¤„ç†çš„å‡½æ•°ã€‚æ‰€ä»¥ä»ä¸Šé¢æ¥çœ‹å¼‚å¸¸è¿™ä¸ªå¤„ç†è¿‡ç¨‹ï¼Œå¯¹æ¯”ä¸€ä¸ª&lt;code class=&quot;highlighter-rouge&quot;&gt; if else &lt;/code&gt;ç®€å•çš„è¯­å¥ï¼Œå¿…ç„¶æ˜¯å¾ˆæ¶ˆè€—æ€§èƒ½çš„ã€‚å¯¹äºC++è¿™ç§æ€§èƒ½è¦æ±‚æ¯”è¾ƒé«˜çš„ç¨‹åºè¯­è¨€ï¼Œå¼‚å¸¸è¿™ä¸ªæ€§èƒ½é—®é¢˜ä¸€ç›´è¢«è¯Ÿç—…ã€‚æ‰€ä»¥C++åœ¨ä½¿ç”¨å¼‚å¸¸çš„æ—¶å€™æœ‰å¾ˆå¤šçº¦æŸï¼Œä¹Ÿé€ æˆäº†å¼‚å¸¸å¤„ç†åœ¨C++è¯­æ³•ä¸­ï¼Œå¾ˆéš¾å¹¿æ³›çš„ä½¿ç”¨ã€‚ä¸‹é¢åˆ—ä¸‹å¾®è½¯å¯¹C++å¼‚å¸¸å¤„ç†ä½¿ç”¨çš„å»ºè®®ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;ä½¿ç”¨æ–­è¨€æ¥æ£€æŸ¥ç»ä¸åº”å‘ç”Ÿçš„é”™è¯¯ã€‚ ä½¿ç”¨å¼‚å¸¸æ¥æ£€æŸ¥å¯èƒ½å‡ºç°çš„é”™è¯¯ï¼Œä¾‹å¦‚ï¼Œå…¬å…±å‡½æ•°å‚æ•°çš„è¾“å…¥éªŒè¯ä¸­çš„é”™è¯¯ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;å½“å¤„ç†é”™è¯¯çš„ä»£ç ä¸é€šè¿‡ä¸€ä¸ªæˆ–å¤šä¸ªå¹²é¢„å‡½æ•°è°ƒç”¨æ£€æµ‹åˆ°é”™è¯¯çš„ä»£ç åˆ†ç¦»æ—¶ï¼Œä½¿ç”¨å¼‚å¸¸ã€‚ å½“å¤„ç†é”™è¯¯çš„ä»£ç ä¸æ£€æµ‹åˆ°é”™è¯¯çš„ä»£ç ç´§å¯†è€¦åˆæ—¶ï¼Œè€ƒè™‘æ˜¯å¦ä½¿ç”¨é”™è¯¯ä»£ç è€Œä¸æ˜¯åœ¨æ€§èƒ½å…³é”®å¾ªç¯ä¸­ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;å¯¹äºå¯èƒ½å¼•å‘æˆ–ä¼ æ’­å¼‚å¸¸çš„æ¯ä¸ªå‡½æ•°ï¼Œè¯·æä¾›ä»¥ä¸‹ä¸‰ç§å¼‚å¸¸ä¿è¯ä¹‹ä¸€ï¼šå¼ºä¿éšœã€åŸºæœ¬ä¿è¯æˆ– nothrow (noexcept) ä¿è¯ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;æŒ‰å€¼å¼•å‘å¼‚å¸¸ï¼ŒæŒ‰å¼•ç”¨æ¥æ•è·å¼‚å¸¸ã€‚ ä¸è¦æ•è·æ— æ³•å¤„ç†çš„å†…å®¹ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ä¸è¦ä½¿ç”¨ c + + 11 ä¸­å·²å¼ƒç”¨çš„å¼‚å¸¸è§„èŒƒã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;åº”ç”¨ä½¿ç”¨æ ‡å‡†åº“å¼‚å¸¸ç±»å‹ã€‚ ä» exception ç±»å±‚æ¬¡ç»“æ„æ´¾ç”Ÿè‡ªå®šä¹‰å¼‚å¸¸ç±»å‹ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ä¸å…è®¸å¯¹ææ„å‡½æ•°æˆ–å†…å­˜é‡Šæ”¾å‡½æ•°è¿›è¡Œå¼‚å¸¸æ•è·ã€‚&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å¹¶ä¸”C++æ˜¯å…¼å®¹Cè¯­è¨€çš„ï¼ŒC++é‡Œä¸€äº›åº“æ˜¯ç”¨Cå®ç°çš„ï¼Œå¦‚æœå¼•å…¥å¼‚å¸¸çš„è¯­æ³•ï¼Œæ˜¯éœ€è¦å…¼å®¹å¾ˆå¤šCçš„åº“ã€‚å¯ä»¥çœ‹å‡ºæ¥å¼‚å¸¸åœ¨C++ä¸­ä½¿ç”¨çš„éš¾å¤„äº†ã€‚ä¸‹é¢å¼•ç”¨ä¸‹C++åˆ›å§‹äººæ–½ç‰¹åŠ³æ–¯çš„åŸè¯ï¼Œå¤§å®¶å¯ä»¥çœ‹ä¸‹å¼‚å¸¸å¤„ç†çš„éš¾è¨€ä¹‹éšã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;å¯¹äºå¼‚å¸¸å¤„ç†çš„æ€§èƒ½é—®é¢˜ï¼Œå…¶å®æ˜¯ä¸€ä¸ªå¾ˆæœ‰äº‰è®®çš„é—®é¢˜ï¼Œæœ‰äººè§‰å¾—å¼‚å¸¸å¤„ç†æ˜¯å¤šåšäº†ä¸€äº›å·¥ä½œï¼Œè‚¯å®šå¯¹æ€§èƒ½æ˜¯æœ‰å½±å“çš„ã€‚ä½†æ˜¯ä¹Ÿæœ‰äººè§‰å¾—å¼‚å¸¸å¤„ç†çš„å½±å“ï¼Œå’Œå¢åŠ ä¸€ä¸ª if-else å±äºåŒç§é‡çº§ï¼Œå¯¹æ€§èƒ½çš„å½±å“å…¶å®å¾®ä¹å…¶å¾®ï¼Œæ˜¯åœ¨å¯ä»¥æ¥å—çš„èŒƒå›´å†…çš„ã€‚å¼ºå¤§çš„é”™è¯¯å¤„ç†å¯¹äºä»»ä½•ç¼–ç¨‹è¯­è¨€éƒ½å¾ˆæœ‰æŒ‘æˆ˜æ€§ã€‚ å°½ç®¡å¼‚å¸¸æä¾›äº†å¤šä¸ªæ”¯æŒè‰¯å¥½é”™è¯¯å¤„ç†çš„åŠŸèƒ½ï¼Œä½†å®ƒä»¬æ— æ³•ä¸ºä½ å®Œæˆæ‰€æœ‰å·¥ä½œã€‚ è‹¥è¦å®ç°å¼‚å¸¸æœºåˆ¶çš„ä¼˜ç‚¹ï¼Œè¯·åœ¨è®¾è®¡ä»£ç æ—¶è®°ä½å¼‚å¸¸ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;å¼‚å¸¸çš„æ™‹çº§&quot;&gt;å¼‚å¸¸çš„æ™‹çº§&lt;/h2&gt;

&lt;p&gt;è™½ç„¶é€šç”¨çš„å¼‚å¸¸å¤„ç†å¯¹äºæ€§èƒ½æœ‰ä¸€å®šæ¶ˆè€—ï¼Œä½†æ˜¯å®ƒçš„ä¼˜ç‚¹è¿˜æ˜¯å¾ˆè¯±äººçš„ï¼Œå°¤å…¶å¯¹äºä¸ä¾èµ–Cè¯­è¨€çš„é«˜çº§è¯­è¨€ï¼Œæ²¡æœ‰äº†å…¼å®¹æ€§çš„è´Ÿæ‹…ï¼Œå¥½å¤„æ›´æ˜¯å¤§äºç¼ºç‚¹ã€‚ä¸‹é¢åˆ—å‡ºæ¥å¯¹äºå¾ˆå¤šé«˜çº§è¯­è¨€ï¼Œéœ€è¦å¼‚å¸¸å¤„ç†è¯­æ³•çš„ç†ç”±ã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;ä»£ç çš„é˜…è¯»æ›´é¡ºåˆ©ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;å¦‚æœä¸ç”¨é€šç”¨çš„å¼‚å¸¸å¤„ç†ï¼Œæ„é€ å‡½æ•°åˆå§‹åŒ–å¼‚å¸¸å¿…é¡»è¦å¼€å‘è€…å¤„ç†ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;å¯ä»¥åœ¨è¿è¡Œæ—¶ï¼Œå‡å°‘é”™è¯¯å´©æºƒçš„å‘ç”Ÿã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;æ²¡æœ‰é€šç”¨å¼‚å¸¸å¤„ç†ï¼ŒAPIéœ€è¦å†™å¤§é‡çš„å¤„ç†å‡½æ•°è¿”å›å€¼çš„é€»è¾‘ï¼Œå¦‚æœæ˜¯å¼‚æ­¥çš„éœ€è¦å¤§é‡çš„callbackã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;æ²¡æœ‰å…¼å®¹Cè¯­è¨€çš„è´Ÿæ‹…ã€‚&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;åŸºäºä¸Šé¢çš„ä¼˜ç‚¹åƒjavaï¼ŒC#ï¼Œswiftè¿™äº›å¼ºç±»å‹è¯­è¨€éƒ½æœ‰å¼‚å¸¸å¤„ç†è¯­æ³•ï¼Œå…¶ä¸­javaç®—æ˜¯æ¯”è¾ƒæ—©çš„å®Œå–„äº†å¼‚å¸¸å¤„ç†çš„è¯­æ³•ã€‚ä½†æ˜¯å„ä¸ªè¯­è¨€å¼‚å¸¸å¤„ç†çš„é€»è¾‘è¿˜æ˜¯æœ‰ç»†å¾®çš„å·®åˆ«ï¼Œè¿™é‡Œæ‹¿javaå’Œswiftè¯­è¨€å¯¹æ¯”ä¸‹å„è‡ªçš„å¼‚å¸¸å¤„ç†ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;k&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;array&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;};&lt;/span&gt; 
    &lt;span class=&quot;nc&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;printStackTrace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åœ¨javaä¸­å¦‚æœæ‰§è¡Œè¿™æ®µä»£ç ä¼šæ‰“å°å‡º&lt;code class=&quot;highlighter-rouge&quot;&gt; ArrayIndexOutOfBoundsException &lt;/code&gt;å¼‚å¸¸ï¼Œå¼‚å¸¸å¯ä»¥è¢«æ•è·ä¸ä¼šå´©æºƒã€‚ä¸‹é¢çœ‹ä¸‹swiftåŒæ ·æƒ³æ•è·æ•°ç»„è¶Šç•Œçš„å¼‚å¸¸ã€‚&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;arrayList&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arrayList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Array out of bounds&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç¼–è¯‘æ—¶ä¼šæŠ›å‡ºæ¥ ` â€˜catchâ€™ block is unreachable because no errors are thrown in â€˜doâ€™ block ` è¿™ä¸ªè­¦å‘Šï¼Œæœ¬è´¨ä¸Šç¼–è¯‘å™¨æ˜¯ä¸å¤„ç†è¿™ä¸ªå¼‚å¸¸çš„ã€‚ç„¶è€Œè¿è¡Œæ—¶ï¼Œä¼šå´©æºƒæŠ›å‡º&lt;code class=&quot;highlighter-rouge&quot;&gt; Fatal error: Index out of range &lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å› ä¸ºswiftè¯­è¨€çš„è®¾è®¡ç†å¿µè®¤ä¸ºæ•°ç»„è¶Šç•Œæ˜¯ç¨‹åºç¼–å†™çš„é€»è¾‘é”™è¯¯ï¼Œä¸€æ—¦å‡ºç°å°±æ— æ³•æ¢å¤ç¨‹åºæ­£å¸¸çš„é€»è¾‘ï¼Œæ‰€ä»¥ç†åº”å´©æºƒï¼Œä¾¿äºå¼€å‘è€…å‘ç°é—®é¢˜ã€‚è€Œjavaè¯­è¨€æ˜¯è®¤ä¸ºè¿™ä¸ªå¼‚å¸¸ï¼Œå¦‚æœç¨‹åºæ•è·äº†å°±ä»£è¡¨æœ‰èƒ½åŠ›å¤„ç†æ¢å¤è¿™ä¸ªå¼‚å¸¸ã€‚æ‰€ä»¥ç›¸å¯¹æ¥è®²javaçš„å¼‚å¸¸å®šä¹‰çš„èŒƒå›´æ›´å¹¿æ³›ï¼Œè€Œswiftç›¸å¯¹æ¯”è¾ƒè‹›åˆ»ã€‚&lt;/p&gt;

&lt;p&gt;ä»ä¸Šé¢çš„å¯¹æ¯”å¯ä»¥çœ‹å‡ºï¼Œjavaè¯­è¨€è®¾è®¡æ›´å€¾å‘äºç¨‹åºçš„å¼€å‘ä¾¿æ·æ€§å’Œå®‰å…¨æ€§ï¼Œå¯ä»¥é€‚å½“ç‰ºç‰²æ€§èƒ½çš„å¼€é”€ã€‚è€Œswiftè¯­è¨€ç›¸å¯¹æ¥è®²å¯¹æ€§èƒ½è¦æ±‚è¿˜æ˜¯æ¯”è¾ƒè‹›åˆ»çš„ã€‚è¿˜æœ‰ä¸€ä¸ªæ˜æ˜¾çš„ä¾‹å­åœ¨javaä¸­ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°åšäº†å¦‚ä¸‹çš„å¼‚å¸¸å®šä¹‰ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;createMap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Exception&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Exception&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Map must be greater than zero&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å‡½æ•°è°ƒç”¨è€…å¿…é¡»ä½¿ç”¨å¦‚ä¸‹çš„æ–¹å¼å¤„ç†ï¼Œå¦åˆ™ç¼–è¯‘ä¼šæŠ¥é”™ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;k&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;createMap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æœ¬è´¨ä¸Šjavaè¯­è¨€è®¾è®¡è€…è®¤ä¸ºï¼Œå¦‚æœå‡½æ•°æŠ›å‡ºäº†å¼‚å¸¸ï¼Œé‚£ä¹ˆä»£è¡¨ç€è°ƒç”¨è€…æœ‰èƒ½åŠ›å»æ¢å¤è¿™ä¸ªå¼‚å¸¸ï¼Œè¿™ä¿è¯äº†ç¨‹åºçš„å¥å£®æ€§ã€‚ä½†æ˜¯swiftè®¾è®¡è™½ç„¶å’Œjavaè¿™ç‚¹ç±»ä¼¼ï¼Œå¦‚æœå‡½æ•°æŠ›å¼‚å¸¸ä¸å¤„ç†ä¼šç¼–è¯‘é”™è¯¯ã€‚ä½†æ˜¯å¯ä»¥ä½¿ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt; try! &lt;/code&gt; è¿™ä¸ªä¾¿æ·çš„è¯­æ³•å¿½ç•¥å¼‚å¸¸ï¼Œè¿™å°±ä»£è¡¨swiftè¿˜æ˜¯è¦è€ƒè™‘å¼‚å¸¸æ€§èƒ½çš„å¼€é”€ã€‚ä¸è¿‡äº‹ç‰©éƒ½æœ‰ä¸¤é¢æ€§ï¼Œä¸€æ—¦ä½¿ç”¨äº†&lt;code class=&quot;highlighter-rouge&quot;&gt; try! &lt;/code&gt;å‡ºäº†å¼‚å¸¸ç¨‹åºå°±è¦å´©æºƒï¼Œè¿™ä¼šå¯¹ç¨‹åºå‘˜çš„ä»£ç è´¨é‡è¿›è¡Œä¸¥æ ¼è€ƒéªŒã€‚&lt;/p&gt;

&lt;p&gt;æœ€åæƒ³è¯´ä¸‹Rustè¯­è¨€å¼‚å¸¸å¤„ç†çš„é€»è¾‘ï¼Œå’Œå¤§å¤šæ•°&lt;code class=&quot;highlighter-rouge&quot;&gt; try-catch &lt;/code&gt;è®¾è®¡æ–¹å¼è¿˜æ˜¯ä¸ä¸€æ ·çš„ï¼Œä¸‹é¢æ˜¯å®˜æ–¹çš„è§£é‡Š:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Rust æœ‰ä¸€å¥—ç‹¬ç‰¹çš„å¤„ç†å¼‚å¸¸æƒ…å†µçš„æœºåˆ¶ï¼Œå®ƒå¹¶ä¸åƒå…¶å®ƒè¯­è¨€ä¸­çš„ try æœºåˆ¶é‚£æ ·ç®€å•ã€‚é¦–å…ˆï¼Œç¨‹åºä¸­ä¸€èˆ¬ä¼šå‡ºç°ä¸¤ç§é”™è¯¯ï¼šå¯æ¢å¤é”™è¯¯å’Œä¸å¯æ¢å¤é”™è¯¯ã€‚å¯æ¢å¤é”™è¯¯çš„å…¸å‹æ¡ˆä¾‹æ˜¯æ–‡ä»¶è®¿é—®é”™è¯¯ï¼Œå¦‚æœè®¿é—®ä¸€ä¸ªæ–‡ä»¶å¤±è´¥ï¼Œæœ‰å¯èƒ½æ˜¯å› ä¸ºå®ƒæ­£åœ¨è¢«å ç”¨ï¼Œæ˜¯æ­£å¸¸çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç­‰å¾…æ¥è§£å†³ã€‚ä½†è¿˜æœ‰ä¸€ç§é”™è¯¯æ˜¯ç”±ç¼–ç¨‹ä¸­æ— æ³•è§£å†³çš„é€»è¾‘é”™è¯¯å¯¼è‡´çš„ï¼Œä¾‹å¦‚è®¿é—®æ•°ç»„æœ«å°¾ä»¥å¤–çš„ä½ç½®ã€‚å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ä¸åŒºåˆ†è¿™ä¸¤ç§é”™è¯¯ï¼Œå¹¶ç”¨ Exception ï¼ˆå¼‚å¸¸ï¼‰ç±»æ¥è¡¨ç¤ºé”™è¯¯ã€‚åœ¨ Rust ä¸­æ²¡æœ‰ Exceptionã€‚å¯¹äºå¯æ¢å¤é”™è¯¯ç”¨ Result&amp;lt;T, E&amp;gt; ç±»æ¥å¤„ç†ï¼Œå¯¹äºä¸å¯æ¢å¤é”™è¯¯ä½¿ç”¨ panic! å®æ¥å¤„ç†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æ‰€ä»¥rustè¯­è¨€å¯¹å¼‚å¸¸å¤„ç†æ„Ÿè§‰æ›´ç¬¦åˆå¼‚å¸¸å®šä¹‰çš„æœ¬è´¨ï¼Œåªæ˜¯å¯¹äºå¼€å‘è€…æ¥è®²å¯èƒ½ä¼šéº»çƒ¦äº›ï¼Œä¸èƒ½æ— è„‘çš„å†™&lt;code class=&quot;highlighter-rouge&quot;&gt; try-catch &lt;/code&gt;äº†ï¼Œå†™ä¹‹å‰è¦åˆ†æ¸…æ¥šå¼‚å¸¸å’Œé”™è¯¯è¿™ä¸ªæ¦‚å¿µäº†ã€‚ä¸è¿‡è¿™æ ·ä¹Ÿä¼šè®©ä½ çš„ç¨‹åºçš„å®‰å…¨æ€§ã€å¥å£®æ€§ã€æ€§èƒ½å¼€é”€ï¼Œè¿™å‡ ä¸ªæ–¹é¢æ›´åŠ ä¼˜ç§€ã€‚&lt;/p&gt;

&lt;h2 id=&quot;å¼‚å¸¸çš„ä½¿ç”¨&quot;&gt;å¼‚å¸¸çš„ä½¿ç”¨&lt;/h2&gt;

&lt;p&gt;æ‰€ä»¥æˆ‘ä»¬åœ¨å†™ä»£ç çš„æ—¶å€™ï¼Œå°¤å…¶æ˜¯å†™å¯¹å¤–ä½¿ç”¨çš„APIæ—¶ï¼Œä¸€å®šè¦å…ˆææ¸…æ¥šè¿™ä¸ªAPIçš„ä½¿ç”¨è¿‡ç¨‹ä¸­å¯èƒ½äº§ç”Ÿçš„å¼‚å¸¸å’Œé”™è¯¯ã€‚è¿™é‡Œæˆ‘åˆ—å‡ºæ¥å‡ ä¸ªæ—¥å¸¸è®¾è®¡çš„ç‚¹ã€‚&lt;/p&gt;

&lt;h3 id=&quot;1-å‡½æ•°çš„å…¥å‚è¦åšåˆç†çš„æ£€æµ‹å¦‚æœä¸ç¬¦åˆçš„å‚æ•°åŠæ—¶ç”¨å¼‚å¸¸å¤„ç†&quot;&gt;1. å‡½æ•°çš„å…¥å‚è¦åšåˆç†çš„æ£€æµ‹ï¼Œå¦‚æœä¸ç¬¦åˆçš„å‚æ•°åŠæ—¶ç”¨å¼‚å¸¸å¤„ç†&lt;/h3&gt;

&lt;p&gt;å› ä¸ºæ¥å£è®¾è®¾è®¡æ—¶ï¼Œå¾€å¾€å¯¹æ•°æ®çš„è¦æ±‚æ˜¯å®½è¿›ä¸¥å‡ºï¼Œä»¥æ–¹ä¾¿å…¶ä»–ç¨‹åºå°†è¾“å‡ºä½œä¸ºè¾“å…¥ï¼Œè¯´ç™½äº†å°±æ˜¯â€œæŠŠå¤æ‚ç•™ç»™è‡ªå·±ï¼ŒæŠŠç®€å•ç•™ç»™åˆ«äººâ€ã€‚ä½†æ˜¯å“ªäº›å‚æ•°æ˜¯éœ€è¦å¤„ç†ä¸ºå¼‚å¸¸çš„ï¼Ÿè¿™é‡Œæ‹¿ä¸ªç®€å•çš„ä¾‹å­ã€‚&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;answerCall&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// å¦‚æœæ¥æ”¶çš„å¯¹è±¡ä¸ç¬¦åˆå‡½æ•°çš„å®šä¹‰ï¼ŒæŠ›å‡ºé”™è¯¯ã€‚&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;person&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isNot&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;iscomming&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// å¤„ç†æ¥å¬çš„çŠ¶æ€&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¯ä»¥çœ‹å‡ºæ¥ä¸Šé¢çš„æ¥å¬ç”µè¯çš„é€»è¾‘ï¼Œé¦–å…ˆå¦‚æœæ¥æ”¶çš„å‚æ•°ä¸ç¬¦åˆå‡½æ•°çš„å®šä¹‰é‚£è‚¯å®šæ˜¯è°ƒç”¨æ–¹çš„bugï¼Œåº”è¯¥æŠ›å‡ºé”™è¯¯ã€‚ä¸è¿‡ç°åœ¨å¾ˆå¤šç¼–ç¨‹è¯­è¨€åŸºæœ¬éƒ½ä¼šåšç±»å‹æ£€æµ‹ï¼Œå¦‚æœä¸ç¬¦åˆå°±ä¼šç¼–è¯‘å‡ºé”™æˆ–è€…è­¦å‘Šï¼Œæ‰€ä»¥è¿™ç§é˜²å¾¡ä¸å¤ªä¼šå†™ã€‚&lt;/p&gt;

&lt;p&gt;å†çœ‹ç¬¬äºŒä¸ªæ¡ä»¶åˆ¤æ–­ï¼Œå°±æ˜¯å¦‚æœæ¥å¬çš„ç”µè¯ä¸æ˜¯æ­£åœ¨æ¥ç”µçš„ç”¨æˆ·ï¼Œé‚£è¯´æ˜è¿™ä¸ªå‚æ•°ä¹Ÿæ˜¯æœ‰é—®é¢˜çš„ï¼Œéœ€è¦å‘Šè¯‰è°ƒç”¨è€…è¿™ä¸ªå¼‚å¸¸ã€‚æ‰€ä»¥å¦‚æœåœ¨è¿™é‡Œ&lt;code class=&quot;highlighter-rouge&quot;&gt; return &lt;/code&gt;å°±æ˜¾å¾—ä¸æ˜¯å¾ˆåˆç†ï¼Œå› ä¸ºè¿™ä¸ªå¼‚å¸¸å…¶å®è¢«éšè—äº†ï¼Œä¸Šå±‚æ„ŸçŸ¥ä¸åˆ°å°±æ— æ³•æ’æŸ¥é”™è¯¯ã€‚å¦‚æœæŒ‰ç…§Cçš„å¼‚å¸¸çš„å¸¸ç”¨å†™æ³•å°±éœ€è¦ç»™answerCallå¢åŠ ä¸€ä¸ªæ˜¯å¦æˆåŠŸçš„è¿”å›å€¼ã€‚å¦‚æœæ˜¯javaç­‰é«˜çº§è¯­è¨€åªè¦å¦‚ä¸‹å†™ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;answerCall&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Exception&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;iscomming&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Exception&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// å¤„ç†æ¥å¬çš„çŠ¶æ€&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;2-apiè®¾è®¡ä¸å¢åŠ æ— ç”¨çš„è¾“å‡ºå°½é‡åšæˆäº‹åŠ¡çš„æ“ä½œ&quot;&gt;2. APIè®¾è®¡ä¸å¢åŠ æ— ç”¨çš„è¾“å‡ºï¼Œå°½é‡åšæˆäº‹åŠ¡çš„æ“ä½œã€‚&lt;/h3&gt;

&lt;p&gt;è¿™ä¸ªåŸåˆ™è¯´ç™½äº†ï¼Œå°±æ˜¯ä¸ºäº†ä¿è¯å‡ºç°å¼‚å¸¸åæ‰€æœ‰çš„çŠ¶æ€æ¢å¤æˆåŸå§‹çŠ¶æ€ï¼Œä¸è¦å‡ºç°ä¸­é—´çŠ¶æ€ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬ç»§ç»­çœ‹ä¸Šé¢çš„ä¾‹å­ã€‚æ¥å¬çš„å‚æ•°æ£€æµ‹æˆåŠŸåï¼Œè¿›å…¥æ¥å¬çŠ¶æ€ï¼Œé¦–å…ˆæ”¹å˜æ¥å¬è€…æœ¬åœ°çš„çŠ¶æ€ï¼Œç„¶åè¯·æ±‚ç½‘ç»œï¼Œæœ€åæ¥å¬æˆåŠŸã€‚å‡å¦‚è¯´ä¸Šå±‚çš„APIè¿ç»­è°ƒç”¨ä¸¤æ¬¡ï¼Œä¸ºäº†é˜²æ­¢é¢‘ç¹åšç½‘ç»œè¯·æ±‚åšäº†ä¸‹é¢çš„é˜²å¾¡ç¼–ç¨‹ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;answerCall&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Exception&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;iscomming&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Exception&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// å¤„ç†æ¥å¬çš„çŠ¶æ€&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;changeStatus&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// å¦‚æœå·²ç»æ­£åœ¨æ¥å¬å°±è¿”å›ï¼Œé˜²æ­¢å¤šæ¬¡è¯·æ±‚ã€‚&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;isAnsering&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;requestAccept&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;reportAccept&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™ç§æ–¹å¼å…¶å®å°±è¿èƒŒäº†åˆšæ‰è¯´çš„ï¼Œä¸è¦å¢åŠ æ— ç”¨çš„è¾“å‡ºåŸåˆ™ã€‚å› ä¸ºchangeStatus()è¢«è°ƒç”¨äº†ä¸¤æ¬¡ï¼Œä¸€æ—¦æœ‰åœ°æ–¹ç›‘å¬è¿™ä¸ªçŠ¶æ€å˜åŒ–å¯èƒ½å°±é€ æˆæœªçŸ¥çš„é—®é¢˜ã€‚è¿™æ—¶å€™æœ€å¥½çš„é€‰æ‹©ï¼Œå°±æ˜¯å’Œå‚æ•°æ‹¦æˆªä¸€æ ·åœ¨æœ€å¼€å§‹çš„ä½ç½®å°±æŠ›å‡ºå¼‚å¸¸ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;answerCall&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Exception&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;iscomming&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Exception&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// å¦‚æœå·²ç»æ­£åœ¨æ¥å¬å°±è¿”å›ï¼Œé˜²æ­¢å¤šæ¬¡è¯·æ±‚ã€‚&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;isAnsering&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Exception&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// å¤„ç†æ¥å¬çš„çŠ¶æ€&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;changeStatus&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;requestAccept&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;reportAccept&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¦‚æœè¯´å‡½æ•°çš„æä¾›æ–¹ï¼Œè®¤ä¸ºå¤šæ¬¡è°ƒç”¨è¿™ç§å¼‚å¸¸ï¼Œè‡ªå·±å¯ä»¥å¤„ç†ï¼Œæ¯”å¦‚ç›´æ¥è¿”å›å°±ä»£è¡¨å¤„ç†äº†è¿™ä¸ªå¼‚å¸¸ï¼Œä¸Šå±‚å¯ä»¥ä¸æ„ŸçŸ¥ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;answerCall&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Exception&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;iscomming&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Exception&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// å¦‚æœå·²ç»æ­£åœ¨æ¥å¬å°±è¿”å›ï¼Œé˜²æ­¢å¤šæ¬¡è¯·æ±‚ã€‚&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;isAnsering&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// å¤„ç†æ¥å¬çš„çŠ¶æ€&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;changeStatus&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;requestAccept&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;reportAccept&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å…¶å®å‡½æ•°çš„å¹‚ç­‰æ€§è¦æ±‚ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯å¯¹å¤šæ¬¡è¾“å…¥è¿™ç§å¼‚å¸¸å¤„ç†çš„è¿‡ç¨‹ã€‚è¿™ç§å†™æ³•ä»£è¡¨æ¥æ”¶æ–¹å¤„ç†äº†è¿™ç§é”™è¯¯ï¼Œä¸éœ€è¦è°ƒç”¨æ–¹å…³å¿ƒï¼Œå¹¶ä¸”ä¿è¯æ¯æ¬¡è°ƒç”¨éƒ½è¿”å›åŒæ ·çš„ç»“æœã€‚å‡å¦‚ä¸€äº›ç¨‹åºç”±äºç‰¹æ®ŠçŠ¶æ€çš„åŸå› ï¼Œæ— æ³•åº”ç”¨å¹‚ç­‰æ€§åŸç†å°±åº”è¯¥åŠæ—¶æŠ›å‡ºå¼‚å¸¸ã€‚å‘Šè¯‰ä¸Šå±‚çš„è°ƒç”¨è€…å‡ºäº†é—®é¢˜ï¼Œè®©ä¸Šå±‚è°ƒç”¨è€…æ¥æ¢å¤è¿™ä¸ªæ“ä½œã€‚&lt;/p&gt;

&lt;h3 id=&quot;3-è®°ä½é”™è¯¯æ˜¯è®©ç¨‹åºä»¥æœ€ä½æˆæœ¬æ¢å¤æ­£å¸¸çš„ä¸€ç§æ–¹å¼å¦‚æœä½ å®šä¹‰çš„apiæœ‰ä¸¥æ ¼çš„çŠ¶æ€ç»´æŠ¤è®©ç¨‹åºåŠæ—¶çš„å´©æºƒæ¯”æŠ›å‡ºå¼‚å¸¸æ›´å®¹æ˜“å‘ç°é—®é¢˜&quot;&gt;3. è®°ä½é”™è¯¯æ˜¯è®©ç¨‹åºä»¥æœ€ä½æˆæœ¬æ¢å¤æ­£å¸¸çš„ä¸€ç§æ–¹å¼ã€‚å¦‚æœä½ å®šä¹‰çš„APIæœ‰ä¸¥æ ¼çš„çŠ¶æ€ç»´æŠ¤ï¼Œè®©ç¨‹åºåŠæ—¶çš„å´©æºƒæ¯”æŠ›å‡ºå¼‚å¸¸æ›´å®¹æ˜“å‘ç°é—®é¢˜&lt;/h3&gt;

&lt;p&gt;æ–­è¨€æ˜¯ä¸€ç§å‡ºç°ä¸¥é‡é”™è¯¯æ‰ä¼šä½¿ç”¨çš„æ–¹å¼ï¼Œä¸€æ—¦ä½¿ç”¨æ–­è¨€å°±ä»£è¡¨è°ƒç”¨æ–¹çš„ç¨‹åºä¸€å®šæ˜¯å‡ºäº†bugï¼Œä¸æ­£å¸¸çš„é€»è¾‘ï¼Œå¹¶ä¸”æ¥æ”¶æ–¹æ— æ³•å¤„ç†è¿™ç§æƒ…å†µï¼Œéœ€è¦åŠæ—¶çš„ç»ˆæ­¢ç¨‹åºä»¥ä¾¿äºè°ƒç”¨æ–¹ä¿®æ”¹æ­¤å¤„çš„bugã€‚&lt;/p&gt;

&lt;p&gt;ä¸è¿‡ç°åœ¨å¾ˆå¤šè½¯ä»¶ä¸ºäº†ç”¨æˆ·ä½“éªŒï¼Œå‡å°‘é—ªé€€çš„æ¬¡æ•°ï¼Œå¾€å¾€æ–­è¨€åœ¨releaseç‰ˆæœ¬ä¸­ä¼šç§»é™¤æ‰ã€‚å¸¦æ¥çš„åæœæ˜¯å‡ºé—®é¢˜çš„ä»£ç è¢«éšè—äº†ï¼Œä¸€äº›å¥‡æ€ªçš„é—®é¢˜å°±å¾ˆéš¾åŠæ—¶å‘ç°ã€‚æ‰€ä»¥ç»å¸¸æœ‰å¼€å‘è€…åœ¨äº‰è®ºæ–­è¨€æ˜¯å¦åº”è¯¥ä½¿ç”¨åœ¨releaseç‰ˆæœ¬ã€‚&lt;/p&gt;

&lt;p&gt;æ®è¯´NASAå’Œå¾ˆå¤šé“¶è¡Œç³»ç»Ÿçš„è½¯ä»¶ï¼Œæ–­è¨€éƒ½ä¼šåœ¨releaseç‰ˆæœ¬ä¸­ï¼Œå› ä¸ºè¿™äº›ç³»ç»Ÿå¯¹å®‰å…¨æ€§è¦æ±‚æé«˜ï¼Œä¸€æ—¦å‡ºäº†bugéœ€è¦ç«‹å³ç»ˆæ­¢ï¼Œå¦åˆ™å¯èƒ½é€ æˆä¸å¯ä¼°é‡çš„ç¾éš¾ã€‚è€Œå¯¹äºå®‰å…¨æ€§è¦æ±‚ä¸é«˜çš„ç³»ç»Ÿï¼Œä¸ºäº†è·å¾—æ›´é«˜çš„ç”¨æˆ·ä½“éªŒå¾€å¾€releaseç‰ˆæœ¬ä¼šç§»é™¤æ–­è¨€ã€‚ä¸è¿‡å­°å¯¹å­°é”™æ€•æ˜¯æ°¸è¿œæ²¡æœ‰å®Œç¾çš„ç­”æ¡ˆã€‚&lt;/p&gt;

&lt;h2 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h2&gt;

&lt;p&gt;ä¸Šé¢åˆ†æäº†è¿™ä¹ˆå¤šï¼Œé‚£æˆ‘ä»¬å®é™…ç¼–ç ä¸­ï¼Œå¦‚ä½•å¯¹å¼‚å¸¸å¤„ç†å“ªï¼Ÿæ˜¯å¦éœ€è¦å†™å¤§é‡çš„&lt;code class=&quot;highlighter-rouge&quot;&gt; if-else &lt;/code&gt;æˆ– &lt;code class=&quot;highlighter-rouge&quot;&gt;try-catch&lt;/code&gt;è¯­å¥å“ªï¼Ÿå…¶å®æœ¬è´¨ä¸Šæ¥è®²ï¼ŒæŒ‰ç…§ä¸‹é¢çš„åˆ¤æ–­åŸåˆ™æ¥åšå°±å¯ä»¥äº†ã€‚&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;é¦–è¦è¦çœ‹äº§ç”Ÿçš„é—®é¢˜æ˜¯å› ä¸ºè°ƒç”¨è€…ä¸æ­£ç¡®çš„ä½¿ç”¨APIé€ æˆçš„ä¹ˆï¼Ÿå¦‚æœæ˜¯å°±ç”¨æ–­è¨€æ‹¦æˆªã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;å¦‚æœè°ƒç”¨ä¸€ä¸ªAPIï¼ŒæŸäº›å¼‚å¸¸æ— æ³•é¿å…(æ¯”å¦‚å¾ˆå¤šIOè®¾å¤‡çš„è¯»å–ï¼Œå¾ˆå¯èƒ½å› ä¸ºç¡¬ä»¶ä¸å¯ç”¨çš„é—®é¢˜é€ æˆã€‚è¿™ç§å¾€å¾€æ— æ³•é¿å…)è¿™ä¸ªæ—¶å€™éµå¾ªçš„åŸåˆ™å°±æ˜¯,çœ‹æ˜¯å¦åº”è¯¥è®©è°ƒç”¨è€…æ¥æ„ŸçŸ¥è¿™ä¸ªå¼‚å¸¸ï¼Œå¹¶æœ‰èƒ½åŠ›æ¢å¤è¿™ä¸ªé—®é¢˜ï¼Œå¦‚æœæ˜¯å°±æœæ–­æŠ›å‡ºå¼‚å¸¸ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;å¦‚æœå¼‚å¸¸ï¼Œå‡½æ•°æä¾›è€…æœ¬èº«å¯ä»¥å¤„ç†ï¼Œé‚£ä¹ˆå°±å¤„ç†æ‰ï¼Œä¸ç”¨å†æŠ›ç»™ä¸Šå±‚ã€‚æ¯”å¦‚æ¥å£å¹‚ç­‰æ€§çš„è®¾è®¡ï¼Œå°±æ˜¯å¤„ç†è¿™ç§å¼‚å¸¸ã€‚&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;</content><author><name>mengtnt</name></author><summary type="html">å¼‚å¸¸å’Œé”™è¯¯ï¼Œå’‹ä¸€çœ‹å¾€å¾€éƒ½ä¼šä»¥ä¸ºæ˜¯ä¸€ä¸ªäº‹æƒ…ã€‚è¿™é‡Œé¦–å…ˆè¦å®šä¹‰ä¸‹æœ¬æ–‡å¼‚å¸¸å’Œé”™è¯¯çš„æ¦‚å¿µï¼Œä»¥ä¾¿äºå¯ä»¥åŒºåˆ†é€šç”¨çš„æ¦‚å¿µã€‚åœ¨ç¨‹åºè¿è¡Œä¸­å¦‚æœå‘ç”Ÿäº†é—®é¢˜ï¼Œä½†æ˜¯è¿™ä¸ªé—®é¢˜å¦‚æœé€šè¿‡å¢åŠ ç›¸åº”çš„ç¨‹åºé€»è¾‘å¯ä»¥æ¢å¤çš„å«åšå¼‚å¸¸ã€‚å¦‚æœå› ä¸ºç¨‹åºé€»è¾‘é—®é¢˜å¼•èµ·çš„ä¸å¯æ¢å¤çš„å¼‚å¸¸å«é”™è¯¯ï¼Œä¹Ÿå°±æ˜¯é€šå¸¸æ‰€è¯´çš„ç¨‹åºçš„BUGã€‚</summary></entry><entry><title type="html">å¦‚ä½•å†™ä¸€ä¸ªçŠ¶æ€æœº</title><link href="https://mengtnt.com/2021/10/01/state-machine.html" rel="alternate" type="text/html" title="å¦‚ä½•å†™ä¸€ä¸ªçŠ¶æ€æœº" /><published>2021-10-01T12:10:23+00:00</published><updated>2021-10-01T12:10:23+00:00</updated><id>https://mengtnt.com/2021/10/01/state-machine</id><content type="html" xml:base="https://mengtnt.com/2021/10/01/state-machine.html">&lt;p&gt;çŠ¶æ€æœºæ˜¯è½¯ä»¶å·¥ç¨‹ä¸­å¾ˆå¸¸è§çš„ä¸€ç§æ¶æ„ã€‚å®ƒæ˜¯è®°å½•äº‹ç‰©å‘å±•é˜¶æ®µçš„ä¸€ä¸ªå¸¸ç”¨æ‰‹æ®µã€‚é¦–å…ˆæ¥ä»‹ç»ä¸‹çŠ¶æ€æœºçš„å‡ ä¸ªæ¦‚å¿µã€‚(æˆ‘ä»¬æ‹¿â€œç®¡ç†å‘˜ç™»é™†åå°â€ä½œä¸ºä¾‹å­æè¿°è¿™äº›æ¦‚å¿µ)&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;State â€”â€” çŠ¶æ€æœºä¸€èˆ¬è¦åŒ…å«ä¸¤ä¸ªä»¥ä¸ŠçŠ¶æ€ã€‚å¯¹äºç®¡ç†å‘˜ç™»é™†ï¼Œè¿™é‡Œæœ‰ä¸¤ä¸ªçŠ¶æ€ï¼šâ€œç™»å½•çŠ¶æ€å’Œæœªç™»å½•çŠ¶æ€â€ã€‚&lt;/li&gt;
  &lt;li&gt;Event â€”â€” äº‹ä»¶å°±æ˜¯æ‰§è¡ŒæŸä¸ªæ“ä½œçš„è§¦å‘æ¡ä»¶æˆ–è€…å£ä»¤ã€‚å¯¹äºä¸Šé¢çš„ä¾‹å­ï¼Œâ€œç‚¹å‡»ç™»å½•æŒ‰é’®â€å°±æ˜¯ä¸€ä¸ªäº‹ä»¶ã€‚&lt;/li&gt;
  &lt;li&gt;Action â€”â€” äº‹ä»¶å‘ç”Ÿä»¥åè¦æ‰§è¡ŒåŠ¨ä½œã€‚ä¾‹å¦‚äº‹ä»¶æ˜¯â€œç‚¹å‡»ç™»å½•æŒ‰é’®â€ï¼ŒåŠ¨ä½œæ˜¯â€œç™»é™†ä¸­â€ã€‚ç¼–ç¨‹çš„æ—¶å€™ï¼Œä¸€ä¸ª Action ä¸€èˆ¬å°±å¯¹åº”ä¸€ä¸ªå‡½æ•°ã€‚&lt;/li&gt;
  &lt;li&gt;Transition â€”â€” ä¹Ÿå°±æ˜¯ä»ä¸€ä¸ªçŠ¶æ€å˜åŒ–ä¸ºå¦ä¸€ä¸ªçŠ¶æ€ã€‚ä¾‹å¦‚â€œç™»é™†æˆåŠŸâ€å°±æ˜¯ä¸€ä¸ªå˜æ¢ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ä¸€ä¸ªå…¸å‹çš„çŠ¶æ€æœºè½¬æ¢è¿‡ç¨‹å¦‚ä¸‹å›¾:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/state-machine-1.jpg&quot; alt=&quot;img1&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä¸Šé¢ç®€å•ä»‹ç»äº†çŠ¶æ€æœºçš„æ¦‚å¿µï¼Œé‚£ä¹ˆåœ¨ä¸åŒçš„ä¸šåŠ¡é¢†åŸŸå¦‚ä½•å®šä¹‰è¿™äº›çŠ¶æ€æœºçš„æ¦‚å¿µå‘¢ï¼Ÿ&lt;/p&gt;

&lt;h2 id=&quot;å¦‚ä½•å®šä¹‰çŠ¶æ€æœºçš„æ¦‚å¿µ&quot;&gt;å¦‚ä½•å®šä¹‰çŠ¶æ€æœºçš„æ¦‚å¿µ&lt;/h2&gt;

&lt;p&gt;åœ¨å®šä¹‰çŠ¶æ€çš„è¿‡ç¨‹ä¸­ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µçš„è¿‡ç¨‹ã€‚å¦‚æœäº†è§£è¿‡é€»è¾‘å­¦çš„éƒ½çŸ¥é“ï¼Œç°å®ç”Ÿæ´»ä¸­æˆ‘ä»¬æè¿°çš„äº‹ç‰©å…¶å®éƒ½å¯ä»¥æŠ½è±¡ä¸ºå‘½é¢˜ã€‚å‘½é¢˜æœ¬è´¨ä¸Šå°±æ˜¯çŠ¶æ€æœºçš„Stateï¼ŒEventå°±æ˜¯å‘½é¢˜çš„æ¡ä»¶ï¼ŒActionæœ¬è´¨ä¸Šå°±æ˜¯é€šè¿‡å‘½é¢˜å’Œæ¡ä»¶çš„æ¨å¯¼è¿‡ç¨‹ã€‚è€ŒTransitionå°±æ˜¯å‘½é¢˜æ¨å¯¼å®Œæˆçš„ç»“è®ºã€‚æ‰€ä»¥çŠ¶æ€æœºå˜åŒ–çš„è¿‡ç¨‹æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå‘½é¢˜çš„è¯æ˜è¿‡ç¨‹ã€‚P1(Condition) â€”&amp;gt; P2&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥å½“æˆ‘ä»¬æ‹¿åˆ°ä¸šåŠ¡çš„æ—¶å€™ï¼Œé¦–å…ˆè¦åˆ†ç¦»å‡ºå“ªäº›æ˜¯å·²çŸ¥çš„å‘½é¢˜ï¼Œå“ªäº›æ˜¯æ¡ä»¶ã€‚è€Œæˆ‘ä»¬å°±æ˜¯è¦é€šè¿‡è¿™äº›å·²çŸ¥å‘½é¢˜å’Œæ¡ä»¶ï¼Œæ¨å¯¼å‡ºç»“è®ºçš„è¿‡ç¨‹ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨å®šä¹‰å®ŒçŠ¶æ€æœºçš„æ¦‚å¿µåï¼Œæˆ‘ä»¬ä¸‹é¢çœ‹ä¸‹è¿™äº›æ¦‚å¿µçš„ä½¿ç”¨åŸåˆ™ã€‚&lt;/p&gt;

&lt;h2 id=&quot;stateä½¿ç”¨è§„åˆ™&quot;&gt;Stateä½¿ç”¨è§„åˆ™&lt;/h2&gt;

&lt;p&gt;Stateè‡³å°‘ä¼šæœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯é»˜è®¤çš„çŠ¶æ€ï¼Œä¸€ç§æ˜¯è¾“å‡ºçš„çŠ¶æ€ï¼Œé»˜è®¤çš„çŠ¶æ€ç›¸å½“äºå·²çŸ¥çš„å‘½é¢˜ï¼Œè¾“å‡ºçš„çŠ¶æ€ç›¸å½“äºè¦æ¨å¯¼çš„ç»“è®ºã€‚æ‰€ä»¥å¾ˆé‡è¦çš„ä¸€ç‚¹æ˜¯åœ¨å®šä¹‰Stateè¿™ç§æ•°æ®ç±»å‹çš„æ—¶å€™ï¼Œè¦é€‰æ‹©å¯¹å¤–ä¸å¯å˜çš„ç±»å‹ï¼Œä¸€æ—¦å‡ºç°å¯å˜ç±»å‹çš„çŠ¶æ€è¯´æ˜çŠ¶æ€æœºçš„æ¨å¯¼è¿‡ç¨‹æœ‰ä¸€å®šç¼ºé™·ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹äºç®¡ç†å‘˜ç™»é™†çš„ä¾‹å­ï¼Œè¾“å‡ºçš„æ˜¯ç™»é™†å’Œæœªç™»å½•çš„çŠ¶æ€ã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·å®šä¹‰çŠ¶æ€ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kd&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;unLogin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;login&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;LoginState&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userLoginState&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;LoginState&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loginstate&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// state&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;eventçš„è§„åˆ™&quot;&gt;Eventçš„è§„åˆ™&lt;/h2&gt;

&lt;p&gt;Eventç›¸å½“äºå‘½é¢˜çš„æ¡ä»¶ï¼Œå› ä¸ºæ¡ä»¶å¾€å¾€æ˜¯ç”¨æ¥åšæ¨å¯¼è¿‡ç¨‹çš„ï¼Œå¹¶ä¸éœ€æ±‚ä¿å­˜åœ¨çŠ¶æ€æœºä¸­ï¼Œæ‰€ä»¥å¦‚æœæ¶‰åŠåˆ°Eventè¿™ç§å˜é‡ä¸è¦ç”¨å¯¹å¤–å¯è§çš„å˜é‡ã€‚åœ¨çŠ¶æ€æœºä¸­ï¼Œéœ€è¦å­˜å‚¨çš„å¾€å¾€æ˜¯æ¨å¯¼çš„ç»“è®ºï¼Œè¡¨ç¤ºStateçš„å˜é‡ä¼šæ˜¯å¯¹å¤–å¯è§çš„å˜é‡ã€‚æ‰€ä»¥åœ¨å†™çŠ¶æ€æœºæ—¶ï¼Œè¦æ³¨æ„åŒºåˆ†å“ªäº›æ˜¯Eventç”¨åˆ°çš„å˜é‡,å“ªäº›æ˜¯Stateç”¨åˆ°çš„ï¼Œä¾¿äºå˜é‡çš„å®šä¹‰ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹äºç®¡ç†å‘˜ç™»é™†çš„ä¾‹å­ï¼Œâ€œç”¨æˆ·ç‚¹å‡»ç™»é™†æŒ‰é’®â€è¿™ä¸ªEventï¼Œè¿™ä¸ªæ˜¯çŠ¶æ€æœºè§¦å‘çš„æ¡ä»¶ï¼Œä»è¿™ä¸ªæ¡ä»¶å‘½é¢˜ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†ç¦»å‡ºæ¥ä¸€ä¸ªå±æ€§å˜é‡(User)å’Œä¸€ä¸ªæ–¹æ³•(clickLoginButton)ã€‚ä¸‹é¢å°±æ ¹æ®Eventè§„åˆ™å®šä¹‰è¿™äº›æ¡ä»¶ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kd&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;unLogin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;login&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;LoginState&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// Eventæ¡ä»¶ä½¿ç”¨çš„å˜é‡ï¼Œå°½é‡ä¸è¦åšå¯¹å¤–æš´éœ²&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;UserInfo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;password&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userLoginState&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;LoginState&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loginstate&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// state&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// çŠ¶æ€æœºçš„è§¦å‘äº‹ä»¶ï¼Œå¾€å¾€æ˜¯éœ€è¦å¤–ç•Œæ¥è°ƒç”¨çš„ï¼Œè¿™é‡Œç”¨ä¸€ä¸ªå‡½æ•°æ¥è¡¨ç¤ºï¼Œæœ‰æ—¶å€™å¯ä»¥ç”¨ä¸€ä¸ªå˜é‡æ¥è¡¨ç¤ºã€‚&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;clickLoginButton&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// event check and read data&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;UserInfo&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;','&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;passwork&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;actionçš„è§„åˆ™&quot;&gt;Actionçš„è§„åˆ™&lt;/h2&gt;

&lt;p&gt;Actionå°±æ˜¯æˆ‘ä»¬æ¨å¯¼çš„è¿‡ç¨‹äº†ã€‚Actionå¤§å¤šæ˜¯æ— å‰¯ä½œç”¨çš„å‡½æ•°ã€‚ä½•ä¸ºæ— å‰¯ä½œç”¨çš„å‡½æ•°ï¼Œç®€å•çš„è®²å°±æ˜¯ä¸ä¼šæ“ä½œä»»ä½•å…¨å±€å˜é‡çš„å‡½æ•°ï¼Œå› ä¸ºActionä»…ä»…æ˜¯è®¡ç®—çš„è¿‡ç¨‹ï¼Œè¿˜æ²¡æœ‰æ¶‰åŠåˆ°æœ€ç»ˆçš„ç»“æœå‘½é¢˜çš„ç”Ÿæˆã€‚å¦å¤–ç”±äºçŠ¶æ€æœºå¾€å¾€æ˜¯å¯¹æŸä¸€ä¸ªäº‹ç‰©æ—¶é—´å‘¨æœŸå†…çš„è®¡ç®—ï¼Œæ‰€ä»¥Actionå°½é‡ç”¨å‡½æ•°é—­åˆçš„æ“ä½œã€‚ä»€ä¹ˆæ˜¯é—­åˆæ“ä½œï¼Œå°±æ˜¯å‡½æ•°è¾“å…¥çš„æ•°æ®ç±»å‹å’Œè¾“å‡ºçš„æ•°æ®ç±»å‹å°½é‡ä¿è¯ä¸€ç›´ï¼Œè¿™æ ·åœ¨å‘½é¢˜çš„æ¨å¯¼è¿‡ç¨‹ä¸­ï¼Œå°±é¿å…äº†ç±»å‹çš„è½¬æ¢ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹äºä¸Šé¢çš„ä¾‹å­ï¼Œâ€œç™»é™†è¡Œä¸ºâ€è¿™ä¸ªActionå¦‚ä½•åˆç†çš„è¡¨ç¤ºï¼Œé¦–å…ˆæˆ‘ä»¬æ‹¿åˆ°äº†çŠ¶æ€æœºçš„è§¦å‘æ¡ä»¶ï¼ŒåŒæ—¶è¦æ“ä½œçš„Eventçš„æ¡ä»¶æ•°æ®æ˜¯UserInfoã€‚æ ¹æ®ä¸Šé¢çš„åŸåˆ™å°±å¾ˆå®¹æ˜“å®šä¹‰Actionçš„æ“ä½œã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kd&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;unLogin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;login&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;LoginState&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;UserInfo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;password&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userLoginState&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;LoginState&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loginstate&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// state&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;clickLoginButton&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// event check and read data&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;UserInfo&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;','&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;passwork&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;c1&quot;&gt;// action&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;login&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;login&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;UserInfo&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// some request&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;loginRequest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
            
        &lt;span class=&quot;o&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// è¿™ä¸ªå°±ç›¸å½“äºåšäº†é—­åˆæ“ä½œï¼Œä½¿ç”¨çš„å‡½æ•°å‚æ•°å’Œè¿”å›çš„å‚æ•°ä¸€è‡´ï¼Œè¿™é‡Œè¦æ³¨æ„çš„ä¸€ç‚¹userå°½é‡ä¸å¯å˜çš„å˜é‡è¿›è¡Œä¼ é€’é˜²æ­¢ä¸­é—´çŠ¶æ€å‡ºç°ã€‚&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;loginRequest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;UserInfo&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//request&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;transitionçš„è§„åˆ™&quot;&gt;Transitionçš„è§„åˆ™&lt;/h2&gt;

&lt;p&gt;Transitionæ˜¯å’ŒActionç›¸åçš„ï¼Œæ˜¯æœ‰å‰¯ä½œç”¨çš„å‡½æ•°ï¼Œå› ä¸ºTransitionå°±æ˜¯ç”Ÿæˆæˆ‘ä»¬éœ€è¦æ¨å¯¼çš„å‘½é¢˜ï¼Œæ‰€ä»¥å¿…ç„¶ä¼šæ“ä½œå…¨å±€çš„Stateã€‚åœ¨å®šä¹‰æœ‰å‰¯ä½œç”¨çš„å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å°¤å…¶è¦å°å¿ƒï¼Œå°½é‡ç”¨æœ€å°åŒ–åŸåˆ™ï¼Œé¿å…ä¸€äº›å…¶ä»–å˜é‡çš„å…³è”æ“ä½œã€‚è¿™é‡Œè¿˜æœ‰ä¸ªåŸåˆ™åœ¨ç”Ÿäº§æœ€ç»ˆçš„Stateæ—¶ï¼Œå¯èƒ½ä¼šæœ‰å¾ˆå¤šä¸­é—´çŠ¶æ€ï¼Œä¸­é—´çŠ¶æ€å°¤å…¶ä¸èƒ½å¯¹å¤–å¼€æ”¾ï¼Œä¸€å®šæ˜¯åœ¨å†…éƒ¨ä½¿ç”¨ï¼Œå¦åˆ™çŠ¶æ€æœºå¾ˆå®¹æ˜“åœ¨è®¡ç®—çš„è¿‡ç¨‹ä¸­ï¼Œä¸­é—´çŠ¶æ€è¢«å¤–éƒ¨æ”¹æ‰ï¼Œé€ æˆçŠ¶æ€æœºé”™ä¹±ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬å†æ¥çœ‹ç®¡ç†å‘˜ç™»é™†çš„ä¾‹å­ï¼Œç”¨æˆ·åœ¨ç™»é™†è¿‡ç¨‹ä¸­å¯èƒ½ä¼šäº§ç”Ÿé‚£äº›æœ‰å‰¯ä½œç”¨çš„å‡½æ•°å’Œä¸­é—´çŠ¶æ€ã€‚æ˜¾è€Œæ˜“è§æˆ·ç™»é™†æˆåŠŸåçš„æ“ä½œå‡½æ•°åº”è¯¥æ˜¯ä¼šæ”¹å˜loginstateã€‚å¦å¤–åœ¨ç™»å½•è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†é˜²æ­¢é¢‘ç¹çš„è¯·æ±‚ï¼Œå¯¹æ­£åœ¨ç™»å½•çš„é‡å¤è¯·æ±‚åšæ‹¦æˆªï¼Œè¿™ä¸ªå°±ç›¸å½“äºäº§ç”Ÿäº†ä¸€ä¸ªä¸­é—´çŠ¶æ€ï¼Œä½¿ç”¨è¿™ä¸ªä¸­é—´çŠ¶æ€å°¤å…¶è¦å°å¿ƒï¼Œå› ä¸ºè¿™ä¼šé€ æˆæˆ‘ä»¬åŸæœ¬æ²¡æœ‰å‰¯ä½œç”¨çš„Actionçš„å‡½æ•°ï¼Œäº§ç”Ÿäº†å‰¯ä½œç”¨ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kd&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;unLogin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;login&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;LoginState&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;UserInfo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;password&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userLoginState&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;LoginState&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loginstate&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// state&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isLogining&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// ä¸­é—´çŠ¶æ€ï¼Œä¸è¦å¯¹å¤–æš´éœ²åªæ˜¯å†…éƒ¨ä½¿ç”¨&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;clickLoginButton&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// event check and read data&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;UserInfo&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;','&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;passwork&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;c1&quot;&gt;// action&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;login&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;login&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;UserInfo&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;islogining&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;islogining&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;YES&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// some request&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;loginRequest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;islogining&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;NO&lt;/span&gt;
            &lt;span class=&quot;nf&quot;&gt;transitionState&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;success&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// è¿™ä¸ªå°±ç›¸å½“äºåšäº†é—­åˆæ“ä½œï¼Œä½¿ç”¨çš„å‡½æ•°å‚æ•°å’Œè¿”å›çš„å‚æ•°ä¸€è‡´ï¼Œè¿™é‡Œè¦æ³¨æ„çš„ä¸€ç‚¹userå°½é‡ä¸å¯å˜çš„å˜é‡è¿›è¡Œä¼ é€’é˜²æ­¢ä¸­é—´çŠ¶æ€å‡ºç°ã€‚&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;loginRequest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;UserInfo&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//request&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// æœ‰å‰¯ä½œç”¨çš„å‡½æ•°ï¼Œå°½é‡ç”¨æœ€å°åŒ–åŸåˆ™ï¼Œæ‰€ä»¥isloginingè¿™ç§ä¸­é—´çŠ¶æ€ä¸è¦å†™åˆ°è¿™ä¸ªå‡½æ•°é‡Œã€‚&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;transitionState&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isSuccess&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// Transition&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;loginstate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isSuccess&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;login:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unlogin&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h2&gt;

&lt;p&gt;ä»ä¸Šé¢åˆ†æçŠ¶æ€æœºçš„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥çœ‹å‡ºæ¥ä»»ä½•çš„æ•°æ®ç»“æ„å’Œç®—æ³•å…¶å®éƒ½æ˜¯é€»è¾‘æ¨å¯¼çš„è¿‡ç¨‹ï¼Œè¿˜æ˜¯æ–‡ç« å¼€å¤´è¡¨ç¤ºçš„è¿™ä¸ªå…¬å¼P1(Condition) â€”&amp;gt; P2ï¼Œæ‰€ä»¥æœ¬è´¨ä¸Šé¦–å…ˆè¦ç¡®å®šå“ªäº›æ˜¯å·²çŸ¥çš„å‘½é¢˜ï¼Œå“ªäº›æ˜¯æ¡ä»¶ï¼Œå“ªäº›æ˜¯ç»“è®ºï¼Œä»è€Œå½¢æˆæˆ‘ä»¬çš„æ¨å¯¼è¿‡ç¨‹ã€‚&lt;/p&gt;

&lt;p&gt;çŠ¶æ€æœºæè¿°èµ·æ¥å…¶å®æ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„æ•°æ®ç»“æ„å’Œç®—æ³•ï¼Œåœ¨æ¨å¯¼çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥äº†ç¨‹åºè®¾è®¡ä¸­å¸¸ç”¨çš„åŸåˆ™ï¼Œæ§åˆ¶äº†æ¨å¯¼è¿‡ç¨‹çš„è¾¹ç•Œï¼Œæœ¬è´¨ä¸Šæ˜¯è®©çŠ¶æ€æœºæ¨å¯¼ä»£ç æ›´åŠ å†…èšï¼Œä¸è¦æš´éœ²è¿‡å¤šçš„ç»†èŠ‚ç»™å¤–éƒ¨ç¯å¢ƒï¼Œè¿™æ ·çš„çŠ¶æ€æœºæ‰èƒ½æ›´åŠ ç¨³å®šçš„è¿è¡Œã€‚&lt;/p&gt;</content><author><name>mengtnt</name></author><summary type="html">çŠ¶æ€æœºæ˜¯è½¯ä»¶å·¥ç¨‹ä¸­å¾ˆå¸¸è§çš„ä¸€ç§æ¶æ„ã€‚å®ƒæ˜¯è®°å½•äº‹ç‰©å‘å±•é˜¶æ®µçš„ä¸€ä¸ªå¸¸ç”¨æ‰‹æ®µã€‚é¦–å…ˆæ¥ä»‹ç»ä¸‹çŠ¶æ€æœºçš„å‡ ä¸ªæ¦‚å¿µã€‚(æˆ‘ä»¬æ‹¿â€œç®¡ç†å‘˜ç™»é™†åå°â€ä½œä¸ºä¾‹å­æè¿°è¿™äº›æ¦‚å¿µ)</summary></entry><entry><title type="html">å†™ä»£ç è¦è®²æ­¦å¾·</title><link href="https://mengtnt.com/2021/08/09/soft-complex.html" rel="alternate" type="text/html" title="å†™ä»£ç è¦è®²æ­¦å¾·" /><published>2021-08-09T02:40:18+00:00</published><updated>2021-08-09T02:40:18+00:00</updated><id>https://mengtnt.com/2021/08/09/soft-complex</id><content type="html" xml:base="https://mengtnt.com/2021/08/09/soft-complex.html">&lt;p&gt;æœ€è¿‘åˆšåšå®Œä¸€ä¸ªé¡¹ç›®ï¼Œé—²äº†ä¸‹æ¥ã€‚æƒ³åˆ†äº«ä¸‹å…³äºè½¯ä»¶å¤æ‚åº¦çš„ä¸€äº›æ€è€ƒã€‚è¿™é‡Œå…ˆè¯´ä¸‹æ–‡ç« æ ‡é¢˜çš„ç”±æ¥ï¼Œä¸€ä¸ªè½¯ä»¶äº§å“å¯¹äºç”¨æˆ·æ¥è®²ï¼Œå¥½çœ‹å¥½ç”¨æ˜¯å¿…é¡»çš„ï¼Œå…¶æ¬¡å°±æ˜¯çœ‹è¿™ä¸ªè½¯ä»¶çš„æ€§èƒ½å¥½ä¸å¥½ï¼Œä¸è¦è€æ˜¯å¡å’Œå´©æºƒã€‚å¦‚æœæ»¡è¶³è¿™ä¸¤ç‚¹ï¼Œå¾€å¾€è¿™ä¸ªè½¯ä»¶å£ç¢‘ä¸ä¼šå·®ã€‚æ‰€ä»¥å¯¹äºå¼€å‘äººå‘˜æ¥è®²ï¼Œå†™ä»£ç æ—¶ä¸€å®šè¦å…³æ³¨äº§å“çš„ä½“éªŒå’Œæ€§èƒ½ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹äºä¸€ä¸ªè½¯ä»¶äº§å“å°±è·Ÿä¸€ä¸ªäººä¸€æ ·ã€‚è¿™ä¸ªäººé•¿çš„å¥½ä¸å¥½çœ‹ã€è„‘å­èªä¸èªæ˜ç¡®å®å¾ˆé‡è¦ã€‚æ‰€ä»¥å¾ˆå¤šæ—¶å€™æˆ‘ä»¬çœ‹ä¸€ä¸ªäººï¼Œå¾€å¾€æ¯”è¾ƒå…³æ³¨ä»–çš„å¤–è¡¨å’Œæ™ºåŠ›ã€‚é‚£ä¹ˆå¯¹æ¯”äºè½¯ä»¶å¼€å‘ï¼Œç¨‹åºå‘˜ä»¬ä¹Ÿæ˜¯å¾ˆé‡è§†ä»£ç çš„å®ç°å’Œæ€§èƒ½ï¼Œæ‰€ä»¥ä½ å¯ä»¥çœ‹åˆ°å¤§é‡è®¨è®ºå®ç°å’Œç®—æ³•çš„æ–‡ç« ã€‚å¯æ˜¯è¿™é‡Œæ‰€è¯´çš„â€œå¾·â€å°±å¾€å¾€å¾ˆå®¹æ˜“è¢«å¿½ç•¥ã€‚&lt;/p&gt;

&lt;p&gt;é‚£ä½•ä¸ºâ€œå¾·â€ï¼Œè¯´çš„ç›´æ¥ä¸€ç‚¹å°±æ˜¯çº¦æŸè‡ªå·±ï¼Œæ–¹ä¾¿åˆ«äººã€‚ä¸ºä»€ä¹ˆè¦åšè¿™ç§åƒåŠ›ä¸è®¨å¥½çš„äº‹æƒ…å‘¢ï¼Ÿæ˜¯å› ä¸ºé“å¾·æ”¾åœ¨ä¸€ä¸ªé•¿çº¿æ¥çœ‹ï¼Œæ˜¯å¯¹å¤§å®¶éƒ½æœ‰å¥½å¤„çš„ï¼Œå¦åˆ™å¤§å®¶åªåšåˆ©å·±çš„è¡Œä¸ºè¿™ä¸ªç¤¾ä¼šå¯èƒ½ä¼šä¹±æˆä¸€é”…ç²¥ã€‚é‚£ä¹ˆå¯¹äºå†™ä»£ç è¦è®²æ­¦å¾·ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨å®ç°ä¸€ä¸ªåŠŸèƒ½æ—¶ï¼Œå°½é‡è®©åé¢æ¥æ‰‹çš„äººå®¹æ˜“çœ‹æ‡‚ï¼Œè€Œä¸è¦ä»…ä»…æ˜¯å®ç°äº†åŠŸèƒ½å’Œç”¨äº†ç‰›é€¼çš„ç®—æ³•ä¼˜åŒ–äº†æ€§èƒ½ï¼Œä¹Ÿå…³æ³¨ä¸‹è¿™ä¸ªâ€œå¾·â€ï¼Œå°±è·Ÿäººä¸€æ ·è¦å¾·æ™ºä½“å…¨é¢å‘å±•ã€‚å¯¹äºå†™ä»£ç æ¥è¯´è¿™ä¸ªâ€œå¾·â€å¦‚ä½•åšå‘¢ï¼Ÿä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹è½¯ä»¶å¤æ‚åº¦çš„ç®¡ç†ã€‚&lt;/p&gt;

&lt;h2 id=&quot;è½¯ä»¶å¤æ‚åº¦&quot;&gt;è½¯ä»¶å¤æ‚åº¦&lt;/h2&gt;

&lt;p&gt;äººçš„å¤§è„‘æœ¬è´¨ä¸Šæ˜¯çº¿æ€§çš„ï¼Œæˆ‘ä»¬å¾ˆéš¾å¤„ç†å¤šçº¿ç¨‹çš„ä¸œè¥¿ï¼Œä¹Ÿå°±æ˜¯ä¸€å¿ƒå¾ˆéš¾äºŒç”¨ã€‚æ‰€ä»¥é™ä½è½¯ä»¶å¤æ‚åº¦ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯å‡å°‘åˆ†æ”¯ã€‚æˆ‘ä»¬ç»å¸¸ä¼šè°ˆè®ºæ¶æ„ï¼Œå…¶å®å¥½çš„æ¶æ„å°±æ˜¯å‡å°‘ç¨‹åºçš„åˆ†æ”¯ï¼Œè®©ç¨‹åºå°½å¯èƒ½æœç€çº¿æ€§çš„æ–¹å‘å‘å±•ã€‚&lt;/p&gt;

&lt;p&gt;è½¯ä»¶å¤æ‚åº¦åœ¨è½¯ä»¶å·¥ç¨‹ä¸­æœ‰ä¸€ä¸ªè‘—åçš„åˆ¤å®šæ–¹æ³•McCabeç¯è·¯ã€‚å¦‚æœä¸€æ®µæºç ä¸­ä¸åŒ…å«åˆ†æ”¯å†³ç­–ç‚¹ï¼Œé‚£ä¹ˆè¿™æ®µä»£ç çš„åœˆå¤æ‚åº¦ä¸º1ï¼Œå› ä¸ºè¿™æ®µä»£ç ä¸­åªä¼šæœ‰ä¸€æ¡è·¯å¾„æ˜¯çº¿æ€§çš„ï¼Œå¦‚æœè¿™æ®µä»£ç åŒ…å«äº†ä¸€ä¸ªåˆ†æ”¯å†³ç­–ç‚¹ï¼Œé‚£ä¹ˆè¿™æ®µä»£ç åœˆå¤æ‚åº¦ä¸º2ï¼Œä»¥æ­¤ç±»æ¨ã€‚&lt;/p&gt;

&lt;p&gt;McCabeç¯è·¯æœ‰ä¸€ä¸ªå¾ˆç®€æ´çš„å…¬å¼: V(G)=e-n+2ã€‚å…¶ä¸­eå°±æ˜¯ä¸‹å›¾ä¸­å˜æ•°ï¼Œnå°±æ˜¯èŠ‚ç‚¹æ•°ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/soft-complex-1.jpg&quot; alt=&quot;å›¾1&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å¯ä»¥è®¡ç®—å‡ºä¸Šå›¾çš„è½¯ä»¶å¤æ‚åº¦ä¸º7-6+2=3ï¼Œä»å›¾ä¸­å¯ä»¥çœ‹å‡ºæœ‰C1ã€C2ã€C3ä¸‰ä¸ªåŒºåŸŸã€‚ä¸‹é¢åˆ—å‡ºè½¯ä»¶å¤æ‚åº¦è®¡ç®—çš„ä¸‰ä¸ªæ–¹æ³•ã€‚&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;æµå›¾ä¸­çš„åŒºåŸŸæ•°ç­‰äºç¯å½¢å¤æ‚åº¦ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;æµå›¾Gçš„ç¯å½¢å¤æ‚åº¦V(G)=E-N+2ï¼Œå…¶ä¸­ï¼ŒEæ˜¯æµå›¾ä¸­è¾¹çš„æ¡æ•°ï¼ŒNæ˜¯ç»“ç‚¹æ•°ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;æµå›¾Gçš„ç¯å½¢å¤æ‚åº¦V(G)=P+1ï¼Œå…¶ä¸­ï¼ŒPæ˜¯æµå›¾ä¸­åˆ¤å®šç»“ç‚¹çš„æ•°ç›®ã€‚Pä¸ºå‡ºåº¦å¤§äº2çš„ã€‚&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ä»ä¸Šé¢çš„å…¬å¼ä¸­ï¼Œè¿™è®©æˆ‘æƒ³èµ·æ¥çœ‹è¿‡çš„ä¸€æœ¬ä¹¦ã€Šé‡æ„â€”â€”å¤æ‚ä¸–ç•Œçš„ç®€å•çš„æ³•åˆ™ã€‹ï¼Œæ‰€æœ‰å¤æ‚çš„ä¸œè¥¿å…¶å®éƒ½æ˜¯ç”±ä¸€ä¸ªæœ€ç®€å•çš„å…¬å¼ï¼Œä¸åœçš„åˆ†å½¢è¿­ä»£é€ æˆçš„ã€‚ç¨‹åºçš„ä¸–ç•Œå°¤å…¶é€‚ç”¨ï¼Œæ‰€æœ‰çš„å¤æ‚æ€§åŸºæœ¬éƒ½æ˜¯ç”±if elseçš„åˆ†æ”¯é€ æˆçš„ã€‚æ‰€ä»¥å‡å°‘è¿™äº›ç¯ï¼Œè®©æˆ‘ä»¬çš„ç¨‹åºå˜çš„å¾ˆçº¿æ€§ï¼Œå°±æ˜¯é™ä½è½¯ä»¶å¤æ‚åº¦çš„åŸºæœ¬åŸåˆ™ã€‚&lt;/p&gt;

&lt;p&gt;åŸºäºä¸Šé¢çš„ç®€å•æ³•åˆ™ï¼Œè½¯ä»¶å·¥ç¨‹å‘å±•å‡ºæ¥äº†å„ç§è®¾è®¡æ¨¡å¼å’Œæ¶æ„ã€‚è¿™äº›å¹´æµè¡Œçš„å‡½æ•°å¼ç¼–ç¨‹ï¼Œå…¶å®æœ¬è´¨ä¸Šä¹Ÿæ˜¯æœ€å¤§é™åº¦çš„è®©ç¨‹åºé˜…è¯»èµ·æ¥æ˜¯çº¿æ€§çš„ï¼Œä¸è¦å‡ºç°å¤ªå¤šçš„åˆ†æ”¯ã€‚ä¸‹é¢åŸºäºæ—¥å¸¸ç»å¸¸å†™çš„ä»£ç ï¼Œå±•ç°ä¸‹å¦‚ä½•å¤„ç†è½¯ä»¶çš„å¤æ‚åº¦ã€‚&lt;/p&gt;

&lt;h2 id=&quot;å¦‚ä½•é™ä½è½¯ä»¶å¤æ‚åº¦&quot;&gt;å¦‚ä½•é™ä½è½¯ä»¶å¤æ‚åº¦&lt;/h2&gt;

&lt;p&gt;ä¸‹é¢æˆ‘ç”¨ä¼ªä»£ç æ¥æ¼”ç¤ºä¸‹ï¼Œå¹³æ—¶ç»å¸¸é‡åˆ°çš„ä¸€äº›ä¸šåŠ¡ä»£ç é—®é¢˜ã€‚ä¸šåŠ¡ä»£ç çš„é€»è¾‘å¾ˆç®€å•å°±æ˜¯ä¸€ä½å¨å¸ˆåˆ¶ä½œé£Ÿç‰©ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Cooker&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Food&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;make&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;Food&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;food&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Food&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;food&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; 
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Food&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Food&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;food&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cooker&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Cooker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;food&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cooker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;I get {food}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä»ä¸Šé¢çš„ä»£ç å¯ä»¥æ¸…æ™°çš„çœ‹å‡ºï¼Œä¾èµ–å…³ç³»å¾ˆç®€å•Cookerä¾èµ–äº†Foodè¿™ä¸ªå¯¹è±¡ã€‚è¿™æ—¶å€™äº§å“çªç„¶è¦æ–°å¢ä¸€ä¸ªéœ€æ±‚ï¼Œè¯´å¨å¸ˆåˆ¶ä½œçš„é£Ÿç‰©å®Œæˆæ—¶ï¼Œè¦ç»™å¨å¸ˆçš„ç»éªŒæå‡ã€‚å¦‚æœä¸å‡æ€ç´¢ï¼Œä¸‹é¢çš„ä»£ç å®ç°æ˜¯æœ€ç›´æ¥çš„åšæ³•ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Cooker&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exp&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Food&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;make&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;Food&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;food&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Food&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;food&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;handle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;food&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; 

    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Food&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addExp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;exp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; 
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Food&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Cooker&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currentCooker&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Food&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;food&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Cooker&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cooker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;currentCooker&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cooker&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;handle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// åˆ¶ä½œè¿‡ç¨‹&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// åˆ¶ä½œå®Œæˆ&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;currentCooker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addExp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cooker&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Cooker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;food&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cooker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;I get {food}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æˆ‘ä»¬åˆ†æä¸‹è¿™ä¸ªéœ€æ±‚å˜æ›´åçš„å¤æ‚åº¦å˜åŒ–ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/soft-complex-2.jpg&quot; alt=&quot;å›¾2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å›¾ä¸­å¯ä»¥ç›´è§‚çš„çœ‹å‡ºå¤æ‚åº¦ä»1å˜æˆäº†2ï¼Œå…¶å®å¤šæ€è€ƒä¸‹è¿™ä¸ªéœ€æ±‚ï¼Œæ˜¯å¦å¯ä»¥é™ä½å¤æ‚åº¦é‚£ï¼Ÿé€šè¿‡å›è°ƒæˆ–è€…ä»£ç†çš„æ–¹å¼å°±å¾ˆå®¹æ˜“çš„é™ä½å¤æ‚åº¦ï¼Œä»£ç å¦‚ä¸‹:&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Cooker&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exp&lt;/span&gt;
    
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Coffee&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;make&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;food&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Food&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;food&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;expCallback&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;exp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myCoffee&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; 
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Food&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(*&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;ExpCallback&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expCallback&lt;/span&gt;

    &lt;span class=&quot;nc&quot;&gt;Food&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;food&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;ExpCallback&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;handle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// åˆ¶ä½œè¿‡ç¨‹&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// åˆ¶ä½œå®Œæˆ&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;expCallBack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cooker&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Cooker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;food&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cooker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;I get {food}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šé¢çš„ä»£ç æ—¶é€šè¿‡å›è°ƒçš„æ–¹å¼è§£è€¦ï¼Œè¿™æ ·Foodçš„ç±»ä¸å†ä¾èµ–Cookeräº†ï¼Œå°±è§£é™¤äº†ä¾èµ–çš„ç¯ï¼Œé™ä½äº†è½¯ä»¶çš„å¤æ‚åº¦ã€‚å¦‚æœéœ€è¦å¤§é‡çš„è¿™ç§å›è°ƒï¼Œå…¶å®å°±å¯ä»¥æ–°å»ºä¸€ä¸ªç±»ï¼ŒæŠŠå›è°ƒçš„æ–¹æ³•æŠ½è±¡å‡ºæ¥å¦‚ä¸‹.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Observer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(*&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;CallBack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;callback&lt;/span&gt;

    &lt;span class=&quot;nc&quot;&gt;Observer&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Observer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;CallBack&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;callback&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;notify&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Cooker&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exp&lt;/span&gt;
    
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Coffee&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;make&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;observer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Observer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;food&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Food&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;observer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;callback&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;exp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;food&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; 
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Food&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Observer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;foodObserver&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Food&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;food&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Observer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;observer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;foodObserver&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;observer&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;handle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// åˆ¶ä½œè¿‡ç¨‹&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// åˆ¶ä½œå®Œæˆ&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;foodObserver&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;notify&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cooker&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Cooker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;food&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cooker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;I get {food}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šé¢çš„ä»£ç å°±æ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„å…¸å‹åº”ç”¨åœºæ™¯ï¼Œå…¶å®ä¸åŒçš„ç¼–ç¨‹è¯­è¨€å¯ä»¥æ ¹æ®å„è‡ªçš„ç‰¹ç‚¹å®ç°è§‚å¯Ÿè€…æ¨¡å¼ï¼Œä¾‹å¦‚c++å¸¸ç”¨æ¨¡æ¿ç±»å®ç°ï¼Œè€ŒJavaç»å¸¸ä¼šæŠ½è±¡ç±»æ¥å®ç°ã€‚ä¸ç®¡å¦‚ä½•å®ç°æœ¬è´¨ä¸Šï¼Œéƒ½æ˜¯é€šè¿‡æŠ½è±¡å‡ºé€šç”¨çš„æ–¹æ³•ï¼Œä»è€Œä½¿ä¸šåŠ¡çš„ä¾èµ–æ€§é™ä½ï¼Œæ¥å‡å°‘è½¯ä»¶çš„å¤æ‚åº¦ã€‚&lt;/p&gt;

&lt;h2 id=&quot;è½¯ä»¶å¤æ‚åº¦çš„åŸåˆ™&quot;&gt;è½¯ä»¶å¤æ‚åº¦çš„åŸåˆ™&lt;/h2&gt;

&lt;p&gt;ä»ä¸Šé¢çš„ä¾‹å­ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå½“æˆ‘ä»¬åœ¨é™ä½è½¯ä»¶å¤æ‚åº¦çš„è¿‡ç¨‹ä¸­ï¼Œå°±è¯ç”Ÿäº†è®¾è®¡æ¨¡å¼ã€‚ä¸‹é¢å°±å†æ‹¿è®¾è®¡æ¨¡å¼ä¸­ç»å…¸çš„ç­–ç•¥æ¨¡å¼ä¸¾ä¸ªä¾‹å­ï¼Œæ¥è¯´æ˜ä¸€ä¸‹é™ä½è½¯ä»¶å¤æ‚åº¦å¸¸ç”¨çš„ä¸€äº›åŸåˆ™ã€‚ä¸šåŠ¡ä¸­æ ¹æ®ä¸åŒçš„æ¡ä»¶æ‰§è¡Œä¸åŒçš„è¡Œä¸ºï¼Œè¿™ç§åœºæ™¯å†å¹³å¸¸ä¸è¿‡äº†ã€‚å½“ä¸šåŠ¡åœ¨ä¸åœçš„è¿­ä»£æ—¶ï¼Œä¼šäº§ç”Ÿè¿™æ ·çš„éœ€æ±‚ä¾‹å¦‚:â€å½“å¤„ç†ä¸šåŠ¡Aæ—¶ï¼Œéœ€è¦å¤„ç†ä¸šåŠ¡Bã€‚æ…¢æ…¢çš„åˆå¢åŠ äº†å¦ä¸€ä¸ªéœ€æ±‚å¤„ç†ä¸šåŠ¡Bæ—¶ï¼Œåˆè¦å¤„ç†ä¸šåŠ¡Cã€‚â€ç„¶åæœ€ç»ˆçš„ä¸šåŠ¡ä»£ç å¯èƒ½å°±å¦‚ä¸‹:&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BusinessA&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;condition&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;condition&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BusinessB&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;condition&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BusinessC&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BusinessD&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;condition&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BusinessB&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;condition&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;condition&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BusinessC&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BusinessD&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BusinessC&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;condition&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;condition&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BusinessB&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BusinessD&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BusinessD&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;condition&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;handler business&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;BusinessA&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BusinessA&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šé¢è¿™ç§ä»£ç å°±æ˜¯åœ¨è‹¥å¹²æ¬¡ä¸šåŠ¡è¿­ä»£åï¼Œå½¢æˆäº†è¿™æ ·çš„é€»è¾‘ï¼Œæˆ‘ä»¬ç”»ä¸‹è¿™ä¸ªä¸šåŠ¡çš„æµç¨‹å›¾å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/soft-complex-3.jpg&quot; alt=&quot;å›¾2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å¯ä»¥çœ‹å‡ºè¿™ç§ä¸šåŠ¡çš„å¤æ‚åº¦ç†è§£èµ·æ¥éå¸¸çš„å›°éš¾ã€‚ä¸‹é¢ç»è¿‡ç­–ç•¥æ¨¡å¼æ”¹é€ è¿‡çš„ä»£ç ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BusinessA&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;condition&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;handler business A&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BusinessB&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;condition&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;handler business B&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BusinessC&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;condition&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;handler business C&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BusinessD&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;condition&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;handler business D&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Strategy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;condition&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;condition&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BusinessA&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BusinessB&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;hanlder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BusinessA&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BusinessC&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;hanlder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BusinessA&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BusinessD&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;hanlder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;handler business&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Strategy&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strategy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Strategy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;strategy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å†ç”»å‡ºä¸Šé¢ä»£ç çš„ä¸šåŠ¡æµç¨‹å›¾ï¼Œå¯ä»¥æ˜æ˜¾çš„çœ‹å‡ºæ¥ï¼Œé‡‡ç”¨æ ‘å½¢çš„ç»“æ„å¤æ‚åº¦é™ä½äº†å¾ˆå¤šã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/soft-complex-4.jpg&quot; alt=&quot;å›¾4&quot; /&gt;&lt;/p&gt;

&lt;p&gt;é€šè¿‡ä¸Šé¢çš„è¿™ä¸ªä¾‹å­ï¼Œå¯ä»¥çœ‹å‡ºå‡å°‘å„ä¸ªæ¨¡å—çš„åå‘ä¾èµ–ï¼Œé¿å…åå‘ç¯çš„å½¢æˆï¼Œå¯ä»¥æœ‰æ•ˆçš„é™ä½è½¯ä»¶çš„å¤æ‚åº¦ã€‚æ‰€ä»¥æˆ‘ä»¬ç»„ç»‡ä»£ç ç»“æ„çš„æ—¶å€™ï¼Œå°½é‡ç»„ç»‡ä¸ºæ ‘å½¢ç»“æ„ï¼Œé¿å…ç¯å½¢æˆï¼Œå°¤å…¶åå‘ä¾èµ–ç¯çš„å½¢æˆã€‚åå‘ä¾èµ–ç¯ä¸ä»…ä½¿å¤æ‚åº¦å¢åŠ ï¼ŒåŒæ—¶å¾ˆå®¹æ˜“å¼•èµ·æ½œåœ¨çš„é—®é¢˜ï¼Œå› ä¸ºç¯ä¸Šä»»æ„ä¸€å¤„æœ‰bugå½±å“çš„æ˜¯æ•´ä¸ªç¯çš„ä»£ç é€»è¾‘ã€‚è€Œå¦‚æœæ˜¯æ ‘å½¢ç»“æ„åªä¼šå½±å“å½“å‰æ ‘çš„ä¸€ä¸ªåˆ†æ”¯ã€‚&lt;/p&gt;

&lt;p&gt;è½¯ä»¶æ¶æ„ä¸­ï¼Œç»å¸¸æåˆ°çš„é«˜å†…èšï¼Œä½è€¦åˆï¼Œä»¥åŠè®¾è®¡æ¨¡å¼ä¸­çš„æ¥å£ä¾èµ–åŸåˆ™ï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯æ›´å¥½çš„åˆ†å±‚ã€‚åˆ†å±‚çš„é€»è¾‘ï¼Œç®€å•çš„æ¥è®²å°±æ˜¯è®©ç¨‹åºæµç¨‹å˜æˆä¸€ä¸ªæ ‘å½¢ç»“æ„ï¼Œæ›´å¥½çš„è§£è€¦ä¾èµ–ã€‚ç°åœ¨å¤§å‹çš„è½¯ä»¶åŸºæœ¬éƒ½æ˜¯æŒ‰ç…§æ ‘å½¢ç»“æ„è¿›è¡Œè®¾è®¡çš„ï¼Œåƒæ–‡ä»¶ç³»ç»Ÿï¼Œè¿›ç¨‹ç®¡ç†ç­‰ç­‰ã€‚éšç€ç°åœ¨è½¯ä»¶å¤æ‚åº¦çš„æé«˜ï¼Œå„ç§æ¡†æ¶å’Œæ¶æ„å±‚å‡ºä¸ç©·ï¼Œä½†æœ¬è´¨ä¸Šä¸‡å˜ä¸ç¦»å…¶å®—ï¼Œç”¨ä¸Šé¢æåˆ°çš„ä¸€ä¸ªç®€å•å…¬å¼æ¦‚å†µï¼Œå°±æ˜¯å¦‚ä½•è®©V(G)=E-N+2ä¸­çš„Væœ€å°ï¼Œå¤æ‚åº¦é™åˆ°æœ€ä½ã€‚&lt;/p&gt;

&lt;h2 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h2&gt;

&lt;p&gt;æœ‰å¥ä¿—è¯­å«â€å‰äººç§æ ‘åäººä¹˜å‡‰â€ï¼Œæˆ‘ä»¬å†™ä»£ç è®²æ­¦å¾·å°±æ˜¯è¦å…»æˆè¿™ç§ç¾å¾·ã€‚æ¯å½“å†™ä¸‹if elseæˆ–è€…å¢åŠ ä¸€ä¸ªå…¨å±€å˜é‡çš„æ—¶å€™ï¼Œå°±å¾—æ€è€ƒä¸‹ï¼Œæœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ³•å‡å°‘è¿™ä¸ªåˆ†æ”¯å’Œå˜é‡ã€‚å½“æˆ‘ä»¬åœ¨è®¾è®¡ä¸šåŠ¡é€»è¾‘ï¼Œä¸€æ—¦å‡ºç°äº†ç¯çŠ¶ç»“æ„æ—¶ï¼Œå°±å¾—æ€è€ƒä¸‹ï¼Œæ˜¯ä¸æ˜¯åˆ†å±‚åšçš„ä¸åˆç†ã€‚æ‰€ä»¥å¥½çš„ä»£ç ä¸ä»…ä»…æ˜¯ç®—æ³•æ€§èƒ½ä¸€æµï¼Œä¹Ÿåº”è¯¥æ˜¯ä¸€çœ¼å¯ä»¥çœ‹æ‡‚çš„ä»£ç ï¼Œåªæœ‰è¿™æ ·çš„ä»£ç æ‰èƒ½æŒç»­çš„ä¼ æ‰¿ä¸‹æ¥ï¼Œæ‰èƒ½è®©åäººç«™åœ¨ä½ çš„è‚©è†€ä¸Šèµ°çš„æ›´è¿œã€‚&lt;/p&gt;</content><author><name>mengtnt</name></author><summary type="html">æœ€è¿‘åˆšåšå®Œä¸€ä¸ªé¡¹ç›®ï¼Œé—²äº†ä¸‹æ¥ã€‚æƒ³åˆ†äº«ä¸‹å…³äºè½¯ä»¶å¤æ‚åº¦çš„ä¸€äº›æ€è€ƒã€‚è¿™é‡Œå…ˆè¯´ä¸‹æ–‡ç« æ ‡é¢˜çš„ç”±æ¥ï¼Œä¸€ä¸ªè½¯ä»¶äº§å“å¯¹äºç”¨æˆ·æ¥è®²ï¼Œå¥½çœ‹å¥½ç”¨æ˜¯å¿…é¡»çš„ï¼Œå…¶æ¬¡å°±æ˜¯çœ‹è¿™ä¸ªè½¯ä»¶çš„æ€§èƒ½å¥½ä¸å¥½ï¼Œä¸è¦è€æ˜¯å¡å’Œå´©æºƒã€‚å¦‚æœæ»¡è¶³è¿™ä¸¤ç‚¹ï¼Œå¾€å¾€è¿™ä¸ªè½¯ä»¶å£ç¢‘ä¸ä¼šå·®ã€‚æ‰€ä»¥å¯¹äºå¼€å‘äººå‘˜æ¥è®²ï¼Œå†™ä»£ç æ—¶ä¸€å®šè¦å…³æ³¨äº§å“çš„ä½“éªŒå’Œæ€§èƒ½ã€‚</summary></entry><entry><title type="html">ç»éªŒçš„æˆæœ¬</title><link href="https://mengtnt.com/2021/06/13/exp-cost.html" rel="alternate" type="text/html" title="ç»éªŒçš„æˆæœ¬" /><published>2021-06-13T08:51:35+00:00</published><updated>2021-06-13T08:51:35+00:00</updated><id>https://mengtnt.com/2021/06/13/exp-cost</id><content type="html" xml:base="https://mengtnt.com/2021/06/13/exp-cost.html">&lt;p&gt;æœ€è¿‘æƒ³å¯¹åšå®¢çš„æºç åšè‡ªåŠ¨åŒ–çš„CIï¼ŒåŸæœ¬æƒ³ç€ä½¿ç”¨githubçš„workflowé…ç½®ï¼Œæäº¤åšå®¢æºç åè®©githubè‡ªåŠ¨ç¼–è¯‘å‘å¸ƒåšå®¢ã€‚ä¸è¿‡ç”±äºè¿˜è¦éƒ¨ç½²ä¸€äº›å…¶ä»–çš„å†…å®¹ï¼Œæ‰€ä»¥ç´¢æ€§å°±æƒ³ç€è‡ªå·±å†™ä¸ªgithubçš„webhookï¼Œå½“æäº¤åšå®¢æºç æ—¶ï¼ŒæœåŠ¡å™¨è¿è¡ŒCIå·¥å…·ï¼Œé¡ºä¾¿å‘å¸ƒä¸‹è‡ªå·±éƒ¨ç½²çš„å…¶ä»–æœåŠ¡ã€‚&lt;/p&gt;

&lt;p&gt;åšè¿™ä¸ªäº‹æƒ…æœ¬èº«å¹¶ä¸éš¾ï¼Œå…¶å®åªè¦åœ¨githubä¸ŠæŠŠåšå®¢æºç çš„ä»“åº“ï¼Œå¢åŠ ä¸€ä¸ªwebhookï¼Œç„¶åæœåŠ¡å™¨åå°éƒ¨ç½²è‡ªå·±çš„CIå·¥å…·å°±è¡Œäº†ã€‚åœ¨åšè¿™ä¸ªäº‹æƒ…ä¹‹å‰ï¼Œçªç„¶æƒ³åˆ°ï¼Œè‡ªå·±ä¸€ç›´ä»äº‹çš„æ˜¯å®¢æˆ·ç«¯çš„å¼€å‘ã€‚æœåŠ¡å™¨éƒ¨ç½²çš„ç»éªŒæ¯”è¾ƒå°‘ï¼Œåšè¿™ä¸ªäº‹æƒ…å¤§æ¦‚è¦èŠ±å¤šä¹…æ—¶é—´å“ªï¼Ÿç„¶åå°±å°è¯•ä»ç½‘ä¸Šçœ‹ä¸€äº›æ•™ç¨‹å’Œæ–‡ç« ï¼Œä»ç½‘ä¸Šä¸€äº›æè¿°æ¥è®²ï¼Œåšè¿™ä¸ªäº‹æƒ…å¯èƒ½åªéœ€è¦èŠ±è´¹1åˆ°2ä¸ªå°æ—¶çš„æ—¶é—´ã€‚ç„¶ååœ¨åšè¿™ä¸ªäº‹æƒ…çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å°±è®°å½•äº†è§£å†³æ•´ä¸ªé—®é¢˜çš„è¿‡ç¨‹å’Œæ—¶é—´ã€‚å¯¹æ¯”ä¸‹èŠ±è´¹çš„æ—¶é—´å’Œç²¾åŠ›ã€‚ä¸‹é¢æˆ‘å°±é€ä¸ªæè¿°ä¸‹å½“æ—¶è§£å†³é—®é¢˜çš„è¿‡ç¨‹ã€‚&lt;/p&gt;

&lt;h2 id=&quot;dockerç¯å¢ƒ&quot;&gt;Dockerç¯å¢ƒ&lt;/h2&gt;

&lt;p&gt;éƒ¨ç½²æœåŠ¡è‡ªç„¶å°‘ä¸äº†ä½¿ç”¨Dockerã€‚ç„¶åè‡ªå·±å°±æ ¹æ®åšå®¢ä½¿ç”¨çš„ç¯å¢ƒå¼€å§‹å†™DockerFileäº†ã€‚å› ä¸ºåšå®¢ç”¨çš„jekyllæ¡†æ¶ï¼Œè‡ªç„¶éœ€è¦rubyçš„ç¯å¢ƒã€‚å‡­å€Ÿè‡ªå·±ä¹‹å‰ä»…è®°çš„ä¸€äº›DockerçŸ¥è¯†ï¼Œè‡ªç„¶çš„å†™äº†ä¸‹é¢è¿™è¡Œä»£ç &lt;code class=&quot;highlighter-rouge&quot;&gt;FROM ruby:2.7.0&lt;/code&gt;,ç„¶ååˆæƒ³ç€è¿˜éœ€è¦nodeç¯å¢ƒï¼Œç„¶åDockerFileä»£ç å°±å˜æˆè¿™æ ·å­äº†ã€‚&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
FROM ruby:2.7.0
FROM node:latest

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¦‚æœäº†è§£Dockerå·¥ä½œåŸç†çš„è‡ªç„¶å°±æ‡‚äº†ï¼Œè·Ÿåœ¨FROMåé¢æ‰€æœ‰çš„æŒ‡ä»¤ï¼Œéƒ½æ˜¯åœ¨FROMè¿™å±‚é•œåƒç¯å¢ƒä¸Šåšçš„ã€‚æ‰€ä»¥å½“DockerFileæ‰§è¡Œåˆ° &lt;code class=&quot;highlighter-rouge&quot;&gt;RUN bundle install&lt;/code&gt;æ—¶å€™ï¼Œå°±æŠ¥é”™è¯´æ²¡æœ‰æ‰¾åˆ°bundleå‘½ä»¤ã€‚æœ€å¼€å§‹è‡ªå·±è¿˜æ²¡æœ‰æ„è¯†åˆ°æ—¶è¿™ä¸ªé”™è¯¯ï¼Œç„¶åå°±å¼€å§‹æŸ¥æ‰¾Dockerä¸‹rubyç¯å¢ƒçš„ç›¸å…³é”™è¯¯ï¼Œç„¶åæœ¬åœ°å†™äº†DockerFileå¢åŠ å¦‚ä¸‹ä»£ç :&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
FROM ruby:2.7.0
RUN &lt;span class=&quot;nb&quot;&gt;mkdir&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; /home/blogsource
WORKDIR /home/blogsource
COPY &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; /home/blogsource
RUN bundle &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å‘ç°éƒ½æ˜¯æ­£ç¡®çš„ï¼Œç„¶åå¯¹æ¯”æºç æ‰å‘ç°å¯èƒ½æ˜¯FROMæŒ‡ä»¤çš„é—®é¢˜ï¼Œç„¶åä»”ç»†æŸ¥è¯¢äº†FROMæŒ‡ä»¤ç”¨æ³•ï¼Œå‘ç°Docker17.05è€çš„ç‰ˆæœ¬åªæ”¯æŒä¸€æ¡FROMæŒ‡ä»¤ï¼Œæ–°çš„Dockerç‰ˆæœ¬æ”¯æŒå¤šæ¡ã€‚ä½†æ˜¯Dockeråªä¼šéƒ¨ç½²æœ€åä¸€æ¡FROMæŒ‡ä»¤çš„ç¯å¢ƒã€‚ä¸‹é¢å°±å¼•ç”¨ä¸‹ç½‘ä¸Šçš„Dockerå­¦ä¹ çš„ä¸€äº›èµ„æ–™.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;å¤šä¸ª FROM æŒ‡ä»¤å¹¶ä¸æ˜¯ä¸ºäº†ç”Ÿæˆå¤šæ ¹çš„å±‚å…³ç³»ï¼Œæœ€åç”Ÿæˆçš„é•œåƒï¼Œä»ä»¥æœ€åä¸€æ¡ FROM ä¸ºå‡†ï¼Œä¹‹å‰çš„ FROM ä¼šè¢«æŠ›å¼ƒï¼Œé‚£ä¹ˆä¹‹å‰çš„FROM åˆæœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿæ¯ä¸€æ¡ FROM æŒ‡ä»¤éƒ½æ˜¯ä¸€ä¸ªæ„å»ºé˜¶æ®µï¼Œå¤šæ¡ FROM å°±æ˜¯å¤šé˜¶æ®µæ„å»ºï¼Œè™½ç„¶æœ€åç”Ÿæˆçš„é•œåƒåªèƒ½æ˜¯æœ€åä¸€ä¸ªé˜¶æ®µçš„ç»“æœï¼Œä½†æ˜¯ï¼Œèƒ½å¤Ÿå°†å‰ç½®é˜¶æ®µä¸­çš„æ–‡ä»¶æ‹·è´åˆ°åè¾¹çš„é˜¶æ®µä¸­ï¼Œè¿™å°±æ˜¯å¤šé˜¶æ®µæ„å»ºçš„æœ€å¤§æ„ä¹‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;è¿™æ˜¯æˆ‘çŠ¯çš„ç¬¬ä¸€ä¸ªé”™è¯¯ï¼Œç­‰æˆ‘è§£å†³å®Œè¿™ä¸ªé—®é¢˜ï¼Œå¤§æ¦‚æ¶ˆè€—äº†1ä¸ªå¤šå°æ—¶çš„æ—¶é—´ã€‚(PS ç”±äºè‡ªå·±æœåŠ¡å™¨å¸¦å®½æ¯”è¾ƒå°ï¼Œæ¯æ¬¡è¿è¡ŒDockeræ‹‰å–é•œåƒæ—¶é—´å¾ˆä¹…å¤§æ¦‚è¦10åˆ†é’Ÿï¼Œä¹Ÿæ˜¯æµªè´¹æ—¶é—´çš„ä¸€ä¸ªåŸå› )ã€‚&lt;/p&gt;

&lt;h2 id=&quot;cmdå‘½ä»¤çš„ä½¿ç”¨&quot;&gt;CMDå‘½ä»¤çš„ä½¿ç”¨&lt;/h2&gt;

&lt;p&gt;å¼€å¿ƒçš„è§£å†³å®Œç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œç„¶ååˆå¼€å§‹äº†ç¼–è¯‘Dockeré•œåƒã€‚å…¶å®æˆ‘å¿ƒé‡Œæ—©æœ‰å‡†å¤‡ä¸å¯èƒ½æœ‰è¿™ä¹ˆé¡ºåˆ©çš„ï¼Œæœç„¶æ§åˆ¶å°åˆå¼€å§‹æŠ¥é”™äº†ï¼Œçœ‹ä¸‹æˆ‘å†™çš„DockerFile.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
FROM ruby:2.7.0
RUN &lt;span class=&quot;nb&quot;&gt;mkdir&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; /home/blogsource
WORKDIR /home/blogsource
COPY &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; /home/blogsource
RUN bundle &lt;span class=&quot;nb&quot;&gt;install
&lt;/span&gt;CMD &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;cd&quot;&lt;/span&gt;, &lt;span class=&quot;s2&quot;&gt;&quot;_nodejs/&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;

RUN curl &lt;span class=&quot;nt&quot;&gt;-sL&lt;/span&gt; https://deb.nodesource.com/setup_14.x | bash -&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-qq&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--no-install-recommends&lt;/span&gt; nodejs &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; npm &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™æ˜¯æˆ‘çŠ¯çš„ç¬¬äºŒä¸ªé”™è¯¯ï¼Œæƒ³å½“ç„¶çš„ä»¥ä¸ºCMDå‘½ä»¤å°±å¯ä»¥æŠŠå·¥ä½œç›®å½•è½¬åˆ°nodejsçš„æ–‡ä»¶å¤¹ä¸­ï¼Œç„¶åå®‰è£…nodeç¯å¢ƒã€‚ç¯å¢ƒå®‰è£…å®Œåè¿è¡Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;npm install&lt;/code&gt; å°±æŠ¥é”™è¯´æ‰¾ä¸åˆ°packageæ–‡ä»¶ã€‚ç„¶åå½“æ—¶å°±æƒ³ï¼Œæ˜¯ä¸æ˜¯CMDå‘½ä»¤çš„é—®é¢˜å°±ç”¨äº†ä¸‹é¢çš„æ–¹æ³•é‡æ–°è¯•äº†ä¸‹ã€‚&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
RUN curl &lt;span class=&quot;nt&quot;&gt;-sL&lt;/span&gt; https://deb.nodesource.com/setup_14.x | bash -&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-qq&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--no-install-recommends&lt;/span&gt; nodejs &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; ./_nodejs/ &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; npm &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å‘ç°è¿™æ ·å­å®‰è£…å°±æ²¡æœ‰é—®é¢˜äº†ï¼Œç„¶åå°±æŸ¥è¯¢äº†ä¸‹CMDå’ŒRUNå‘½ä»¤çš„ç”¨æ³•ï¼Œä¸‹é¢çš„å·®å¼‚å°±æ˜¯å…³é”®ç‚¹ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;CMD æŒ‡ä»¤ï¼šç±»ä¼¼äº RUN æŒ‡ä»¤ï¼Œç”¨äºè¿è¡Œç¨‹åºï¼Œä½†äºŒè€…è¿è¡Œçš„æ—¶é—´ç‚¹ä¸åŒï¼›CMD åœ¨docker run æ—¶è¿è¡Œï¼Œè€Œédocker build;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;çœ‹åˆ°è¿™é‡Œå°±æ˜ç™½äº†ï¼Œåœ¨å®‰è£…ç¯å¢ƒçš„æ—¶å€™ç”¨RUNæŒ‡ä»¤ï¼Œè€ŒçœŸæ­£è¿è¡Œå®¹å™¨çš„æ—¶å€™é‡‡ç”¨CMDï¼Œè¿™ä¸¤ç‚¹çš„å·®åˆ«å°±é€ æˆäº†è¿™ä¸ªé—®é¢˜ã€‚è¿˜å¥½è¿™ä¸ªé—®é¢˜ä¹Ÿå°±æµªè´¹äº†åŠå°æ—¶çš„æ—¶é—´ã€‚æ¥ä¸‹æ¥çœ‹ä¸‹ä¸ªé—®é¢˜å§ã€‚&lt;/p&gt;

&lt;h2 id=&quot;dockerè¿è¡Œé—®é¢˜&quot;&gt;Dockerè¿è¡Œé—®é¢˜&lt;/h2&gt;

&lt;p&gt;ç»ˆäºç¼–è¯‘Dockeræ–‡ä»¶æ²¡æœ‰é—®é¢˜äº†ï¼Œä½†æ˜¯å‘ç°Dockerå®¹å™¨åªè¦è¿è¡Œå°±é€€å‡ºä¸€ç›´æ˜¾ç¤º &lt;code class=&quot;highlighter-rouge&quot;&gt;exit(0)&lt;/code&gt;ã€‚å½“æ—¶ç€å®æ²¡æœ‰äº†æ€è·¯ï¼Œæ„Ÿè§‰ç¼–è¯‘çš„è¿‡ç¨‹éƒ½æ­£ç¡®ä¸ºå•¥è¿è¡Œä¸äº†é‚£ã€‚å°±é€šè¿‡ &lt;code class=&quot;highlighter-rouge&quot;&gt;docker exec&lt;/code&gt;è¿›å…¥åˆ°å®¹å™¨ä¸­ï¼Œæ‰§è¡Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;nmp start&lt;/code&gt;å‘ç°æ²¡æœ‰é—®é¢˜å•Šã€‚äºæ˜¯å¼€å§‹æŸ¥æ‰¾ä¸‹äº†dockeré€€å‡ºçš„åŸå› ï¼Œå…³é”®å­—è‡ªç„¶æ˜¯exit(0),ç„¶åå¾ˆå¿«æ‰¾åˆ°äº†ä¸‹é¢çš„ç­”æ¡ˆ.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ä¹‹å‰ä»‹ç»å®¹å™¨çš„æ—¶å€™æ›¾ç»è¯´è¿‡ï¼ŒDocker ä¸æ˜¯è™šæ‹Ÿæœºï¼Œå®¹å™¨å°±æ˜¯è¿›ç¨‹ã€‚æ—¢ç„¶æ˜¯è¿›ç¨‹ï¼Œé‚£ä¹ˆåœ¨å¯åŠ¨å®¹å™¨çš„æ—¶å€™ï¼Œéœ€è¦æŒ‡å®šæ‰€è¿è¡Œçš„ç¨‹åºåŠå‚æ•°ã€‚CMD æŒ‡ä»¤å°±æ˜¯ç”¨äºæŒ‡å®šé»˜è®¤çš„å®¹å™¨ä¸»è¿›ç¨‹çš„å¯åŠ¨å‘½ä»¤çš„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;çœ‹åˆ°è¿™é‡Œè‡ªå·±å°±æœ‰ç‚¹æ˜ç™½äº†ï¼ŒæŸ¥çœ‹äº†ä¸‹è‡ªå·±å†™çš„DockerFileçš„è„šæœ¬ä»£ç ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;CMD [&quot;nohup&quot;,&quot;npm&quot;,&quot;start&quot;]&lt;/code&gt;å‘ç°ä¸ºäº†è®©nodeåœ¨åå°è¿è¡Œï¼Œè‡ªå·±ç‰¹æ„åŠ äº†nohupï¼Œåè€Œæ˜¯å¼„å·§æˆæ‹™ï¼Œé€ æˆDockerå®¹å™¨è¿è¡Œå®Œå°±è‡ªåŠ¨é€€å‡ºäº†ã€‚&lt;/p&gt;

&lt;p&gt;å…¶å®è§£å†³è¿™ä¸ªé—®é¢˜èŠ±äº†è‡ªå·±è›®ä¹…çš„æ—¶é—´ï¼Œä¸€ç›´æŠŠDockerå½“æˆäº†è™šæ‹Ÿæœºçš„æ¦‚å¿µåœ¨æƒ³è¿™ä¸ªé€»è¾‘ï¼ŒDockeræœ¬è´¨ä¸Šè¿˜æ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œåªæ˜¯ä½¿ç”¨äº†linuxç”¨æˆ·å®šä¹‰åˆ†ç»„çš„èƒ½åŠ›ï¼Œå¦‚æœçŸ¥é“è¿™ä¸ªå‰æå°±ä¸å®¹æ˜“çŠ¯é”™äº†ã€‚è¿™çœ‹èµ·æ¥å’Œè‹¹æœçš„æ²™ç›’åŸç†æœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™ï¼Œä¹Ÿæ­£æ˜¯è¿™ä¸ªé”™è¯¯çš„è®¤çŸ¥ï¼Œè‡ªå·±å†³å®šä¹‹åä¸€å®šè¦çœ‹ä¸‹Dockeræºç çš„é€»è¾‘ï¼Œäº†è§£ä¸‹Dockerè®¾è®¡çš„æ€è·¯ã€‚&lt;/p&gt;

&lt;h2 id=&quot;gité…ç½®é—®é¢˜&quot;&gt;Gité…ç½®é—®é¢˜&lt;/h2&gt;

&lt;p&gt;å‰é¢çš„ä¸‰ä¸ªé—®é¢˜ï¼Œå…¶å®å·²ç»èŠ±äº†è‡ªå·±å’–å•¡é¦†ä¸€ä¸‹åˆçš„æ—¶é—´äº†ã€‚ç„¶åç¼–è¯‘è¿è¡ŒDockerï¼Œå‘ç°æ²¡æœ‰é—®é¢˜äº†ã€‚å°±å»githubï¼Œæ‰“å¼€äº†webhookçš„è®¾ç½®ï¼Œé…ç½®ä¸Šå»åï¼ŒæŒ‰ç…§æ–‡æ¡£æŠŠnodejsçš„ä»£ç å†™å¥½äº†ï¼Œé€»è¾‘å¾ˆç®€å•å¦‚ä¸‹:&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;commits&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;command&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;command&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;publish&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;receive success start publish...&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;execute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;cd .. &amp;amp;&amp;amp; git pull origin master &amp;amp;&amp;amp; ./publish.sh&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;publish successful&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;execute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;process&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;child_process&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;process&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;exec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;stdout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;stderr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;stdout:&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;stdout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;stderr:&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;stderr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;error:&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç„¶åå°±æäº¤äº†ä¸‹githubçš„æºç ï¼Œçœ‹äº†ä¸‹Dockerè¿è¡Œçš„æ—¥å¿—ï¼Œå‘ç°gitæ²¡æœ‰æƒé™çš„æŠ¥é”™ï¼Œç„¶åè‡ªå·±æƒ³äº†ä¸‹ï¼ŒDockeræ˜¯æŒ‰ç…§groupç”¨æˆ·çš„æ¦‚å¿µéš”ç¦»è¿›ç¨‹çš„ï¼Œé‚£è‡ªç„¶ä¸èƒ½é‡ç”¨æœåŠ¡å™¨ä¸Šçš„sshkeyäº†ï¼Œé‚£åœ¨Dockeré•œåƒbuildçš„æ—¶å€™åº”è¯¥æŠŠsshkeyæ–‡ä»¶å¤åˆ¶è¿›å»ï¼Œè‡³æ­¤å®Œæ•´çš„DockerFileä»£ç å°±å¦‚ä¸‹:&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;FROM ruby:2.7.0
USER root

&lt;span class=&quot;c&quot;&gt;#åœ¨imageä¸­åˆ›å»ºæ–‡ä»¶å¤¹&lt;/span&gt;
RUN &lt;span class=&quot;nb&quot;&gt;mkdir&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; /home/blogsource
&lt;span class=&quot;c&quot;&gt;# å°†å·¥ç¨‹ä¸‹æ‰€æœ‰æ–‡ä»¶æ‹·è´åˆ°æ–‡ä»¶å¤¹ä¸­&lt;/span&gt;
COPY &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; /home/blogsource

&lt;span class=&quot;c&quot;&gt;#ä½¿ç”¨RUNå‘½ä»¤æ‰§è¡Œnpm installå®‰è£…å·¥ç¨‹ä¾èµ–åº“&lt;/span&gt;
SHELL &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/bin/bash&quot;&lt;/span&gt;, &lt;span class=&quot;s2&quot;&gt;&quot;-o&quot;&lt;/span&gt;, &lt;span class=&quot;s2&quot;&gt;&quot;pipefail&quot;&lt;/span&gt;, &lt;span class=&quot;s2&quot;&gt;&quot;-c&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
RUN bundle &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; curl &lt;span class=&quot;nt&quot;&gt;-sL&lt;/span&gt; https://deb.nodesource.com/setup_14.x | bash -&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get update &lt;span class=&quot;nt&quot;&gt;-qq&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-qq&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--no-install-recommends&lt;/span&gt; nodejs &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get clean &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; ./_nodejs/ &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; npm &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;mkdir&lt;/span&gt; /root/.ssh &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;cp&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; ./gitconfig/&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; /root/.ssh/ &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; git config &lt;span class=&quot;nt&quot;&gt;--global&lt;/span&gt; user.email &lt;span class=&quot;s2&quot;&gt;&quot;animeng68@gmail.com&quot;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; git config &lt;span class=&quot;nt&quot;&gt;--global&lt;/span&gt; user.name &lt;span class=&quot;s2&quot;&gt;&quot;mengtnt&quot;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#æš´éœ²ç»™ä¸»æœºçš„ç«¯å£å·&lt;/span&gt;
EXPOSE 9999
&lt;span class=&quot;c&quot;&gt;#æ‰§è¡Œnpm startå‘½ä»¤ï¼Œå¯åŠ¨Nodeå·¥ç¨‹&lt;/span&gt;
WORKDIR /home/blogsource/_nodejs
CMD &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;npm&quot;&lt;/span&gt;, &lt;span class=&quot;s2&quot;&gt;&quot;start&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è‡ªæ­¤ç»ˆäºæŠŠåšå®¢è‡ªåŠ¨åŒ–ciçš„å·¥å…·æ­å»ºæˆåŠŸäº†ï¼Œè‡ªå·±è®°å½•äº†ä¸‹æ—¶é—´å¤§æ¦‚èŠ±äº†8å°æ—¶å·¦å³æ‰å®Œæˆã€‚æˆ‘ç›¸ä¿¡å¦‚æœæ˜¯ä¸€ä¸ªDockerè¿ç»´å¾ˆæœ‰ç»éªŒçš„äººï¼Œæè¿™äº›æºç ï¼Œå¯èƒ½åªéœ€è¦1åˆ°2ä¸ªå°æ—¶å°±èƒ½éƒ¨ç½²å’Œè°ƒè¯•å®Œæˆï¼Œæˆ‘è¿™é‡Œå¾ˆå¤šæ—¶é—´éƒ½æ˜¯æµªè´¹åœ¨è§£å†³é—®é¢˜ä¸Šäº†ã€‚è¿™æœ¬è´¨ä¸Šå°±æ˜¯ç»éªŒçš„æˆæœ¬ã€‚&lt;/p&gt;

&lt;h2 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h2&gt;

&lt;p&gt;æ‰€ä»¥ä½•ä¸ºç»éªŒï¼Œå°±æ˜¯åœ¨æŸä¸ªé¢†åŸŸè§£å†³é—®é¢˜çš„æ•ˆç‡ã€‚æ‹¿ä¸Šé¢çš„ä¾‹å­ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªç»éªŒä¸ä¸°å¯Œçš„äººï¼Œå¯èƒ½è¦èŠ±è´¹3å€äºç»éªŒä¸°å¯Œçš„äººï¼Œæ‰èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿™ä¸ªå°±æ˜¯ç”Ÿäº§æ•ˆç‡çš„é—®é¢˜ã€‚è¯•é—®ä¼ä¸šæ›´æ„¿æ„é›‡ä½£é‚£ç§äººï¼Œæ˜¾è€Œæ˜“è§å¦‚æœä¼ä¸šç”¨1ä¸ªæœˆå°±å¯ä»¥èµšåˆ°3ä¸ªæœˆçš„é’±æ—¶ï¼Œå°±æ„¿æ„æ‹¿3å€å·¥èµ„æ‹›è˜ä¸€ä¸ªç»éªŒä¸°å¯Œçš„äººï¼Œè€Œä¸ä¼šç”¨å¹³å‡çš„å·¥èµ„æ°´å¹³æ‹›è˜ä¸€ä¸ªç»éªŒä¸è¶³çš„äººã€‚&lt;/p&gt;

&lt;p&gt;å¯¹äºä¼ä¸šæ¥è®²ï¼Œç”Ÿäº§æ•ˆç‡æ˜¯ä»–ä»¬ç«‹äºä¸è´¥ä¹‹åœ°çš„é‡è¦æ‰‹æ®µã€‚å¾ˆå¤šå·¥å…·çš„å‘æ˜ä¹Ÿæ­£æ˜¯ä¸ºäº†æå‡ç”Ÿäº§æ•ˆç‡ã€‚æ‰€ä»¥ä½œä¸ºæ‰“å·¥äººçš„æˆ‘ä»¬è¦è€ƒè™‘ï¼Œä¸ºä»€ä¹ˆä¼ä¸šè¦ç”¨ä½ ï¼Œè‡ªå·±çš„ä»·å€¼ä½•åœ¨ï¼Ÿå·¥ä½œçš„æ—¶å€™ï¼Œä¸€äº›é‡å¤çš„åŠ³åŠ¨ï¼Œå°±è¦æƒ³æœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥åšè‡ªåŠ¨åŒ–ã€‚è¿™ä¸ä»…èŠ‚çœäº†ä¼ä¸šçš„æˆæœ¬ï¼Œé‡è¦çš„æ˜¯ä¹Ÿè®©è‡ªå·±å­¦åˆ°äº†ç»éªŒï¼Œé‚£å°†æ¥å…¶ä»–å…¬å¸ä¹Ÿå¾ˆä¹äºé›‡ä½£ä½ ï¼Œå› ä¸ºä½ å¸®ä¼ä¸šæé«˜äº†ç”Ÿäº§åŠ›ï¼Œä¼ä¸šå°±æ›´ä¹æ„æ‹¿é«˜äºæ²¡ç»éªŒäººçš„å·¥èµ„æ¥è˜ç”¨ä½ ã€‚æ‰€ä»¥åœ¨èŒåœºä¸Šï¼Œè¦ä¸æ–­çš„å¢åŠ è‡ªå·±è§£å†³é—®é¢˜çš„ç»éªŒï¼Œç„¶åæ ‘ç«‹è‡ªå·±çš„æ ¸å¿ƒç«äº‰åŠ›ï¼Œè¿™æ ·æ‰èƒ½ç«‹äºä¸è´¥ä¹‹åœ°ã€‚&lt;/p&gt;</content><author><name>mengtnt</name></author><summary type="html">æœ€è¿‘æƒ³å¯¹åšå®¢çš„æºç åšè‡ªåŠ¨åŒ–çš„CIï¼ŒåŸæœ¬æƒ³ç€ä½¿ç”¨githubçš„workflowé…ç½®ï¼Œæäº¤åšå®¢æºç åè®©githubè‡ªåŠ¨ç¼–è¯‘å‘å¸ƒåšå®¢ã€‚ä¸è¿‡ç”±äºè¿˜è¦éƒ¨ç½²ä¸€äº›å…¶ä»–çš„å†…å®¹ï¼Œæ‰€ä»¥ç´¢æ€§å°±æƒ³ç€è‡ªå·±å†™ä¸ªgithubçš„webhookï¼Œå½“æäº¤åšå®¢æºç æ—¶ï¼ŒæœåŠ¡å™¨è¿è¡ŒCIå·¥å…·ï¼Œé¡ºä¾¿å‘å¸ƒä¸‹è‡ªå·±éƒ¨ç½²çš„å…¶ä»–æœåŠ¡ã€‚</summary></entry></feed>