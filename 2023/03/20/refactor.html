<!DOCTYPE html>
<html>
<head>
    <link rel="shortcut icon" href="">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>é‡æ„ </title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="èµ°è‡ªå·±çš„è·¯ï¼Œè®©åˆ«äººè¯´å»å§">
    <meta name="author" content="mengtnt">
    <meta name="keywords" content="">
    <link rel="canonical" href="https://mengtnt.com/2023/03/20/refactor.html">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/pixyll.css" type="text/css">

    <!-- Fonts -->
    <!-- <link href='//fonts.useso.com/css?family=Merriweather:900,900italic,300,300italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.useso.com/css?family=Lato:900,300' rel='stylesheet' type='text/css'> -->
    
      <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    

    <!-- Open Graph -->
    <!-- From: https://github.com/mmistakes/hpstr-jekyll-theme/blob/master/_includes/head.html -->
    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="article">
    <meta property="og:title" content="é‡æ„">
    <meta property="og:description" content="èµ°è‡ªå·±çš„è·¯ï¼Œè®©åˆ«äººè¯´å»å§">
    <meta property="og:url" content="https://mengtnt.com/2023/03/20/refactor.html">
    <meta property="og:site_name" content="mengtntçš„Blog">
    

</head>

<body class="">
  <div class="site-wrap">
    <header class="site-header px2 px-responsive">
  <div class="mt2 wrap">
    <div class="measure">
      <a href="https://mengtnt.com" class="site-title">mengtntçš„Blog</a>
      <nav class="site-nav right">
        <a href="/about/">å…³äº</a>
<a href="/contact/">è”ç³»</a>

      </nav>
      <div class="clearfix"></div>
      
        <div class="social-icons">
  <div class="left">
    
      <a class="fa fa-github" href="https://github.com/animeng"></a>
    
    
      <a class="fa fa-twitter" href="https://twitter.com/mengtnt"></a>
    
    
      <a class="social fa fa-weibo" href="https://weibo.com/mengtnt"></a>
    
    
    
      <a class="fa fa-envelope" href="mailto:animeng68@gmail.com"></a>
    
    
  </div>
  <div class="right">
    
    
    
  </div>
</div>
<div class="clearfix"></div>

      
    </div>
  </div>
</header>


    <div class="post p2 p-responsive wrap" role="main">
      <div class="measure">
        


<div class="post-header mb2">
  
  <h1 class="py2">é‡æ„</h1>
  
  <span class="post-meta">03æœˆ 20æ—¥, 2023</span><br>
  
  <span class="post-meta small">3 minute read</span>
</div>

<article class="post-content">
  <p>é‡æ„æ˜¯ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„é—®é¢˜ï¼Œå¹¶ä¸”ä¹Ÿæœ‰å¤§é‡çš„ä¹¦ç±ä»‹ç»é‡æ„çš„æ–¹æ³•ã€‚é‚£å¦‚ä½•é‡æ„ä»£ç ï¼Ÿå¦‚ä½•ä¿è¯é‡æ„çš„ä»£ç ä¸å‡ºé—®é¢˜ï¼Ÿé‡æ„åçš„ä»£ç å¦‚ä½•é˜²æ­¢è…åŒ–ï¼Ÿæˆ‘å…ˆè´´å‡ºæ¥ ChatGPT å¦‚ä½•å›ç­”çš„ï¼Œæ¥æ„Ÿå—ä¸‹å¥¹çš„å¼ºå¤§ã€‚</p>

<blockquote>
  <p>å¦‚ä½•é‡æ„ä»£ç </p>
  <ol>
    <li>æå–æ–¹æ³•ï¼šå¦‚æœä½ æœ‰ä¸€æ®µè¿‡é•¿æˆ–è¿‡äºå¤æ‚çš„ä»£ç ï¼Œå¯ä»¥å°†å…¶æå–ä¸ºç‹¬ç«‹çš„æ–¹æ³•ï¼Œä½¿å…¶æ›´æ˜“è¯»ä¸”å¯é‡å¤ä½¿ç”¨ã€‚</li>
    <li>é‡å‘½åå˜é‡å’Œæ–¹æ³•ï¼šä½¿ç”¨æè¿°æ€§çš„åç§°å‘½åå˜é‡å’Œæ–¹æ³•ï¼Œä½¿ä»£ç æ›´å®¹æ˜“ç†è§£ã€‚</li>
    <li>ç§»é™¤é‡å¤ä»£ç ï¼šæŸ¥æ‰¾é‡å¤çš„ä»£ç å—ï¼Œå¹¶å°†å…¶æå–ä¸ºå¯é‡å¤ä½¿ç”¨çš„æ–¹æ³•ã€‚</li>
    <li>ç®€åŒ–æ¡ä»¶è¯­å¥ï¼šå¦‚æœæ¡ä»¶è¯­å¥è¿‡äºå¤æ‚ï¼Œå°†å…¶åˆ†è§£ä¸ºæ›´å°ã€æ›´æ˜“å¤„ç†çš„éƒ¨åˆ†ã€‚</li>
    <li>ä½¿ç”¨æ›´å¥½çš„æ•°æ®ç»“æ„ï¼šå¦‚æœä½¿ç”¨çš„æ•°æ®ç»“æ„æ•ˆç‡ä½ä¸‹æˆ–ä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œè€ƒè™‘ä½¿ç”¨æ›´å¥½çš„æ•°æ®ç»“æ„ã€‚</li>
    <li>å°†ä»£ç åˆ†è§£æˆæ¨¡å—ï¼šå°†ä»£ç åˆ†è§£æˆå…·æœ‰ç‰¹å®šèŒè´£çš„è¾ƒå°æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—éƒ½æœ‰è‡ªå·±çš„ä¸€ç»„æµ‹è¯•ã€‚</li>
    <li>ç§»é™¤æ— ç”¨ä»£ç ï¼šæŸ¥æ‰¾ä¸å†ä½¿ç”¨çš„ä»£ç ï¼Œå¹¶å°†å…¶åˆ é™¤ä»¥ç®€åŒ–ä»£ç åº“å¹¶ä½¿å…¶æ›´æ˜“ç»´æŠ¤ã€‚
è¿™äº›åªæ˜¯é‡æ„ä»£ç çš„å‡ ä¸ªç¤ºä¾‹ã€‚å…³é”®åœ¨äºä¸æ–­å¯»æ‰¾æ”¹è¿›ä»£ç çš„æ–¹æ³•ï¼Œä½¿å…¶éšç€æ—¶é—´æ¨ç§»æ›´æ˜“ç»´æŠ¤ã€‚</li>
  </ol>
</blockquote>

<p>ChatGPT ä¸Šçš„å›ç­”å’Œå¾ˆå¤šä¹¦ç±å’Œæ•™ç¨‹ä¸­è®²çš„å¤§åŒå°å¼‚ï¼Œå…¶å®æœ‰æ—¶å€™æè¿°æ–‡å­—ä¼šå¾ˆæŠ½è±¡ã€‚è¿™é‡Œæˆ‘æ‹¿è‡ªå·±ç»å†çš„ä¸€ä¸ªä¾‹å­è¯´æ˜ã€‚å½“ç„¶ä¸æ˜¯ ChatGPT ç»™çš„ä¾‹å­ğŸ˜‚ã€‚</p>

<h2 id="ç®€å•åŠŸèƒ½çš„å¼€å‘">ç®€å•åŠŸèƒ½çš„å¼€å‘</h2>

<p>è¿™æ˜¯å¾ˆå¸¸è§çš„æˆå‘˜åˆ—è¡¨é¡µé¢å±•ç¤ºåŠŸèƒ½ã€‚æˆ‘ä»¬å…ˆçœ‹ç¬¬ä¸€ä¸ªç‰ˆæœ¬çš„å†™æ³•ã€‚</p>

<pre><code class="language-mermaid">
classDiagram
class MemberListViewController {
  -MemberListView view
  -loadView()
}

class MemberListView{ 
  -renderView(List&lt;MemberData&gt; data)
}

class MemberData {
  -String name
  -Int status
}

MemberListViewController *-- MemberListView: 1..1

MemberListView ..&gt; MemberData: 1..*

</code></pre>

<p>ä¸‹é¢ç”¨ä¼ªä»£ç çš„æ–¹å¼å±•ç¤ºä¸‹ï¼Œè°ƒç”¨çš„æµç¨‹ã€‚</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">MemberListViewController</span><span class="o">::</span><span class="n">loadView</span><span class="p">(){</span>
  <span class="n">RequestData</span><span class="p">(){</span> <span class="n">data</span> <span class="n">in</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">MemberData</span><span class="o">&gt;</span> <span class="n">dataList</span> <span class="o">=</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">MemberData</span><span class="o">&gt;</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">view</span><span class="p">.</span><span class="n">render</span><span class="p">(</span><span class="n">dataList</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="n">MemberListViewController</span> <span class="o">*</span><span class="n">vc</span> <span class="o">=</span> <span class="n">MemberListViewController</span><span class="p">()</span>
<span class="n">vc</span><span class="p">.</span><span class="n">loadView</span><span class="p">()</span>

</code></pre></div></div>

<p>å…¶å®è¿™ç§ UI å¼€å‘çš„é€»è¾‘å†ç®€å•ä¸è¿‡äº†ï¼Œè·å–æ•°æ®ç„¶åæŠŠæ•°æ®æ¸²æŸ“åˆ°ç›¸åº”çš„ UI ç»„ä»¶ä¸Šã€‚æˆ‘ä»¬ä¸‹é¢æ¥çœ‹ä¸‹åŠŸèƒ½çš„å‘å±•è¿‡ç¨‹ã€‚</p>

<h2 id="è‡ƒè‚¿ç±»çš„å½¢æˆ">è‡ƒè‚¿ç±»çš„å½¢æˆ</h2>

<p>éšç€æ­¤åŠŸèƒ½è®¾è®¡äº†ä¸åŒçš„åº”ç”¨åœºæ™¯ï¼Œä¾‹å¦‚ä»åœºæ™¯Aè¿›å»åº”è¯¥è·å–æœåŠ¡Açš„æ•°æ®ç„¶åå±•ç°ï¼Œä»åœºæ™¯Bè¿›å»è·å–æœåŠ¡Bçš„æ•°æ®â€¦
å…ˆæ¥çœ‹å¦‚æœæŒ‰ç…§åŸæ¥çš„é€»è¾‘ï¼Œéœ€è¦å†™ç±»ä¼¼ä¸‹é¢çš„å¤§é‡ä»£ç ã€‚</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">switch</span> <span class="n">condition</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">A</span><span class="p">:</span>
      <span class="n">RequestAData</span><span class="p">(){</span> <span class="n">data</span> <span class="n">in</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">MemberData</span><span class="o">&gt;</span> <span class="n">dataList</span> <span class="o">=</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">MemberData</span><span class="o">&gt;</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">view</span><span class="p">.</span><span class="n">render</span><span class="p">(</span><span class="n">dataList</span><span class="p">)</span> 
      <span class="p">}</span>
    <span class="k">case</span> <span class="n">B</span><span class="p">:</span>
      <span class="n">RequestBData</span><span class="p">(){</span> <span class="n">data</span> <span class="n">in</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">MemberData</span><span class="o">&gt;</span> <span class="n">dataList</span> <span class="o">=</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">MemberData</span><span class="o">&gt;</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">view</span><span class="p">.</span><span class="n">render</span><span class="p">(</span><span class="n">dataList</span><span class="p">)</span>
      <span class="p">}</span>
  <span class="p">}</span>

</code></pre></div></div>

<p>è¿™æ—¶å€™ä½ å°±ä¼šå‘ç° <code class="highlighter-rouge">Switch Case</code> ä¸­è¶Šæ¥è¶Šå¤šçš„æ•°æ®è¯·æ±‚å’Œæ¸²æŸ“ä»£ç ã€‚éšç€åº”ç”¨çš„åœºæ™¯è¶Šæ¥è¶Šå¤šï¼Œä¼šå‘ç° <code class="highlighter-rouge">MemberListViewController</code> ç±»å˜çš„è¶Šæ¥è¶Šå¤§ã€‚è¿™æ—¶å€™å¦‚ä½•é‡æ„?</p>

<p>è¿™é‡Œå°±è¦ç”¨åˆ°é‡æ„çš„ä¸€ä¸ªé‡è¦åŸåˆ™ï¼šèŒè´£å•ä¸€ã€‚ä¼˜åŒ–ä»£ç å°±æ˜¯æŠŠ <code class="highlighter-rouge">MemberListViewController</code> å¤§çš„ç±»æ‹†åˆ†ï¼Œæ­¤ç±»è´Ÿè´£æ¸²æŸ“è§†å›¾ï¼Œä¸è¦å†è´Ÿè´£æ•°æ®è¯·æ±‚äº†ï¼Œç½‘ç»œè¯·æ±‚ç›¸ä¼¼çš„åŠŸèƒ½å†…èšåˆ°å¦å¤–ä¸€ä¸ªç±»ä¸­<code class="highlighter-rouge">MemberListDataInteractor</code> ï¼Œä¸“é—¨å¤„ç†æ•°æ®è·å–ï¼Œè¿™æ ·å¯ä»¥å‡å°‘å•ä¸ªç±»çš„å¤§å°ï¼Œæ–¹ä¾¿é˜…è¯»ã€‚</p>

<pre><code class="language-mermaid">classDiagram

class MemberData {
  -String name
  -Int status
}

class MemberListDataInteractor { 
  - List&lt;MemberData&gt; dataList 
  - requestData(callback(List&lt;MemberData&gt; list))
}

class MemberListViewController {
  -MemberListView View
  -MemberListDataInteractor interactor
  -loadView()
}

class MemberListView{ 
  -View listView 
  -renderView(List&lt;MemberData&gt; data)
}

MemberListViewController *-- MemberListView: 1..1

MemberListViewController *-- MemberListDataInteractor: 1..1

MemberListDataInteractor *-- MemberData: 1..*

</code></pre>

<p>è¿™ä¸ªæ—¶å€™çš„è°ƒç”¨è¿‡ç¨‹å¯èƒ½æ˜¯è¿™æ ·çš„ã€‚å¦‚ä¸‹çš„ä¼ªä»£ç ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">MemberListViewController</span><span class="o">::</span><span class="n">loadView</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">interactor</span><span class="p">.</span><span class="n">requestData</span><span class="p">()</span> <span class="p">{</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">MemberData</span><span class="o">&gt;</span> <span class="n">list</span> <span class="n">in</span>
    <span class="n">MemberListView</span><span class="p">.</span><span class="n">renderView</span><span class="p">(</span><span class="n">list</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="n">MemberListViewController</span><span class="o">::</span><span class="n">loadView</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">interactor</span><span class="p">.</span><span class="n">requestData</span><span class="p">()</span> <span class="p">{</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">MemberData</span><span class="o">&gt;</span> <span class="n">list</span> <span class="n">in</span>
    <span class="n">MemberListView</span><span class="p">.</span><span class="n">renderView</span><span class="p">(</span><span class="n">list</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="n">MemberListViewController</span> <span class="o">*</span><span class="n">vc</span> <span class="o">=</span> <span class="n">MemberListViewController</span><span class="p">()</span>
<span class="n">vc</span><span class="p">.</span><span class="n">loadView</span><span class="p">()</span>
</code></pre></div></div>

<p>è¿™ä¸ªå…¶å®å°±æ˜¯å…¸å‹çš„ MVC çš„ç»“æ„ï¼Œè§†å›¾æ¸²æŸ“ã€æ•°æ®æ¨¡å‹ã€æ¨¡å‹ç»„è£…åˆ†å¼€ï¼Œæ ¸å¿ƒå°±æ˜¯å†…èšä¸åŒçš„åŠŸèƒ½ã€‚æœ‰æ—¶å€™æƒ³ä¸€æƒ³é˜…è¯»ä»£ç å°±è·Ÿæˆ‘ä»¬çœ‹æ–‡ç« ä¸€æ ·ï¼Œå¦‚æœä¸åˆ†æ®µè½ï¼Œç›´æ¥ä¸€ä¸ª1000å­—çš„æ®µè½ï¼Œç›¸ä¿¡å¾ˆå¤šäººéƒ½ä¸æ„¿æ„çœ‹ã€‚èŒè´£å•ä¸€åŸåˆ™çš„ç›®æ ‡å°±æ˜¯è®©äººæ›´æ„¿æ„é˜…è¯»ä½ çš„ä»£ç ï¼Œç¬¬ä¸€çœ¼ä¸è‡³äºè¢«å“åˆ°ã€‚</p>

<h2 id="é‡å¤ä»£ç çš„ä¼˜åŒ–">é‡å¤ä»£ç çš„ä¼˜åŒ–</h2>

<p>éšç€åŠŸèƒ½çš„æ¼”åŒ–ï¼Œç”¨æˆ·çš„ç•Œé¢è¶Šæ¥è¶Šå¤æ‚ï¼Œéœ€è¦å¤§é‡çš„æ•°æ®é¢‘ç¹çš„æ¸²æŸ“åˆ°è§†å›¾ä¸Šã€‚å°±ä¼šå‘ç°æœ‰å¤§é‡è§†å›¾æ¸²æŸ“ç»„è£…çš„ä»£ç ã€‚è¿™ç±»ä»£ç çš„ç‰¹ç‚¹æ˜¯ç›¸ä¼¼åº¦å¾ˆé«˜ï¼Œåªæ˜¯æ¸²æŸ“åˆ°ä¸åŒçš„è§†å›¾ä¸Šè€Œå·²ã€‚è¿™æ—¶å€™é‡æ„çš„å¦ä¸€ä¸ªé‡è¦åŸåˆ™DRYï¼Œä¸è¦å†™é‡å¤çš„ä»£ç ï¼Œå°±å‘æŒ¥ä½œç”¨äº†ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠé‡å¤çš„ä»£ç å†æŠ½è±¡å‡ºä¸€å±‚ï¼Œå°±å¯ä»¥å‡å°‘å¤§é‡ç›¸ä¼¼çš„ä»£ç ã€‚
è¿™ä¸ªç±»å¯ä»¥å«åš <code class="highlighter-rouge">MemberListDataPresentor</code>,ä¸“é—¨ç”¨æ¥ç»„è£…è§†å›¾ã€‚åªè¦ç®€å•çš„å¢åŠ  <code class="highlighter-rouge">MemberViewModel</code> è¿™ç§æ•°æ®ç»“æ„æ˜ å°„åˆ° <code class="highlighter-rouge">MemberListView</code> è¿™ç§è§†å›¾ä¸Šï¼Œç„¶å <code class="highlighter-rouge">MemberListDataPresentor</code> å°±è´Ÿè´£æ•°æ®ç»„è£…ã€‚æˆ‘ä»¬æ¥çœ‹ä¸‹è¿™ç§ç»“æ„ã€‚</p>

<pre><code class="language-mermaid">classDiagram

class MemberData {
  -String name
  -Int status
}

class MemberViewModel {
  -List&lt;MemberData&gt; dataList
}

class MemberListDataPresentor { 
  -MemberListDataInteractor interactor 
  - bind(MemberViewModel model,MemberListView view)
}

class MemberListViewController {
  -MemberListView View
  -MemberListDataPresentor presentor
  - loadView()
}

class MemberListView{ 
  -View listView 
  -renderView(MemberViewModel data)
}

MemberListDataPresentor *-- MemberViewModel : 1..1

MemberViewModel *-- MemberData: 1..*

MemberListView *-- MemberViewModel: 1..1

MemberListViewController *-- MemberListDataPresentor: 1..1


</code></pre>

<p>è¿™æ ·ä½¿ç”¨çš„æ—¶å€™åªè¦ <code class="highlighter-rouge">MemberListDataPresentor</code> ç»„è£…å¥½æ•°æ®ï¼Œå°±ä¸å¿…å†è°ƒç”¨æ¸²æŸ“äº†ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ <code class="highlighter-rouge">MemberViewModel</code> æ˜ å°„åˆ° <code class="highlighter-rouge">MemberListView</code> ä¸Šäº†ã€‚å¯ä»¥çœ‹åˆ°ä¸‹é¢ä¼ªä»£ç çš„è°ƒç”¨è¿‡ç¨‹ã€‚</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">interactor</span><span class="p">.</span><span class="n">loadAllUserData</span><span class="p">()</span> <span class="p">{</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">MemberData</span><span class="o">&gt;</span> <span class="n">list</span> <span class="n">in</span>
  <span class="n">presentor</span><span class="p">.</span><span class="n">bindData</span><span class="p">(</span><span class="n">list</span><span class="p">,</span><span class="n">listView</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p>è¿™å…¶å®å°±æ˜¯ MVVM çš„æ¶æ„è¿›åŒ–çš„è¿‡ç¨‹ã€‚DRY åŸåˆ™å°±æ˜¯ä¸è¦å†™é‡å¤çš„ä»£ç ï¼Œå°±åƒå†™æ–‡ç« ä¸€æ ·ï¼Œåƒç¯‡ä¸€å¾‹çš„æ–‡å­—æ²¡äººæ„¿æ„çœ‹ä¸€ä¸ªé“ç†ã€‚æˆ‘ä»¬ç»§ç»­æ¥çœ‹è¿™ä¸ªåŠŸèƒ½å‘å±•çš„æƒ…å†µã€‚</p>

<h2 id="å¤§é‡çš„è€¦åˆ">å¤§é‡çš„è€¦åˆ</h2>

<p>éšç€åŠŸèƒ½è¶Šæ¥è¶Šå¤æ‚ï¼Œä¼šå‘ç° <code class="highlighter-rouge">MemberListDataPresentor</code> è¿™ä¸ªç±»è°ƒç”¨çš„æ¥å£ä¼šè¶Šæ¥è¶Šå¤šï¼Œæ—¢éœ€è¦è°ƒç”¨ <code class="highlighter-rouge">MemberListDataInteractor</code> å¤§é‡çš„è¯·æ±‚æ¥å£æ¥è·å–æ•°æ®ï¼ŒåŒæ—¶ä¹Ÿéœ€è¦ç»„è£…å„ç§ Model çš„æ•°æ®ï¼ŒåŠ¿å¿…ä¼šé€ æˆå¤§é‡æ¥å£æš´éœ²ã€‚è¿™ç§å„ç§å¤æ‚å…³ç³»çš„è°ƒç”¨ï¼Œä½¿é˜…è¯»èµ·è¶Šæ¥è¶Šéš¾ã€‚è¿™æ—¶å€™è½¯ä»¶å·¥ç¨‹çš„ä¸€ä¸ªæœ€å¥½æœ‰çš„åŸåˆ™ï¼šä»»ä½•å·¥ç¨‹é—®é¢˜ï¼Œéƒ½å¯ä»¥é€šè¿‡å¢åŠ ä¸€ä¸ªä¸­é—´å±‚æ¥è§£å†³ã€‚æˆ‘ä»¬è¿™é‡Œå°±éœ€è¦å¢åŠ å·¥å…·ç±»è§£è€¦ï¼Œè§£è€¦çš„æœ¬è´¨é€šè¿‡å·¥å…·ç±»æ‹†åˆ†ã€‚ä½¿å¾—ä¾èµ–å…³ç³»å˜ä¸ºå¦‚ä¸‹ç»“æ„ã€‚</p>

<pre><code class="language-mermaid">classDiagram

MemberListDataPresentor ..&gt; ColdObserval

MemberListDataInteractor ..&gt; ColdObserval

MemberListViewController ..&gt; ColdObserval

</code></pre>

<p>æœ‰å¤§é‡æ¥å£ä¾èµ–çš„ç±»ï¼Œäº’ç›¸ç›´æ¥è°ƒç”¨å°±å¯ä»¥ç”¨ç±»ä¼¼çš„æ–¹å¼ã€‚</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">presentor</span><span class="p">.</span><span class="n">addObserval</span><span class="p">()</span> <span class="p">{</span> <span class="n">result</span> <span class="n">in</span>
    <span class="c1">// bind data</span>
<span class="p">}</span>
<span class="n">interactor</span><span class="p">.</span><span class="n">postMessage</span><span class="p">();</span>

</code></pre></div></div>

<p>å…¶å®è¿™å°±æ˜¯ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼æ¥æ‹†åˆ†ã€‚è§‚å¯Ÿè€…æ¨¡å¼çš„å¥½å¤„å°±æ˜¯è§£è€¦ï¼Œå‡å°‘æ¥å£ä¾èµ–ï¼Œè¿™æ ·æˆ‘ä»¬æƒ³è¦å®šä¹‰ä¸åŒçš„ presentor ç±»æ—¶ï¼Œä¹Ÿä¸å¿…ä¾èµ–å„ç§å…·ä½“çš„ interactorï¼Œåªéœ€è¦ç›‘å¬æ¶ˆæ¯å³å¯ã€‚ä¾‹å¦‚ WebRTC ä¸­é‡è¦çš„çº¿ç¨‹å·¥å…·ç±» TaskQueue ï¼Œå°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£è€¦çš„æ‹†åˆ†çš„å·¥å…·ã€‚æŠŠç¼–è§£ç ï¼Œé‡‡é›†ï¼Œä¼ è¾“å¾ˆå¥½çš„è§£è€¦åˆ†ç¦»å¼€ã€‚æœ‰äº†è¿™ä¸ªé“ºå«ï¼Œæˆ‘ä»¬æœ€åæ¥çœ‹ä¸‹å¦‚ä½•æ‰©å±•åŠŸèƒ½ã€‚</p>

<h2 id="æ‰©å±•æ–°åŠŸèƒ½">æ‰©å±•æ–°åŠŸèƒ½</h2>

<p>è¯•æƒ³ä¸‹æˆ‘ä»¬éœ€è¦åœ¨ <code class="highlighter-rouge">MemberListViewController</code> è§†å›¾ä¸Šå¢åŠ æ–°åŠŸèƒ½ï¼Œä¸ä»…ä»…æ˜¯æ˜¾ç¤º <code class="highlighter-rouge">MemberListView</code> è¿™ä¸€ç§è§†å›¾ï¼Œè¿˜èƒ½æ’å…¥å„ç§å…¶ä»–ä¸šåŠ¡è§†å›¾ã€‚</p>

<p>æ­£æ˜¯å› ä¸ºæœ‰äº†å·¥å…·ç±»çš„æ‹†åˆ†ï¼Œè¿™æ ·æ‰€æœ‰çš„ç±»éƒ½æ²¡æœ‰ä»»ä½•çš„ä¾èµ–ï¼Œä¸ç”¨æš´éœ²æ–°æ¥å£ï¼Œæ‰©å±•å°±å¾ˆå®¹æ˜“äº†ã€‚å…·ä½“å¯ä»¥é€šè¿‡ä»£ç†æ¨¡å¼æ¥æ¨ªå‘æ‹†åˆ†ã€‚å®šä¹‰è¦æ‰©å±•çš„ä»£ç†ç±» Pluginï¼Œæˆ‘ä»¬æ–°åŠŸèƒ½åªè¦å®ç° Plugin å®šä¹‰çš„æ¥å£å‡½æ•°ï¼Œå°±å¯ä»¥æ¨ªå‘æ‰©å±•æ‰€æœ‰çš„åŠŸèƒ½ã€‚æˆ‘ä»¬çœ‹ä¸‹ç±»ç»“æ„ã€‚</p>

<pre><code class="language-mermaid">classDiagram

class MemberListViewPlugin { 
  -View subView 
  -loadView()
}

class MemberListDataInteractorPlugin { 
  -List&lt;MemberData&gt; dataList 
  -requestData()
}

class MemberListDataPresentorPlugin { 
  -List&lt;MemberData&gt; dataList 
  -bindData()
}

MemberListDataPresentor *-- MemberListDataPresentorPlugin : 1..*

MemberListDataInteractor *-- MemberListDataInteractorPlugin : 1..*

MemberListView *-- MemberListViewPlugin : 1..*

</code></pre>

<p>ç„¶åæˆ‘ä»¬çš„æ’ä»¶è°ƒç”¨è¿‡ç¨‹å°±å¦‚ä¸‹ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">MemberListDataPresentorPlugin</span> <span class="o">*</span><span class="n">presentorPlugin</span> <span class="o">=</span> <span class="n">MemberListDataPresentorPlugin</span><span class="p">()</span>
<span class="n">presentor</span><span class="p">.</span><span class="n">registPlugin</span><span class="p">(</span><span class="n">presentorPlugin</span><span class="p">);</span>
<span class="n">MemberListDataInteractorPlugin</span> <span class="o">*</span><span class="n">interactorPlugin</span> <span class="o">=</span> <span class="n">MemberListDataInteractorPlugin</span><span class="p">()</span>
<span class="n">interactor</span><span class="p">.</span><span class="n">registPlugin</span><span class="p">(</span><span class="n">interactorPlugin</span><span class="p">)</span>
</code></pre></div></div>

<p>è¿™æ ·æ¯æ¬¡å¢åŠ æ–°åŠŸèƒ½æ—¶ï¼Œä¸éœ€è¦æ›´æ”¹åŸæ¥çš„ <code class="highlighter-rouge">MemberListDataPresentor</code>ã€ <code class="highlighter-rouge">MemberListDataInteractor</code> ä»»ä½•ä»£ç ï¼Œåªéœ€è¦æ·»åŠ æ’ä»¶çš„å®ç°å°±å¯ä»¥äº†ã€‚è¿™å…¶å®å°±æ˜¯å¾ˆå¤šè½¯ä»¶æ’ä»¶çš„æ¶æ„æ¨¡å¼ã€‚</p>

<p>æˆ‘ä»¬ä»ä¸Šé¢è¿™ä¸ªä¾‹å­é‡Œå¯ä»¥çœ‹åˆ°ä»£ç çš„æ¼”å˜ï¼Œå¦‚ä½•ä» MVC åˆ° MVVM å†åˆ°æœ€åæ’ä»¶åŒ–ï¼Œè¿™äº›è¿‡ç¨‹è®©ä»£ç ç»“æ„æ›´åŠ æ¸…æ™°å®¹æ˜“é˜…è¯»ï¼Œé˜²æ­¢ä»£ç è…åŒ–ã€‚</p>

<h2 id="é‡æ„çš„å›é¡¾">é‡æ„çš„å›é¡¾</h2>

<p>æˆ‘ä»¬æ€»ç»“ä¸‹ä¸Šè¿°çš„é‡æ„è¿‡ç¨‹ä¸­å‡ ä¸ªå…³é”®çš„èŠ‚ç‚¹ã€‚</p>

<ol>
  <li>å½“ä½ å‘ç°ä¸€ä¸ªç±»è¶Šæ¥è¶Šå¤§ã€‚
    <blockquote>
      <p>è¶…è¿‡äº†1000è¡Œä»£ç äº†ï¼Œä¸€å®šæ˜¯éœ€è¦æ‹†åˆ†åŠŸèƒ½äº†ã€‚</p>
    </blockquote>
  </li>
  <li>å½“ä½ å¼€å‘åŠŸèƒ½æ—¶ï¼Œå‘ç°éœ€è¦åŸæ¥çš„ç±»å¤§é‡æ›´æ”¹æ¥å£æ‰èƒ½å®ç°ï¼Œæˆ‘ä»¬å°±éœ€è¦ç”¨å·¥å…·ç±»æ¥è§£è€¦ã€‚</li>
  <li>å½“æ·»åŠ æ–°åŠŸèƒ½æ—¶ï¼Œéœ€è¦é¢‘ç¹æ›´æ”¹ä¸€ä¸ªç±»æ—¶ã€‚
    <blockquote>
      <p>è¿™æ—¶å€™å°±éœ€è¦ç”¨ä»£ç†æ¨¡å¼çš„æ’ä»¶æ¥æ‰©å±•ä½ çš„ç±»ï¼Œè¿™æ ·å°±å¯ä»¥é¿å…å¤§é‡çš„ä¿®æ”¹é€»è¾‘ï¼Œä¿è¯ä»£ç ç¨³å®šæ€§ã€‚ä¾‹å¦‚æˆ‘ä»¬ç»å¸¸çœ‹åˆ°çš„ä¸€äº›å¯æ’æ‹”çš„æ’ä»¶ç³»ç»Ÿï¼Œéƒ½æ˜¯é€šè¿‡è¿™ç§æ–¹å¼å®ç°çš„ã€‚</p>
    </blockquote>
  </li>
  <li>æ€§èƒ½ä¼˜åŒ–çš„ä»£ç å¤ªå¤šæ—¶å°¤å…¶æ³¨æ„ï¼Œå°½é‡ä¸è¦æš´éœ²å‡ºæ¥ï¼Œå› ä¸ºæ€§èƒ½ä¼˜åŒ–çš„ä»£ç å¾€å¾€å¯è¯»æ€§æ¯”è¾ƒå·®ã€‚
    <blockquote>
      <p>å¯¹äºä¼˜åŒ–æ€§èƒ½çš„ä»£ç ï¼Œé‡æ„çš„æ—¶å€™æˆ‘è¿™é‡Œï¼Œå°½é‡å°è£…æˆå†…éƒ¨çš„å‡½æ•°ï¼Œè€Œä¸è¦æš´éœ²ç»™å¤–éƒ¨ä½¿ç”¨ã€‚æ¯”å¦‚å®šä¹‰äº†ä¸€ä¸ª Cache èµ„æºçš„ç±»ï¼Œä¸ºäº†ä¼˜åŒ–å†…å­˜ï¼Œè¿™ç§æœ€å¥½ä¸è¦æŠŠAPIæš´éœ²åœ¨å¤–é¢ï¼Œåœ¨å†…éƒ¨æ¶ˆåŒ–æœ€å¥½ã€‚</p>
    </blockquote>
  </li>
  <li>å‘ç°æ— ç”¨çš„åŠŸèƒ½ä»£ç åŠæ—¶çš„åˆ é™¤ï¼Œé˜²æ­¢è¿›ä¸€æ­¥é˜²æ­¢è…åŒ–
    <blockquote>
      <p>ä¸åŠæ—¶åˆ é™¤çš„åæœï¼Œä¼šå‘ç°æ–°åŠŸèƒ½è°ƒç”¨ä»¥å‰ç§»é™¤çš„åŠŸèƒ½ç±»çš„æ–¹æ³•ï¼Œè¿™æ—¶å€™ä½ æƒ³åˆ é™¤è€åŠŸèƒ½ä»£ç æ—¶ï¼Œä½ ä¼šå‘ç°æ¬²å“­æ— æ³ªã€‚</p>
    </blockquote>
  </li>
</ol>

<p>å¯¹æ¯” ChatGPT é‡æ„çš„æ€»ç»“ï¼Œæ€»ä½“åŸåˆ™ä¸€æ ·ï¼Œä½†æ˜¯ä¼šæ›´åŠ å…·ä½“ä¸€ç‚¹ã€‚æœ€åæˆ‘æƒ³è®²ä¸‹å…³äºé‡æ„ä»£ç æ—¶ï¼Œå¦‚ä½•ä¿è¯ç¨³å®šæ€§çš„ä¸€äº›åŸåˆ™ã€‚æˆ‘æ€»ç»“èµ·æ¥å°±æ˜¯å°æ­¥å¿«èµ°ï¼Œä¿è¯ç¨³å®šã€‚åœ¨é‡æ„çš„è¿‡ç¨‹ä¸­å…è®¸ä¸€å®šçš„å†—ä½™ä»£ç ï¼Œå¢åŠ ç°åº¦èƒ½åŠ›ï¼Œå½“å‘ç°é—®é¢˜æ—¶å¯ä»¥åŠæ—¶å›æ»šï¼Œç­‰å¾…é‡æ„çš„ä»£ç æµ‹è¯•æ²¡é—®é¢˜äº†å†åˆ é™¤ã€‚</p>

<p>å¾ˆå¤šä¼˜ç§€çš„å¼€æºé¡¹ç›®çš„ä»£ç ä¸ä»…å¯¹ä»£ç çš„æ€§èƒ½ï¼Œä¹Ÿå¯¹ä»£ç çš„è´¨é‡å’Œå¯ç»´æŠ¤æ€§è¦æ±‚å¾ˆé«˜ï¼Œé˜…è¯»èµ·æ¥å°±åƒæ¬£èµä¼˜ç¾çš„è¯—ç¯‡ã€‚å±å±±ä¸€æ ·çš„ä»£ç ä»æ¥ä¸ä¼šæœ‰ä¼Ÿå¤§çš„ä½œå“ã€‚æˆ‘ç›¸ä¿¡æ¯ä¸ªä¼˜ç§€çš„ç¨‹åºå‘˜ï¼Œéƒ½ä¸æ„¿æ„æŠŠè‡ªå·±çš„ä»£ç å˜æˆå±å±±ï¼Œä½†æ˜¯ç½—é©¬ä¹Ÿä¸æ˜¯ä¸€å¤©èƒ½å»ºæˆçš„ï¼Œå­¦ä¼šé‡æ„æ˜¯å¿…å¤‡çš„æŠ€èƒ½ã€‚</p>

</article>





<div class="pay" align="center">
  <h3 style="color:#4DD0E1;">å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè°¢è°¢ä½ çš„èµèµ</h3>
  <img src="https://cdn.jsdelivr.net/gh/animeng/animeng.github.com/images/pay-me.jpeg" alt="å›¾3" style="width:400px;">
  <p>
    å¦‚æœ‰ç–‘é—®<a href="/contact/">è¯·è”ç³»æˆ‘</a>
  </p>
</div>

<div id="gitmentContainer"></div>
<link rel="stylesheet" href="/css/comment.css">
<script src="/resource/gitment.browser.v1.js"></script>
<script>
var gitment = new Gitment({
    owner: 'animeng',
    repo: 'animeng.github.com',
    oauth: {
        client_id: 'Iv1.e26fdd0d45ec4f26',
        client_secret: '8d51965f69de8e300a42e151437b944f7cccf819',
    },
});
gitment.render('gitmentContainer');
gitment.uploadIp();
</script>

<script src="/resource/mermaid.min.js"></script>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>  
$(document).ready(function () {
  window.mermaid.initialize({
    startOnLoad: true,
    theme: "default",
  });
  window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid'));
});
</script>

		
	

      	
      </div>
    </div>
  </div>

  <footer class="footer">
  <div class="p2 wrap">
    <div class="measure mt1 center">
      <small>
	<a>Â© 2020 Mengtnt </a> 
  <a class="fa fa-rss" href="/feed.xml"></a>
  <br>
  <span>
    Site powered by <a href="https://jekyllrb.com/">Jekyll</a> &amp; <a href="https://pages.github.com/">Github Pages</a>.
  </span>
    </div>
  </div>
</footer>



</body>
</html>
